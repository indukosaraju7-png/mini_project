import{a as l}from"./stimulus-helpers-Bg5ApOVk-1.js";import c from"./ez-base-controller-DuL8VR07-1.js";import{sendTrackingEvent as t,findCategoryByElement as h,trackCompleteEvent as d}from"./tracking-ChOFcS2D-1.js";import{ay as m,ah as u,az as g,z as C,aA as p,aB as L,A as f}from"./actions-C6z5I147-1.js";import{M as v}from"./media-matcher-vK8K0PVe-1.js";import{e as o}from"./performance-helpers-DpsuwFL7-1.js";import"./stimulus-Cq41p_up-1.js";import"./js-Cz0CWeBA-1.js";import"./helpers-DWGVlOV6-1.js";import"./init-user-CLXATX98-1.js";const a=new v,r=class r extends c{constructor(){super(...arguments),this.isVisible=e=>!!(e&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)),this.trackExploreClick=e=>{t({element:e.target,data:{action:m,label:`Link-${e.target.dataset.englishLabel}`,content_type:`Content-${e.target.dataset.contentType}`}})}}connect(){this.hasMobileMenuTarget&&(this.setupSearchCloseQueries(),a.evaluateAll(),a.addListeners())}disconnect(){a.removeListeners(),a.clearQueries()}clearSearchInput(){requestAnimationFrame(()=>{this.searchField.value="",this.searchField.focus()})}hideOnClickOutside(){const e=n=>{!this.element.contains(n.target)&&this.isVisible(this.element)&&(requestAnimationFrame(()=>{document.body.classList.toggle("is-mobile-search")}),i())},i=()=>{document.removeEventListener("click",e)};setTimeout(()=>{document.addEventListener("click",e)},50)}toggleMobileSearch(){const e=document.body;requestAnimationFrame(()=>{e.classList.toggle("is-mobile-search"),e.classList.contains("is-mobile-search")?(this.hideOnClickOutside(),requestAnimationFrame(()=>{this.savedVal=this.searchField.value,this.searchField.focus(),this.searchField.value="",this.searchField.value=this.savedVal})):requestAnimationFrame(()=>{this.searchField.value="",this.searchField.value=this.savedVal})})}setupSearchCloseQueries(){a.addMediaQuery("(max-width: 635px)",null,()=>{document.querySelector(".ez-dark-overlay.mobile-search-overlay")&&this.toggleMobileSearch()})}rebuyCredits(e){t({element:e.currentTarget,data:{action:u}})}headerLogin(){o(()=>{t({element:this.loginButtonTarget,data:{action:p}})})}headerSignUp(){o(()=>{t({element:this.signupButtonTarget,data:{action:L}})})}trackLogoutClick(e){t({element:e.target,data:{action:g}})}sendHeaderJoinProEvent(e){const i=h(e.target);t({element:e.target,data:{action:C,category:i}}),d({action:f,category:i})}get searchField(){return this.element.querySelector(".ez-search-form__input")}};r.targets=["mobileMenu","loginButton","signupButton"];let s=r;l({name:"site-header",import:s});export{s as default};
