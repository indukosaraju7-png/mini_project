import{a}from"./stimulus-helpers-Bg5ApOVk-1.js";import c from"./ez-base-controller-DuL8VR07-1.js";import{h as m,t as l}from"./helpers-DWGVlOV6-1.js";import{sendTrackingEvent as t}from"./tracking-ChOFcS2D-1.js";import{aK as d,aL as u}from"./actions-C6z5I147-1.js";import{a as p,s as C}from"./sessions-manager-DcsfpJco-1.js";import{g as f}from"./resource-show-helpers-DBXK1-Vp-1.js";import{i as _}from"./ajax-helpers-BQLKOG2a-1.js";import{e as w}from"./events-BkNvg-Hc-1.js";import"./stimulus-Cq41p_up-1.js";import"./js-Cz0CWeBA-1.js";import"./init-user-CLXATX98-1.js";import"./index-C4xxlH8f-1.js";import"./_commonjsHelpers-BosuxZz1-1.js";import"./modal_helpers-SODIeXFK-1.js";class g extends c{constructor(){super(...arguments),this.contributorClick=e=>{this.trackContributorClick(e)}}connect(){p(this.element.dataset.resourceId),C("most_recent_resource_id",this.element.dataset.resourceId)}trackContributorClick(e){t({element:e.target,data:{action:d}})}trackLicenseClick(e){t({element:e.target,data:{action:u,category:"Show",label:f(),content_type:`Content-${m()}`}})}showFreeAttributionSlidedown({detail:{licenseType:e,resourceId:o}}){if(e==="free"){const r=document.querySelector('[data-controller="free-attribution-slidedown"]'),i=document.querySelector(".ez-session-modal__download-limit");if(r||i)return;const n=document.querySelector(".ez-page-wrapper__content");_({url:`/resources/${o}/show_free_attr_slidedown`,destElem:n,destPos:"afterbegin",successCb:()=>{setTimeout(()=>{l(w.show_page.reveal_free_attribution_slidedown)},100)},errorCb:s=>{console.error(s)}})}}}a({name:"resource-show-main",import:g});export{g as default};
