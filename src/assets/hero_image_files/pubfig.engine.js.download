(()=>{var VS=Object.create;var Id=Object.defineProperty,HS=Object.defineProperties,zS=Object.getOwnPropertyDescriptor,qS=Object.getOwnPropertyDescriptors,YS=Object.getOwnPropertyNames,_u=Object.getOwnPropertySymbols,Eu=Object.getPrototypeOf,yu=Object.prototype.hasOwnProperty,$S=Object.prototype.propertyIsEnumerable,jS=Reflect.get;var Sd=(i,e,t)=>e in i?Id(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,b=(i,e)=>{for(var t in e||(e={}))yu.call(e,t)&&Sd(i,t,e[t]);if(_u)for(var t of _u(e))$S.call(e,t)&&Sd(i,t,e[t]);return i},V=(i,e)=>HS(i,qS(e));var Su=(i=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(i,{get:(e,t)=>(typeof require!="undefined"?require:e)[t]}):i)(function(i){if(typeof require!="undefined")return require.apply(this,arguments);throw Error('Dynamic require of "'+i+'" is not supported')});var f=(i,e)=>()=>(i&&(e=i(i=0)),e);var Ti=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports);var KS=(i,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of YS(e))!yu.call(i,s)&&s!==t&&Id(i,s,{get:()=>e[s],enumerable:!(r=zS(e,s))||r.enumerable});return i};var Xi=(i,e,t)=>(t=i!=null?VS(Eu(i)):{},KS(e||!i||!i.__esModule?Id(t,"default",{value:i,enumerable:!0}):t,i));var y=(i,e,t)=>Sd(i,typeof e!="symbol"?e+"":e,t);var rs=(i,e,t)=>jS(Eu(i),t,e);var T=(i,e,t)=>new Promise((r,s)=>{var n=d=>{try{a(t.next(d))}catch(c){s(c)}},o=d=>{try{a(t.throw(d))}catch(c){s(c)}},a=d=>d.done?r(d.value):Promise.resolve(d.value).then(n,o);a((t=t.apply(i,e)).next())});var sn,er,ae,nn=f(()=>{sn=i=>{let{dependencies:e,name:t}=i||{};if(e){if(!Array.isArray(e))throw new Error(`Module Definition Error: ${t}. Dependencies must be an array.`);e.forEach(r=>{let{token:s}=typeof r=="string"?{token:r}:r;if(!s)throw new Error(`Module Definition Error: ${t}. Dependency must contain a token.`);if(typeof s!="string")throw new Error(`Module Definition Error: ${t}. Token must be a string.`)})}},er=i=>i.charAt(0).toLowerCase()+i.slice(1),ae=(i,{name:e,returnValue:t,warn:r=!1}={})=>i||function(){return r&&console.warn(`${e||"module"} is disabled`),t}});var Qt,on=f(()=>{Qt={SINGLETON:"singleton",FOR_FEATURE:"forFeature"}});var A,Ad=f(()=>{on();nn();A=class i{constructor(){this._modules=new Map}static get instance(){return this._instance||(this._instance=new i),this._instance}set(e,t){var r;if(!e)throw new Error("Token must be provided");if(this._modules.has(e))throw new Error(`Module with token ${e} already exists`);if((r=t.dependencies)!=null&&r.length&&new Set(t.dependencies).size!==t.dependencies.length)throw new Error(`Duplicated dependencies found in module ${e}.`);this._modules.set(e,t)}get(e){return this._modules.get(e)}has(e){return this._modules.has(e)}delete(e){this._modules.delete(e)}getAlias(e){let t=this.get(e);return t==null?void 0:t.defaultAlias}clear(){this._modules.clear()}static class(e,{token:t,factory:r,dependencies:s=[],injectionMode:n=Qt.SINGLETON,defaultAlias:o}){if(!e)throw new Error("Class must be provided");if(!t)throw new Error("Token must be provided");sn({dependencies:s,name:e.name}),i.instance.set(t,{factory:r||(({dependencies:a})=>new e(a)),dependencies:s,injectionMode:n,defaultAlias:o||er(t),type:"classModule"})}static object({token:e,value:t,factory:r,dependencies:s,injectionMode:n=Qt.SINGLETON,defaultAlias:o}){if(!e)throw new Error("Token must be provided");if(!t&&!r)throw new Error("Value or factory must be provided");sn({dependencies:s,name:e}),i.instance.set(e,{value:t,factory:r,dependencies:s,injectionMode:n,defaultAlias:o||er(e),type:"object"})}static function(e,{token:t,dependencies:r,defaultAlias:s}={}){if(!e)throw new Error("Function must be provided");if(!t)throw new Error("Token must be provided");sn({dependencies:r,name:t}),i.instance.set(t,{dependencies:r,defaultAlias:s||er(t),func:e,type:"function"})}}});var G,Iu=f(()=>{Ad();on();nn();G=class i{constructor(e){this._moduleRegistry=e,this._moduleInstances=new Map}static get instance(){return this._instance||(this._instance=new i(A.instance)),this._instance}set(e,t){this._moduleInstances.set(e,t)}clear(){this._moduleInstances.clear()}get(e){return this._moduleInstances.get(e)}delete(e){this._moduleInstances.delete(e)}call(e,...t){return T(this,null,function*(){let r=this._moduleRegistry.get(e);if(!r)throw new Error(`Module with token "${e}" does not exist`);let{dependencies:s,type:n,func:o}=r;if(n!=="function")throw new Error(`Module with token "${e}" is not a function type`);let a=yield this._resolveDependencies({token:e,dependencies:s});return o(a,...t)})}create(r){return T(this,arguments,function*(e,{provide:t={}}={}){let s=this._moduleRegistry.get(e);if(!s)throw new Error(`Module with token "${e}" does not exist`);let{dependencies:n=[],factory:o,value:a,func:d}=s,c=n.filter(p=>{let m=this._getDependencyObject(p),_=m.alias||this._moduleRegistry.getAlias(m.token)||er(m.token);return!t[_]});return this._resolveDependencies({token:e,dependencies:c}).then(p=>this._createInstance({token:e,dependencies:b(b({},p),t),container:this,factory:o,value:a,func:d}))})}resolve(e,t){return T(this,null,function*(){return this._resolve({token:e,optional:t})})}resolveAll(e){return T(this,null,function*(){if(!Array.isArray(e))throw new Error("Tokens must be an array");return this._resolveDependencies({dependencies:e})})}has(e){return this._moduleInstances.has(e)}_resolve(n){return T(this,arguments,function*({token:e,resolvedDeps:t=new Set,parentToken:r,optional:s}){if(!this._moduleRegistry.has(e)){if(s)return null;throw new Error(`${[...t,e].join(" -> ")}. Module with token "${e}" does not exist`)}let o=this._moduleRegistry.get(e),{dependencies:a=[],factory:d,value:c,func:u,injectionMode:p=Qt.SINGLETON}=o;if(r&&p===Qt.FOR_FEATURE&&(e=`${r}:${e}`),this.has(e))return this.get(e);if(t.has(e))throw new Error(`Circular dependency detected: ${Array.from(t).join(" -> ")} ->${e}`);t.add(e);let m=this._resolveDependencies({token:e,dependencies:a,resolvedDeps:t}).then(h=>this._createInstance({token:e,dependencies:h,container:this,factory:d,value:c,func:u}));return this.set(e,m),m.then&&m.then(h=>{this.set(e,h)}),m})}_resolveDependencies(s){return T(this,arguments,function*({token:e,dependencies:t,resolvedDeps:r}){let n=[];return t.length&&(n=yield Promise.all(t.map(o=>T(this,null,function*(){let{token:a,alias:d,optional:c}=this._getDependencyObject(o),u=yield this._resolve({token:a,resolvedDeps:new Set(r),parentToken:e,optional:c}),p=this._moduleRegistry.getAlias(a);return[d||p||a,u]})))),Object.fromEntries(n)})}_getDependencyObject(e){return typeof e=="string"?{token:e}:e}_createInstance({dependencies:e,container:t,factory:r,value:s,token:n,func:o}){if(s!==void 0)return s;if(o!==void 0)return o.bind(null,e);if(!(r instanceof Function))throw new Error(`Container Error: ${n}. Factory must be a function`);let a=r({dependencies:e,container:t});if(!(a instanceof Object))throw new Error(`Container Error: ${n}. Factory must return an object`);return a}}});var tr=f(()=>{nn();Ad();Iu();on()});function ye(i,e){return e.reduce((t,r)=>(i[r]!==void 0&&(t[r]=i[r]),t),{})}var Au=f(()=>{});var an,dn,ss=f(()=>{an="_fs-ad-iframe-container",dn="data-fs-ancillary"});var ir,bu=f(()=>{ss();ir=i=>{let e=document.getElementById(i);if(!e)return;let t=e.querySelector(`#${an}`);t&&t.remove(),e.querySelectorAll('div[id*="google_ads_iframe"]').forEach(o=>o.remove());let s=['div[id="teads0"]','div[class="teads-resize'];e.querySelectorAll(s.join()).forEach(o=>o.remove())}});var tt=f(()=>{Au();bu()});var U=f(()=>{tr();tt()});var oe,Jt=f(()=>{oe={DYNAMIC_AD_OPTIONS:"dynamicAdOptions",DYNAMIC_AD_OPTIONS_V2:"dynamicAdOptionsV2",PUSHDOWN_OPTIONS:"pushdownOptions",SIDE_WALL_OPTIONS:"sideWallOptions",CUBE_OPTIONS:"cubeOptions",CAROUSEL_OPTIONS:"carouselOptions",SLIDING_UNIT_OPTIONS:"slidingUnitOptions",STICKY_AD_OPTIONS:"stickyAdOptions",STICKY_FOOTER_OPTIONS:"stickyFooterOptions"}});function Tu(i,e){let t=new Set,r=WS();return i.forEach(s=>{(s.superflex||s.superflexV2)&&t.add("Superflex"),s.lazyAd&&t.add("LazyAd"),s.fluidAd&&t.add("FluidAd"),s.stickyFooterOptions&&s.stickyFooterOptions.active&&t.add("StickyFooter"),s.sideWallOptions&&s.sideWallOptions.type!==0&&t.add("SideWall"),s.pushdownOptions&&s.pushdownOptions.isPushdownUnit&&t.add("Pushdown"),s.stickyRailOptions&&s.stickyRailOptions.active&&t.add("StickyRail"),s.interstitialOptions&&s.interstitialOptions.active&&t.add("Interstitial");let n=s.sizeMappings.some(o=>{var a;return(a=o==null?void 0:o.elementTargetedConfig)==null?void 0:a.active});(s.dynamicAdOptions&&s.dynamicAdOptions.active||n)&&t.add("DynamicAds"),s.dynamicAdOptionsV2&&s.dynamicAdOptionsV2.dynamicAd2&&t.add("DynamicAds"),s.slidingUnitOptions&&s.slidingUnitOptions.active&&t.add("SlidingUnit"),s.stickyAdOptions&&s.stickyAdOptions.stickyAdEnabled&&t.add("StickyAd"),s.sizeMappings&&s.sizeMappings.forEach(o=>{o.videoEnabled&&t.add("Video"),o.superflex&&t.add("Superflex")})}),e.forEach(s=>{s.active&&t.add("Video")}),Array.from(t).filter(s=>r.includes(s))}var wu,WS,it,Zt,pt=f(()=>{Jt();wu="StickyFooter,SideWall,Video,SlidingUnit,StickyAd,Pushdown,StickyRail,DynamicAds,Interstitial,Superflex,Carousel,InImage,Cube,IAI",WS=()=>wu.includes("ALL_POSSIBLE_MODULES")?[]:wu.split(",").map(i=>i.trim()),it=({placement:i,type:e})=>{let t=i==null?void 0:i[e];if(!t)return!1;if(t.active!=null&&t.active!==!1)return!0;switch(e){case oe.DYNAMIC_AD_OPTIONS_V2:return!!t.dynamicAd2;case oe.PUSHDOWN_OPTIONS:return!!t.isPushdownUnit;case oe.SIDE_WALL_OPTIONS:return t.type!==0;case oe.STICKY_AD_OPTIONS:return!!t.stickyAdEnabled;case oe.STICKY_FOOTER_OPTIONS:return Object.keys(t).length>0&&t.active!==!1;default:return!1}},Zt=({placement:i,type:e})=>it({placement:i,type:e})?i[e]:{}});var rr,bd=f(()=>{rr=class{constructor(){y(this,"_bidRequestLibrary",new Map)}getSignal(e){return this._bidRequestLibrary.has(e)&&(this._bidRequestLibrary.get(e).reject(),this._bidRequestLibrary.delete(e)),new Promise((t,r)=>{this._bidRequestLibrary.set(e,{resolve:t,reject:r})})}getPendingRequest(e){return this._bidRequestLibrary.has(e)?()=>{this._bidRequestLibrary.get(e).resolve(),this._bidRequestLibrary.delete(e)}:null}shouldRefresh(){return!0}fetchBids(){}refresh(){}}});var l,F=f(()=>{l={ANALYTICS:"Analytics",PERFORMANCE_LOGGER:"PerformanceLogger",DISPENSARY_DATA:"DispensaryData",AD_SLOT_SERVICE:"AdSlotService",AD_SLOTS_MANAGER:"AdSlotsManager",LOGGER:"Logger",EVENT_BUS:"EventBus",CONFIG_MANAGER:"ConfigManager",FREESTAR:"freestar",WINDOW:"window",PAGE:"Page",SESSION_STORAGE_MANAGER:"SessionStorageManager",PREBID_MANAGER:"PrebidManager",AMAZON_MANAGER:"AmazonManager",AD_QUALITY_MANAGER:"AdQualityManager",GAM_MANAGER:"GamManager",DEVICE_INFO:"deviceInfo",GEO_INFO:"geoInfo",FS_DATA:"fsdata",BID_RESPONSE_ANALYTICS_EVENT_FACTORY:"BidResponseAnalyticsEventFactory",BID_WON_ANALYTICS_EVENT_FACTORY:"BidWonAnalyticsEventFactory",BID_REQUESTED_ANALYTICS_EVENT_FACTORY:"BidRequestedAnalyticsEventFactory",DFP_RESPONSE_ANALYTICS_EVENT_FACTORY:"DfpResponseAnalyticsEventFactory",ANALYTICS_EVENT_FACTORY:"AnalyticsEventFactory",MAIN_QUEUE:"MainQueue",ERROR_QUEUE:"ErrorQueue",IMMEDIATE_QUEUE:"ImmediateQueue",BEACON_QUEUE:"BeaconQueue",ANALYTICS_MESSAGE_FACTORY:"AnalyticsMessageFactory",DATA_COLLECTOR_API:"DataCollectorAPI",IDENTITY_CONFIG:"IdentityConfig",HASHED_EMAIL_PROVIDERS:"HashedEmailProviderManager",REALTIME_PROVIDERS:"RealtimeProvidersManager",IDENTITY_MANAGER:"IdentityManager",ATS_MANAGER:"atsManager",VIDEO:"Video",STICKY_AD:"StickyAd",FOP_VIDEO_SCRIPTS:"FopVideoScripts",AUCTION_MANAGER:"AuctionManager",NATIVE_RENDER_MANAGER:"nativeRenderManager",CONFIANT:"Confiant",IN_BANNER_VIDEO_PLAYER:"InBannerVideoPlayer",OUTSTREAM_VIDEO_PLAYER:"OutstreamVideoPlayer",INCONTENT_VIDEO_AD:"InContentVideoAd",FLOATING_VIDEO_AD:"FloatingVideoAd",INCONTENT_TO_FLOATING_VIDEO_AD:"InContentToFloatingVideoAd",AD_REFRESHER:"AdRefresher",REFRESH_LIBRARY:"RefreshLibrary",STICKY_FOOTER_REFRESHER:"StickyFooterRefresher",DEFAULT_REFRESHER:"DefaultRefresher",SUPERFLEX_REFRESHER:"SuperflexRefresher",DEVICE_ORIENTATION_TRACKER:"DeviceOrientationTracker",VIRTUAL_KEYBOARD_REFRESH_CONTROL:"VirtualKeyboardRefreshControl",RENDER_BID_MIDWAY:"RenderBidMidwayManager",GLOBAL_REFRESH_USER_IDS_STATE:"GlobalRefreshUserIDsState",REBID_MANAGER:"RebidManager",MEMORY_MONITOR:"MemoryMonitor",BIDS_MANAGER:"BidsManager",OPTABLE_MANAGER:"OptableManager",ANCILLARY:"Ancillary",BRANDING:"Branding",REPORT_AD:"ReportAd",IDEAL_AD_STACK_MANAGER:"IdealAdStackManager",IIQ_MANAGER:"IntentIqManager",CONNECTID_MANAGER:"ConnectIdManager",USER_INFO_MANAGER:"UserInfoManager",AD_BLOCK:"AdBlock",URL_VALIDATOR:"UrlValidator"}});var wd,vu=f(()=>{bd();U();F();wd=class extends rr{constructor({freestar:e,gamManager:t}={}){super(),this._freestar=e,this._gamManager=t}shouldRefresh({elementId:e}){var t,r;return e===((r=(t=this._freestar.currentStickyFooter)==null?void 0:t.placement)==null?void 0:r.name)}fetchBids({elementId:e}){var s;let t=((s=this._freestar.currentStickyFooter)==null?void 0:s.footer)||this._freestar.currentStickyFooter;if(t!=null&&t.getIsNextVideo())return;let r=this.getSignal(e);this._freestar.currentStickyFooter.stickyFooterRefresh(r)}refresh({elementId:e,refreshLibraryItem:t}){var n;let r=this._gamManager.instance.pubads().getSlots().find(o=>o.getSlotElementId()===e);this._gamManager.setSlotTargeting({slot:r,key:"fsrefresh",value:(n=t.timesRefreshed)!=null?n:0});let s=this.getPendingRequest(e);typeof s=="function"?s():this._freestar.currentStickyFooter.stickyFooterRefresh()}};A.class(wd,{token:l.STICKY_FOOTER_REFRESHER,dependencies:[l.FREESTAR,l.GAM_MANAGER]})});function QS(){let{removeFooter:i,specialAdhesionRemoved:e,customFooter:t}=freestar.fsdata;if(i||e||t){let r=["#fs-select-footer-remove","#fs-special-remove"];for(let s=0;s<r.length;s++)if(Td({domSelector:r[s]}))return!0}return!1}function Ru({placement:i}){if(QS())return!0;let{remove:e,adhesionRemove:t,add:r}=Zt({placement:i,type:oe.STICKY_FOOTER_OPTIONS});return!!(e&&Td({domSelector:e})||t&&Td({domSelector:t})||r&&!document.getElementById("fs-select-footer"))}var Td,Ou=f(()=>{pt();Jt();Td=({domSelector:i})=>document.querySelector(i)});var ln,JS,ww,cn,fn,vi,ZS,Tw,Cu,Pu,vd,xu,Rd,ns,sr,Du,un,os,Od,Nu,Mu,Ri,rt,pn,hn,ku,mn,gn,Lu,Bu,Fu,Uu,he=f(()=>{ln="freestar.com",JS="undefined",ww=`${JS}pubfig.min.js`,cn=[[640,360],[552,334]],fn=[[300,169],[400,225]],vi="https://a.pub.network/core",ZS="undefined",Tw=`${ZS}prebid.js`,Cu=[{siteId:285,restrictedCountries:["IN","VN","NP","DZ","IQ","MA","AF","TR","EG","PK","ID","MA","BD","RS","PH","TN","BG"]}],Pu=["triplelift"],vd=["slidingUnit","superflex","interstitial","stickyRail"],xu=[[468,60],[728,90],[970,90],[970,250],[300,50],[300,100],[320,50],[320,100],[120,600],[160,600],[300,250],[300,600],[336,280],[1,1],[0,0]],Rd={v1:[{precision:2,min:0,max:20,increment:.01},{precision:2,min:20,max:40,increment:.5},{precision:2,min:40,max:100,increment:1},{precision:2,min:100,max:150,increment:2.5},{precision:2,min:150,max:250,increment:5},{precision:2,min:250,max:400,increment:10},{precision:2,min:400,max:800,increment:50}],v2:[{precision:2,min:0,max:2,increment:.01},{precision:2,min:2,max:10,increment:.05},{precision:2,min:10,max:20,increment:.5},{precision:2,min:20,max:100,increment:5}]},ns=["AT","BE","BG","HR","CY","CZ","DK","EE","EL","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","GB","NO","IS","LI","CH"],sr=["CA","CO","CT","VA","UT"],Du=[285],un={gumgum:'[id^="ad_is"]',"33across":'[class^="ttx-lb"]',undertone:'[class^="ut_container"]',kargo:'[class^="kargo-ad"]',yieldmo:'[class^="ym-adhesion"]',ogury:'[class^="ogy-footer-ad"]'},os=850,Od="dianomi_context_script",Nu="https://www.dianomi.com/js/contextfeed.js",Mu=["sortable"],Ri="FREESTAR",rt="NONE",pn={FREESTAR:"FREESTAR",NONE:"PUBLISHER"},hn="00000000-0000-0000-0000-000000000000",ku="https://cdn.privacy-mgmt.com/unified/wrapperMessagingWithoutDetection.js",mn=899033,gn=1035372,Lu=1388893,Bu="fs.config",Fu="amazon",Uu=50});function Gu(i,e,t){if(!e)return;let s=(Array.isArray(e)?e:e.match(/([^[.\]])+/g)).reduce((n,o)=>n&&n[o],i);return s===void 0?t:s}var Vu=f(()=>{});var z,Hu,$e=f(()=>{z=(i,e=window)=>{var r,s;return(s=new URLSearchParams((r=e.location)==null?void 0:r.search).get(i))!=null?s:""},Hu=(i,e=window)=>{let t=new URLSearchParams(e.location.search);t.has(i)&&t.delete(i),e.location.search=t.toString()}});function En({value:i}){return i&&Array.isArray(i)&&i.length>0}function qu(i){return i===!!i}function yn(i){return typeof i=="number"}function Yu(i,e,t){return i.split(e).join(t)}function Sn(i){return typeof i=="string"}function In(i,e){let t=typeof e=="function"?e:r=>r[e];return[...i.reduce((r,s)=>{let n=s==null?s:t(s);return r.has(n)||r.set(n,s),r},new Map).values()]}function as(i,e){let t=Math.max(...i.map(e));return i.find(r=>e(r)===t)}function Cd(i,e){let t=[],r=i.filter((s,n)=>e(s)&&t.push(n));return t.reverse().forEach(s=>i.splice(s,1)),r}function ju(i){return[...new Set(i)]}function zu(i){return Object.prototype.toString.call(i).slice(8,-1).toLowerCase()}function XS(i,e){if(i.length!==e.length)return!1;for(let t=0;t<i.length;t++)if(!An(i[t],e[t]))return!1;return!0}function eI(i,e){if(Object.keys(i).length!==Object.keys(e).length)return!1;for(let t in i)if(Object.prototype.hasOwnProperty.call(i,t)&&!An(i[t],e[t]))return!1;return!0}function tI(i,e){return i.toString()===e.toString()}function iI(i,e){return i===e}function An(i,e){let t=zu(i);return t!==zu(e)?!1:t==="array"?XS(i,e):t==="object"?eI(i,e):t==="function"?tI(i,e):iI(i,e)}function _n(i){return i instanceof Object}function rI(i){return typeof i=="symbol"}function Xt(i){let e=/^\s+|\s+$/g,t=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,s=/^0o[0-7]+$/i;if(typeof i=="number")return i;if(rI(i))return NaN;if(_n(i)){let o=typeof i.valueOf=="function"?i.valueOf():i;i=_n(o)?o+"":o}if(typeof i!="string")return i===0?i:+i;i=i.replace(e,"");let n=r.test(i);return n||s.test(i)?parseInt(i.slice(2),n?2:8):t.test(i)?NaN:+i}function Pd(i){return[...new Set(i.map(e=>JSON.stringify(e)))].map(e=>JSON.parse(e))}function Dt(i=window.freestar.locData){var t,r;let e=((r=(t=window==null?void 0:window.freestar)==null?void 0:t.fsdata)==null?void 0:r.mspaStates)||sr;return i?i.iso==="US"&&e.includes(i.state):!1}function Oi(i=window.freestar.locData){var t,r;let e=(r=(t=window==null?void 0:window.freestar)==null?void 0:t.fsdata)==null?void 0:r.stateOptIn;return!i||!Array.isArray(e)||e.length===0?!1:i.iso==="US"&&e.includes(i.state)}function Ku(i=window.freestar.locData){var e,t;return i?i.iso==="US"&&((t=(e=window==null?void 0:window.freestar)==null?void 0:e.fsdata)==null?void 0:t.disableAdsOnGppOptOut)===!0:!1}function xd(i,e){let t=e&&e[i]||"";try{return JSON.parse(t)}catch(r){return t||""}}function ei(i){return i==null}function bn(i,e){let t=null;return function(...r){let s=this;clearTimeout(t),t=setTimeout(()=>i.apply(s,r),e)}}function Ju(i,e){let t=!1;return function(){t||(t=!0,setTimeout(()=>{t=!1},e),i())}}function Nd(){let i={},e=!1,t=0,r=arguments.length;Object.prototype.toString.call(arguments[0])==="[object Boolean]"&&(e=arguments[0],t++);let s=function(n){for(let o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e&&Object.prototype.toString.call(n[o])==="[object Object]"?i[o]=Nd(!0,i[o],n[o]):i[o]=n[o])};for(;t<r;t++)s(arguments[t]);return i}var $u,Dd,Wu,Qu,le=f(()=>{he();Vu();$e();$u=Gu;Dd=({placement:i,sizesAllowed:e=!1})=>{let{sizes:t}=i;return t=t.filter(r=>Array.isArray(r)),Array.isArray(e)&&(t=t.filter(r=>e.indexOf(r.join("x"))!==-1)),Dd(t)},Wu=()=>{let i=z("quartile");return i!=null&&i!==""&&!Number.isNaN(Number(i))?Number(i):null},Qu=()=>z("disableFC")==="true"});var ds,Md=f(()=>{ds={videoAdhesion:{prettyName:"Sticky Footer Video Adhesion",disabled:!1},stickyFooter:{prettyName:"Sticky Footer",disabled:!1,refreshDisabled:!1,refreshInterval:0},video:{prettyName:"Video",disabled:!1,refreshDisabled:!1,refreshInterval:0},standAloneVideo:{prettyName:"Stand Alone Video",disabled:!1,refreshDisabled:!1,refreshInterval:0},pushdown:{prettyName:"Pushdown",disabled:!1,refreshDisabled:!1,refreshInterval:0},dynamicAds:{prettyName:"Dynamic Ads",disabled:!1,refreshDisabled:!1,refreshInterval:0,optionsPath:"dynamicAdOptions"},dynamicAdsV2:{prettyName:"Dynamic Ads V2",disabled:!1,refreshDisabled:!1,refreshInterval:0,optionsPath:"dynamicAdOptionsV2"},footerBidding:{prettyName:"Footer Bidding",disabled:!1,refreshDisabled:!1,refreshInterval:0},superflex:{prettyName:"Superflex",disabled:!1,refreshDisabled:!1,refreshInterval:0},slidingUnit:{prettyName:"Sliding Unit",disabled:!1,refreshDisabled:!1,refreshInterval:0},sideWall:{prettyName:"Sidewall",disabled:!1,refreshDisabled:!1,refreshInterval:0},pageGrabber:{prettyName:"Page Grabber",disabled:!1,refreshDisabled:!1,refreshInterval:0},interstitial:{prettyName:"Interstitial",disabled:!1,refreshDisabled:!1,refreshInterval:0},googleInterstitial:{prettyName:"Google Interstitial",disabled:!1,refreshDisabled:!1,refreshInterval:0},dianomiContentRec:{prettyName:"Dianomi Content Recommendation",disabled:!1,refreshDisabled:!1,refreshInterval:0},lazyLoad:{prettyName:"Lazy Loaded Ads",disabled:!1,refreshDisabled:!1,refreshInterval:0},iai:{prettyName:"Intelligent Ad Insert",disabled:!1,refreshDisabled:!1,refreshInterval:0},stickyRail:{prettyName:"Sticky Rail",disabled:!1,refreshDisabled:!1,refreshInterval:0}}});var sI,Pe,Nt=f(()=>{Md();sI=function({name:i,win:e=window}){var t;return(t=e.freestar.config.products[i])!=null&&t.disabled?(e.freestar.log(1,`${ds[i].prettyName} Disabled via freestar.config.products.${i}.disabled`),!0):!1},Pe=sI});var Mt,Zu,wn,nI,kd,Tn=f(()=>{le();te();De();U();F();Mt=[],Zu=function(i){let{lineItemId:e}=i,t=Mt.findIndex(r=>r.lineItemId===e);e&&t&&t<0?Mt.push({lineItemId:e,demandSourceType:null,slots:[i.slot.getSlotElementId()]}):t!="undefined"&&typeof Mt[t]!="undefined"&&(Mt[t].slots.find(s=>s===i.slot.getSlotElementId())||Mt[t].slots.push(i.slot.getSlotElementId()))},wn=function(){return T(this,null,function*(){let i=Mt.filter(t=>t.demandSourceType===null),e=t=>{for(let r in t.demandSources){let s=Mt.findIndex(n=>n.lineItemId===Number(r));Mt[s].demandSourceType=t.demandSources[r]}};if(i.length>0){let r=yield(yield fetch(`${freestar.msg.dispensaryURL}/demand-source`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({lineItems:i.map(s=>s.lineItemId)}),credentials:"include"})).json();r.demandSources&&e(r),nI(),freestar.superflex&&freestar.superflex.checkLineItems&&freestar.superflex.checkLineItems({needed:i})}})},nI=function(){G.instance.resolve(l.AD_REFRESHER).then(i=>{Mt.forEach(e=>{(e.demandSourceType==="DIRECT"||e.demandSourceType==="TRAFFICKED")&&e.slots.forEach(t=>{i.setDirectAdRefresh(t)})})})},kd=({bidder:i,adUnitCode:e,testData:t},r)=>{t&&(freestar=t.freestar);let s=a(e),n=yn(s)?s:void 0;function o(){let d=re({name:ge({slotId:e})});return!d&&freestar.dynamicSlotLibrary[e]&&fsdata.placements[freestar.dynamicSlotLibrary[e]]&&(d=freestar.fsdata.placements[freestar.dynamicSlotLibrary[e]]),d}function a(){let d=o(e);return d&&d.outOfPage==!0?-1:d&&d.adRefreshRate&&d.adRefreshRate>0?d.adRefreshRate:freestar.fsdata.adRefreshRate&&freestar.fsdata.adRefreshRate>0?freestar.fsdata.adRefreshRate:0}return s&&n&&r&&n>0&&r.time>n&&(freestar.refreshLibrary[e]||(freestar.refreshLibrary[e]={}),freestar.refreshLibrary[e].refreshTime=r.time,n=r.time,freestar.log(10,`Set Refresh Rate: ${i} won. Changing refresh rate to ${r.time} due to ${r.rule}`)),n}});function je(i){let{name:e,detail:t}=i,r=new CustomEvent(e,{detail:t});window.dispatchEvent(r)}var Ci=f(()=>{});function lI(){return new dI}function cI(){return new WeakMap}function Fd(i){if(!i)return Ld(null);var e=i.constructor;if(e===Object)return i===Object.prototype?{}:Ld(i);if(e&&~oI.call(e).indexOf("[native code]"))try{return new e}catch(t){}return Ld(i)}function uI(i){var e="";return i.global&&(e+="g"),i.ignoreCase&&(e+="i"),i.multiline&&(e+="m"),i.unicode&&(e+="u"),i.sticky&&(e+="y"),e}function pI(i){return i.flags}function Xu(i){var e=aI.call(i);return e.substring(8,e.length-1)}function mI(i){return i[Symbol.toStringTag]||Xu(i)}function SI(i){return ep(i).concat(Ud(i))}function Rn(i,e,t){for(var r=II(i),s=0,n=r.length,o=void 0,a=void 0;s<n;++s)if(o=r[s],!(o==="callee"||o==="caller")){if(a=EI(i,o),!a){e[o]=t.copier(i[o],t);continue}!a.get&&!a.set&&(a.value=t.copier(a.value,t));try{_I(e,o,a)}catch(d){e[o]=a.value}}return e}function AI(i,e){var t=new e.Constructor;e.cache.set(i,t);for(var r=0,s=i.length;r<s;++r)t[r]=e.copier(i[r],e);return t}function bI(i,e){var t=new e.Constructor;return e.cache.set(i,t),Rn(i,t,e)}function sp(i,e){return i.slice(0)}function wI(i,e){return i.slice(0,i.size,i.type)}function TI(i,e){return new e.Constructor(sp(i.buffer))}function vI(i,e){return new e.Constructor(i.getTime())}function np(i,e){var t=new e.Constructor;return e.cache.set(i,t),i.forEach(function(r,s){t.set(s,e.copier(r,e))}),t}function RI(i,e){return Rn(i,np(i,e),e)}function OI(i,e){var t=Fd(e.prototype);e.cache.set(i,t);for(var r in i)ip.call(i,r)&&(t[r]=e.copier(i[r],e));return t}function CI(i,e){var t=Fd(e.prototype);e.cache.set(i,t);for(var r in i)ip.call(i,r)&&(t[r]=e.copier(i[r],e));for(var s=Ud(i),n=0,o=s.length,a=void 0;n<o;++n)a=s[n],yI.call(i,a)&&(t[a]=e.copier(i[a],e));return t}function xI(i,e){var t=Fd(e.prototype);return e.cache.set(i,t),Rn(i,t,e)}function Bd(i,e){return new e.Constructor(i.valueOf())}function DI(i,e){var t=new e.Constructor(i.source,hI(i));return t.lastIndex=i.lastIndex,t}function vn(i,e){return i}function op(i,e){var t=new e.Constructor;return e.cache.set(i,t),i.forEach(function(r){t.add(e.copier(r,e))}),t}function NI(i,e){return Rn(i,op(i,e),e)}function BI(i){return{Arguments:i.object,Array:i.array,ArrayBuffer:i.arrayBuffer,Blob:i.blob,Boolean:Bd,DataView:i.dataView,Date:i.date,Error:i.error,Float32Array:i.arrayBuffer,Float64Array:i.arrayBuffer,Int8Array:i.arrayBuffer,Int16Array:i.arrayBuffer,Int32Array:i.arrayBuffer,Map:i.map,Number:Bd,Object:i.object,Promise:vn,RegExp:i.regExp,Set:i.set,String:Bd,WeakMap:vn,WeakSet:vn,Uint8Array:i.arrayBuffer,Uint8ClampedArray:i.arrayBuffer,Uint16Array:i.arrayBuffer,Uint32Array:i.arrayBuffer,Uint64Array:i.arrayBuffer}}function dp(i){var e=Gd({},ap,i),t=BI(e),r=t.Array,s=t.Object;function n(o,a){if(a.prototype=a.Constructor=void 0,!o||typeof o!="object")return o;if(a.cache.has(o))return a.cache.get(o);if(a.prototype=kI(o),a.Constructor=a.prototype&&a.prototype.constructor,!a.Constructor||a.Constructor===Object)return s(o,a);if(MI(o))return r(o,a);var d=t[gI(o)];return d?d(o,a):typeof o.then=="function"?o:s(o,a)}return function(a){return n(a,{Constructor:void 0,cache:fI(),copier:n,prototype:void 0})}}function FI(i){return dp(Gd({},LI,i))}var oI,Ld,aI,dI,fI,hI,gI,_I,EI,ep,Ud,tp,ip,yI,rp,II,PI,MI,Gd,kI,ap,LI,qw,kt,ls=f(()=>{oI=Function.prototype.toString,Ld=Object.create,aI=Object.prototype.toString,dI=function(){function i(){this._keys=[],this._values=[]}return i.prototype.has=function(e){return!!~this._keys.indexOf(e)},i.prototype.get=function(e){return this._values[this._keys.indexOf(e)]},i.prototype.set=function(e,t){this._keys.push(e),this._values.push(t)},i}();fI=typeof WeakMap!="undefined"?cI:lI;hI=/test/g.flags==="g"?pI:uI;gI=typeof Symbol!="undefined"?mI:Xu,_I=Object.defineProperty,EI=Object.getOwnPropertyDescriptor,ep=Object.getOwnPropertyNames,Ud=Object.getOwnPropertySymbols,tp=Object.prototype,ip=tp.hasOwnProperty,yI=tp.propertyIsEnumerable,rp=typeof Ud=="function";II=rp?SI:ep;PI=rp?CI:OI;MI=Array.isArray,Gd=Object.assign,kI=Object.getPrototypeOf||function(i){return i.__proto__},ap={array:AI,arrayBuffer:sp,blob:wI,dataView:TI,date:vI,error:vn,map:np,object:PI,regExp:DI,set:op},LI=Gd({},ap,{array:bI,map:RI,object:xI,set:NI});qw=FI({}),kt=dp({})});var lp,cs,Ke,cp,UI,On,fs=f(()=>{lp=["click","scroll"],cs={},Ke=(i=window.freestar.config,e=window.freestar.fsdata)=>typeof i.pageSpeedOptimized!="undefined"?i.pageSpeedOptimized:e.pageSpeedOptimized,cp=()=>{lp.forEach(i=>document.removeEventListener(i,cp))},UI=({name:i,callback:e})=>{cs[i].waiting&&!cs[i].called&&(cs[i].called=!0,cp(),e())},On=({name:i,callback:e})=>{Object.prototype.hasOwnProperty.call(cs,i)||(cs[i]={waiting:!0},lp.forEach(t=>document.addEventListener(t,UI.bind(null,{name:i,callback:e}),{once:!0})))}});function Q({key:i,type:e=K.string.type}){let t=sessionStorage.getItem(i);if(e===K.object.type){if(t){let r=JSON.parse(t);if(_n(r))return r}return K.object.default}if(e===K.array.type){if(t){let r=JSON.parse(t);if(Array.isArray(r))return r}return K.array.default}if(e===K.number.type){let r=Number(t);return Number.isInteger(r)?r:K.number.default}return t}function ve({key:i,type:e=K.string,value:t}){t&&((e===K.object||e===K.array)&&(t=JSON.stringify(t)),sessionStorage.setItem(i,t))}function nr({key:i}){sessionStorage.removeItem(i)}var K,Re=f(()=>{le();K={string:{type:"string",default:""},array:{type:"array",default:[]},object:{type:"object",default:{}},number:{type:"number",default:void 0}}});var Cn,st,Pn,ti=f(()=>{Cn="desktop",st="mobile",Pn="tablet"});var Vd,xn,Hd=f(()=>{Re();Vd="fs.exclude.bidders",xn={key:Vd,type:K.array.type}});function Dn(){var i,e;if(freestar.fsdata.adQualityOptions.vendor)return freestar.deviceInfo.device.type===Cn&&((i=freestar.fsdata.adQualityOptions)!=null&&i.desktopEnabled)||(e=freestar.fsdata.adQualityOptions)!=null&&e.mobileEnabled?freestar.fsdata.adQualityOptions.vendor:null;switch(freestar.deviceInfo.device.type){case Cn:return freestar.fsdata.adQualityDesktopVendor;case st:return freestar.fsdata.adQualityMobileVendor;default:return null}}function Nn(){return Q(xn)}function Mn({network:i,adQualityBlockList:e}){return En({value:e})?!e.includes(i.slug):!0}var us=f(()=>{Re();le();ti();Hd()});function HI(i){return{gvlid:VI[i],useBaseGvlid:!0}}function kn(i){let e=se(i);if(!zd[e]){let t=`${e}${GI}`;zd[e]=t,fp[t]=e,fsprebid.que.push(()=>void fsprebid.aliasBidder(e,t,HI(e)))}return zd[e]}function se(i){return fp[i]||i}var GI,zd,fp,VI,We=f(()=>{GI="FsClientAux",zd={},fp={},VI={appnexus:32,openx:69,pulsepoint:81,sonobi:104,gumgum:61,rubicon:52,pubmatic:76,sharethrough:80,criteo:91,justpremium:62,smaato:82,telaria:202,adtelligent:410,ix:10,triplelift:28,quantcast:11,medianet:142,unruly:36,undertone:677,nativo:263,teads:132,kargo:972,connectad:138,oftmedia:32,blockthrough:815,yieldmo:173,connatix:143,smartadserver:45,yahoossp:25,grid:686,tappx:628,spotx:165,dianomi:885,onetag:241,amx:737,liveintent:148,ttd:21,vidazoo:744,ogury:31,rise:1043,adform:50,aniview:780,insticator:910,seedtag:157,OperaAds:1135,minutemedia:918,cadent:183,yahooAds:25}});function Ln(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)i[r]=t[r]}return i}function qd(i,e){function t(s,n,o){if(typeof document!="undefined"){o=Ln({},e,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),s=encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var d in o)o[d]&&(a+="; "+d,o[d]!==!0&&(a+="="+o[d].split(";")[0]));return document.cookie=s+"="+i.write(n,s)+a}}function r(s){if(!(typeof document=="undefined"||arguments.length&&!s)){for(var n=document.cookie?document.cookie.split("; "):[],o={},a=0;a<n.length;a++){var d=n[a].split("="),c=d.slice(1).join("=");try{var u=decodeURIComponent(d[0]);if(o[u]=i.read(c,u),s===u)break}catch(p){}}return s?o[s]:o}}return Object.create({set:t,get:r,remove:function(s,n){t(s,"",Ln({},n,{expires:-1}))},withAttributes:function(s){return qd(this.converter,Ln({},this.attributes,s))},withConverter:function(s){return qd(Ln({},this.converter,s),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(i)}})}var zI,Yd,up=f(()=>{zI={read:function(i){return i[0]==='"'&&(i=i.slice(1,-1)),i.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(i){return encodeURIComponent(i).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};Yd=qd(zI,{path:"/"})});var ps,hs,ms,$d,gs,Pi,xi=f(()=>{ps="utm_source",hs="utm_medium",ms="utm_campaign",$d="utm_term",gs="utm_content",Pi=[ps,hs,ms,$d,gs]});function Di({name:i,value:e,expires:t=void 0,path:r=void 0,domain:s=void 0}){if(!i||!e)return!1;let n={secure:!0};return t&&(n.expires=t),r&&(n.path=r),s&&(n.domain=s),Yd.set(i,e,n),Lt({name:i})}function Lt({name:i}){return Yd.get(i)}function pp(){let i=Lt({name:"_fs-test"});return i&&(i=JSON.parse(i),i.items.some((e,t)=>{e==i.selection&&(i.selected=t,i.testGroup=e.indexOf("ab_test")>-1?1:0)})),i}var Qe=f(()=>{up();$e();xi()});var ii,Bn=f(()=>{ii={fsLoadPubfigVersion:"fsLoadPubfigVersion",fsaltconfig:"fsaltconfig",fsdebug:"fsdebug"}});var Fn,qI,hp,mp,YI,Un,Gn=f(()=>{Qe();Bn();Fn=z(ii.fsdebug),qI=[];Fn&&Fn!=="true"&&!Number.isInteger(+Fn)&&(qI=Fn.split(",").map(i=>i.toUpperCase()));hp=()=>{if(typeof freestar.debug=="number")return freestar.debug;let i=z("fslog");if(i==="true")return 99;if(i!==""&&Number.isFinite(+i))return+i},mp=()=>{let i=fsprebid.getBidResponses(),e=fsprebid.getAllWinningBids(),t=[];if(Object.keys(i).forEach(function(r){i[r].bids.forEach(function(n){t.push({bid:n,adunit:r,adId:n.adId,bidder:n.bidder,time:n.timeToRespond,dims:`${n.width}x${n.height}`,cpm:n.cpm,msg:n.status,rendered:!!e.find(function(o){return o.adId==n.adId})})})}),t.length&&!console.table)for(let r=0;r<t.length;r++);},YI={title:"Pubfig"},Un=class{constructor(){this.logs=[]}add(e){this.logs.push(e)}show(e=YI){if(!freestar.log||this.logs.length===0)return;let t=this.logs;this.logs=[],freestar.log(e,` ${t.join(` `)}`)}}});function Vn({key:i}){let e=Q({key:i,type:K.object.type});if(e){let{value:t,expiry:r}=e;if(!r||r<Date.now())nr({key:i});else return t}return null}function jd({key:i,value:e,expiry:t}){ve({key:i,type:K.object,value:{value:e,expiry:t}})}function gp({key:i,value:e}){jd({key:i,value:e,expiry:Date.now()+1e3*60*60})}function _p({key:i,value:e}){jd({key:i,value:e,expiry:Date.now()+1e3*60*15})}function Ep({key:i,value:e}){jd({key:i,value:e,expiry:Date.now()+1e3*60*5})}var Kd=f(()=>{Re()});var ri,Hn=f(()=>{ri=class{constructor(){this.slug="fsxs2s"}addToPlacementAsBidder(){return{bidder:this.slug,params:{}}}getSlug(){return this.slug}hasTopLevelStoredRequest(){let{topLevelStoredRequestId:e}=window.freestar.fsdata;return e&&e.length}hasImpLevelStoredRequests(){let{placements:e}=window.freestar.fsdata;return e.filter(t=>t.storedRequestId&&t.storedRequestId.length).length}hasValidStoredRequests(){return this.hasImpLevelStoredRequests()||this.hasTopLevelStoredRequest()}}});var Wd,si,_s=f(()=>{Wd=class{static createInstance({ClassConstructor:e,instanceName:t,params:r=[]}){if(window.freestar=window.freestar||{},window.freestar.instances=window.freestar.instances||{},window.freestar.instances[t])return window.freestar.instances[t];let s=new e(...r);return window.freestar.instances[t]=s,s}static getInstanceFn({ClassConstructor:e,instanceName:t,params:r=[]}){return()=>this.createInstance({ClassConstructor:e,instanceName:t,params:r})}},si=Wd});var Qd,Je,zn=f(()=>{_s();Qd=class{constructor(){this.results={},this.ongoingRequests=new Map}clearClassCachedData({requestId:e}){Object.prototype.hasOwnProperty.call(this.results,e)&&delete this.results[e]}fetch(n){return T(this,arguments,function*({fetchFn:e,requestId:t,onError:r,onSuccess:s}){if(this.results[t])return this.results[t];if(!this.ongoingRequests.has(t)){let o=e().then(a=>{let d={data:a,error:null};return this.results[t]=d,s&&s(a),d},a=>{let d={data:null,error:a};return this.results[t]=d,r&&r(a),d});this.ongoingRequests.set(t,o)}return this.ongoingRequests.get(t).finally(()=>{this.ongoingRequests.delete(t)})})}get({requestId:e}){return this.results[e]}},Je=si.getInstanceFn({ClassConstructor:Qd,instanceName:"requestHandler"})});var qn,yp,Jd=f(()=>{qn="4e799501-b8b6-4ef1-bad5-225b3dd1aa8d",yp="https://api.floors.dev/sgw/v1/floors"});var Sp,Ni,Yn,Mi,ce,nt,Ip,$n=f(()=>{Sp="https://optimise.net/",Ni="fs.idealadstack.config",Yn="session storage",Mi="network request",ce=Object.freeze({OFF:"off",CLIENT:"client",SERVER:"server",BOTH:"both"}),nt="default",Ip="refinement"});function or(){return window.freestar.fsdata.domain||location.host}var jn=f(()=>{});function Kn(i){return i.interstitialOptions&&i.interstitialOptions.active&&i.interstitialOptions.type==="GOOGLE_INTERSTITIAL"}function Zd({event:i}){return window.freestar.googleInterstitialPlacement&&i.slot.getSlotElementId().includes(window.freestar.googleInterstitialPlacement.placement.dfpId)}var Wn=f(()=>{});function ki({siteId:i,placement:e}){var t;return(t=e==null?void 0:e.cubeOptions)!=null&&t.active?!0:At({siteId:i})||jI.has(i)&&Kn(e)}function At({siteId:i}){return $I.has(i)}var $I,jI,Li=f(()=>{Wn();$I=new Set([6010,5958,5891,6125,1498,2109,1825,6214]),jI=new Set([533])});var ar,Ap,bp,Xd=f(()=>{ar="fs.altConfig",Ap="fs-test-mode",bp="fs-test-mode-label"});var el,wp,dr,Bi,Tp,vp,ni=f(()=>{el="https://c.pub.network",wp="6.177.4",dr="fs.abtest.group",Bi="fs.abtest.id",Tp="fs.abtest.type",vp="fs.abtest.variant_type"});function KI(){return T(this,null,function*(){let i=new URLSearchParams,t=(yield G.instance.resolve(l.USER_INFO_MANAGER)).isKnown;return i.set("k",t),i.set("d",or()),i.set("t",WI()),freestar.locData&&i.set("c",freestar.locData.iso),z("fsiasdebug")&&i.set("g","experiment"),i.set("r",20),i.toString()})}var tl,lr,WI,il=f(()=>{Kd();tr();Qe();Jd();$n();jn();Li();Re();he();Xd();ni();F();tl=()=>T(void 0,null,function*(){var I,S,g;let e=((S=(I=window.freestar)==null?void 0:I.fsdata)==null?void 0:S.isTriple13Enabled)?"0":"1",t=Q({key:dr,type:K.number.type})||0,r=Q({key:Bi}),s=Q({key:Tp}),n=Q({key:ar}),o=n!==null&&!Number.isNaN(Number(n)),a=((g=Q({key:Bu,type:K.object.type}))==null?void 0:g.altconfig)||!1,d={};At({siteId:freestar.fsdata.siteId})||(d["x-api-key"]=qn,d["x-lm"]=e),t===1&&s==="PUBFIG_SETTINGS"?d["x-ab-test-id"]=r:o&&a&&(d["x-test-config-id"]=n),d["timeouts-active"]="true";let c=yield fetch(`${Sp}?${yield KI()}`,{method:"GET",credentials:"include",headers:d}),u=c.headers;c=yield c.text(),c=JSON.parse(c);let{testGroup:p,knownUser:m}=c;return{data:b({testGroup:p,knownUser:m,roundTripTime:u.get("fs-client-rtt")},c.config),source:Mi}}),lr=()=>T(void 0,null,function*(){let i,e=Vn({key:Ni});return e?i={data:e,source:Yn}:i=yield tl(),i}),WI=()=>{if(window.freestar)return window.freestar.deviceInfo.device.vendor==="Apple"?"smartphone-ios":window.freestar.deviceInfo.device.type}});var Qn,Fi,Ui,Rp,cr,Op,Cp,Bt=f(()=>{Qn="auctionInit",Fi="auctionEnd",Ui="bidResponse",Rp="bidRequested",cr="bidWon",Op="bidTimeout",Cp="bidRejected"});var Pp=Ti(()=>{});var Zn=Ti((Jn,xp)=>{(function(i,e){typeof Jn=="object"?xp.exports=Jn=e():typeof define=="function"&&define.amd?define([],e):i.CryptoJS=e()})(Jn,function(){var i=i||function(e,t){var r;if(typeof window!="undefined"&&window.crypto&&(r=window.crypto),typeof self!="undefined"&&self.crypto&&(r=self.crypto),typeof globalThis!="undefined"&&globalThis.crypto&&(r=globalThis.crypto),!r&&typeof window!="undefined"&&window.msCrypto&&(r=window.msCrypto),!r&&typeof global!="undefined"&&global.crypto&&(r=global.crypto),!r&&typeof Su=="function")try{r=Pp()}catch(g){}var s=function(){if(r){if(typeof r.getRandomValues=="function")try{return r.getRandomValues(new Uint32Array(1))[0]}catch(g){}if(typeof r.randomBytes=="function")try{return r.randomBytes(4).readInt32LE()}catch(g){}}throw new Error("Native crypto module could not be used to get secure random number.")},n=Object.create||function(){function g(){}return function(E){var L;return g.prototype=E,L=new g,g.prototype=null,L}}(),o={},a=o.lib={},d=a.Base=function(){return{extend:function(g){var E=n(this);return g&&E.mixIn(g),(!E.hasOwnProperty("init")||this.init===E.init)&&(E.init=function(){E.$super.init.apply(this,arguments)}),E.init.prototype=E,E.$super=this,E},create:function(){var g=this.extend();return g.init.apply(g,arguments),g},init:function(){},mixIn:function(g){for(var E in g)g.hasOwnProperty(E)&&(this[E]=g[E]);g.hasOwnProperty("toString")&&(this.toString=g.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),c=a.WordArray=d.extend({init:function(g,E){g=this.words=g||[],E!=t?this.sigBytes=E:this.sigBytes=g.length*4},toString:function(g){return(g||p).stringify(this)},concat:function(g){var E=this.words,L=g.words,k=this.sigBytes,$=g.sigBytes;if(this.clamp(),k%4)for(var H=0;H<$;H++){var we=L[H>>>2]>>>24-H%4*8&255;E[k+H>>>2]|=we<<24-(k+H)%4*8}else for(var Te=0;Te<$;Te+=4)E[k+Te>>>2]=L[Te>>>2];return this.sigBytes+=$,this},clamp:function(){var g=this.words,E=this.sigBytes;g[E>>>2]&=4294967295<<32-E%4*8,g.length=e.ceil(E/4)},clone:function(){var g=d.clone.call(this);return g.words=this.words.slice(0),g},random:function(g){for(var E=[],L=0;L<g;L+=4)E.push(s());return new c.init(E,g)}}),u=o.enc={},p=u.Hex={stringify:function(g){for(var E=g.words,L=g.sigBytes,k=[],$=0;$<L;$++){var H=E[$>>>2]>>>24-$%4*8&255;k.push((H>>>4).toString(16)),k.push((H&15).toString(16))}return k.join("")},parse:function(g){for(var E=g.length,L=[],k=0;k<E;k+=2)L[k>>>3]|=parseInt(g.substr(k,2),16)<<24-k%8*4;return new c.init(L,E/2)}},m=u.Latin1={stringify:function(g){for(var E=g.words,L=g.sigBytes,k=[],$=0;$<L;$++){var H=E[$>>>2]>>>24-$%4*8&255;k.push(String.fromCharCode(H))}return k.join("")},parse:function(g){for(var E=g.length,L=[],k=0;k<E;k++)L[k>>>2]|=(g.charCodeAt(k)&255)<<24-k%4*8;return new c.init(L,E)}},h=u.Utf8={stringify:function(g){try{return decodeURIComponent(escape(m.stringify(g)))}catch(E){throw new Error("Malformed UTF-8 data")}},parse:function(g){return m.parse(unescape(encodeURIComponent(g)))}},_=a.BufferedBlockAlgorithm=d.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(g){typeof g=="string"&&(g=h.parse(g)),this._data.concat(g),this._nDataBytes+=g.sigBytes},_process:function(g){var E,L=this._data,k=L.words,$=L.sigBytes,H=this.blockSize,we=H*4,Te=$/we;g?Te=e.ceil(Te):Te=e.max((Te|0)-this._minBufferSize,0);var ee=Te*H,et=e.min(ee*4,$);if(ee){for(var Ye=0;Ye<ee;Ye+=H)this._doProcessBlock(k,Ye);E=k.splice(0,ee),L.sigBytes-=et}return new c.init(E,et)},clone:function(){var g=d.clone.call(this);return g._data=this._data.clone(),g},_minBufferSize:0}),I=a.Hasher=_.extend({cfg:d.extend(),init:function(g){this.cfg=this.cfg.extend(g),this.reset()},reset:function(){_.reset.call(this),this._doReset()},update:function(g){return this._append(g),this._process(),this},finalize:function(g){g&&this._append(g);var E=this._doFinalize();return E},blockSize:512/32,_createHelper:function(g){return function(E,L){return new g.init(L).finalize(E)}},_createHmacHelper:function(g){return function(E,L){return new S.HMAC.init(g,L).finalize(E)}}}),S=o.algo={};return o}(Math);return i})});var rl=Ti((Xn,Dp)=>{(function(i,e){typeof Xn=="object"?Dp.exports=Xn=e(Zn()):typeof define=="function"&&define.amd?define(["./core"],e):e(i.CryptoJS)})(Xn,function(i){return function(e){var t=i,r=t.lib,s=r.WordArray,n=r.Hasher,o=t.algo,a=[];(function(){for(var h=0;h<64;h++)a[h]=e.abs(e.sin(h+1))*4294967296|0})();var d=o.MD5=n.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(h,_){for(var I=0;I<16;I++){var S=_+I,g=h[S];h[S]=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360}var E=this._hash.words,L=h[_+0],k=h[_+1],$=h[_+2],H=h[_+3],we=h[_+4],Te=h[_+5],ee=h[_+6],et=h[_+7],Ye=h[_+8],Pt=h[_+9],St=h[_+10],It=h[_+11],xt=h[_+12],Ji=h[_+13],wi=h[_+14],Zi=h[_+15],D=E[0],P=E[1],N=E[2],x=E[3];D=c(D,P,N,x,L,7,a[0]),x=c(x,D,P,N,k,12,a[1]),N=c(N,x,D,P,$,17,a[2]),P=c(P,N,x,D,H,22,a[3]),D=c(D,P,N,x,we,7,a[4]),x=c(x,D,P,N,Te,12,a[5]),N=c(N,x,D,P,ee,17,a[6]),P=c(P,N,x,D,et,22,a[7]),D=c(D,P,N,x,Ye,7,a[8]),x=c(x,D,P,N,Pt,12,a[9]),N=c(N,x,D,P,St,17,a[10]),P=c(P,N,x,D,It,22,a[11]),D=c(D,P,N,x,xt,7,a[12]),x=c(x,D,P,N,Ji,12,a[13]),N=c(N,x,D,P,wi,17,a[14]),P=c(P,N,x,D,Zi,22,a[15]),D=u(D,P,N,x,k,5,a[16]),x=u(x,D,P,N,ee,9,a[17]),N=u(N,x,D,P,It,14,a[18]),P=u(P,N,x,D,L,20,a[19]),D=u(D,P,N,x,Te,5,a[20]),x=u(x,D,P,N,St,9,a[21]),N=u(N,x,D,P,Zi,14,a[22]),P=u(P,N,x,D,we,20,a[23]),D=u(D,P,N,x,Pt,5,a[24]),x=u(x,D,P,N,wi,9,a[25]),N=u(N,x,D,P,H,14,a[26]),P=u(P,N,x,D,Ye,20,a[27]),D=u(D,P,N,x,Ji,5,a[28]),x=u(x,D,P,N,$,9,a[29]),N=u(N,x,D,P,et,14,a[30]),P=u(P,N,x,D,xt,20,a[31]),D=p(D,P,N,x,Te,4,a[32]),x=p(x,D,P,N,Ye,11,a[33]),N=p(N,x,D,P,It,16,a[34]),P=p(P,N,x,D,wi,23,a[35]),D=p(D,P,N,x,k,4,a[36]),x=p(x,D,P,N,we,11,a[37]),N=p(N,x,D,P,et,16,a[38]),P=p(P,N,x,D,St,23,a[39]),D=p(D,P,N,x,Ji,4,a[40]),x=p(x,D,P,N,L,11,a[41]),N=p(N,x,D,P,H,16,a[42]),P=p(P,N,x,D,ee,23,a[43]),D=p(D,P,N,x,Pt,4,a[44]),x=p(x,D,P,N,xt,11,a[45]),N=p(N,x,D,P,Zi,16,a[46]),P=p(P,N,x,D,$,23,a[47]),D=m(D,P,N,x,L,6,a[48]),x=m(x,D,P,N,et,10,a[49]),N=m(N,x,D,P,wi,15,a[50]),P=m(P,N,x,D,Te,21,a[51]),D=m(D,P,N,x,xt,6,a[52]),x=m(x,D,P,N,H,10,a[53]),N=m(N,x,D,P,St,15,a[54]),P=m(P,N,x,D,k,21,a[55]),D=m(D,P,N,x,Ye,6,a[56]),x=m(x,D,P,N,Zi,10,a[57]),N=m(N,x,D,P,ee,15,a[58]),P=m(P,N,x,D,Ji,21,a[59]),D=m(D,P,N,x,we,6,a[60]),x=m(x,D,P,N,It,10,a[61]),N=m(N,x,D,P,$,15,a[62]),P=m(P,N,x,D,Pt,21,a[63]),E[0]=E[0]+D|0,E[1]=E[1]+P|0,E[2]=E[2]+N|0,E[3]=E[3]+x|0},_doFinalize:function(){var h=this._data,_=h.words,I=this._nDataBytes*8,S=h.sigBytes*8;_[S>>>5]|=128<<24-S%32;var g=e.floor(I/4294967296),E=I;_[(S+64>>>9<<4)+15]=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360,_[(S+64>>>9<<4)+14]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,h.sigBytes=(_.length+1)*4,this._process();for(var L=this._hash,k=L.words,$=0;$<4;$++){var H=k[$];k[$]=(H<<8|H>>>24)&16711935|(H<<24|H>>>8)&4278255360}return L},clone:function(){var h=n.clone.call(this);return h._hash=this._hash.clone(),h}});function c(h,_,I,S,g,E,L){var k=h+(_&I|~_&S)+g+L;return(k<<E|k>>>32-E)+_}function u(h,_,I,S,g,E,L){var k=h+(_&S|I&~S)+g+L;return(k<<E|k>>>32-E)+_}function p(h,_,I,S,g,E,L){var k=h+(_^I^S)+g+L;return(k<<E|k>>>32-E)+_}function m(h,_,I,S,g,E,L){var k=h+(I^(_|~S))+g+L;return(k<<E|k>>>32-E)+_}t.MD5=n._createHelper(d),t.HmacMD5=n._createHmacHelper(d)}(Math),i.MD5})});var Np,Mp=f(()=>{Np=Xi(rl());U();F();Ne();A.object({token:l.WINDOW,value:window});A.object({token:l.FREESTAR,dependencies:[l.WINDOW],factory:({dependencies:{window:i}})=>{var e;return(e=i.freestar)!=null?e:{}}});A.object({token:l.FS_DATA,dependencies:[l.FREESTAR],factory:({dependencies:i})=>{var e,t;return(t=(e=i.freestar)==null?void 0:e.fsdata)!=null?t:{}}});A.object({token:l.DEVICE_INFO,dependencies:[l.FREESTAR],factory:({dependencies:i})=>{var e,t;return(t=(e=i.freestar)==null?void 0:e.deviceInfo)!=null?t:{}}});A.object({token:l.GEO_INFO,dependencies:[l.FREESTAR],factory:({dependencies:i})=>{var e,t;return(t=(e=i.freestar)==null?void 0:e.locData)!=null?t:{}}});A.object({token:l.PAGE,defaultAlias:"page",dependencies:[l.FREESTAR,l.DISPENSARY_DATA],factory:({dependencies:i})=>{let{freestar:e,dispensaryData:t}=i;return{_pageId:null,get pageId(){return this._pageId||this.refreshId(),this._pageId},refreshId(){this._pageId=(0,Np.default)(window.location.href+e.hitTime+(t.fpc||"")).toString()},get url(){if(!e.url)return"";let r=new URL(e.url);return`${r.origin}${r.pathname}`},get pageViewCount(){return Number(sessionStorage.getItem("pageviews")||0)},set pageViewCount(r){sessionStorage.setItem("pageviews",r)}}}});A.object({token:l.PERFORMANCE_LOGGER,dependencies:[l.FREESTAR],factory:({dependencies:i})=>{let{freestar:e}=i;return e.performanceLogger}});A.object({token:l.PREBID_MANAGER,dependencies:[{token:l.WINDOW,alias:"win"}],factory:({dependencies:i})=>{var r,s;let e,t=new Promise(n=>{e=n});return i.win.fsprebid=(r=i.win.fsprebid)!=null?r:{},i.win.fsprebid.que=(s=i.win.fsprebid.que)!=null?s:[],i.win.fsprebid.que.push(()=>{e()}),{get instance(){return i.win.fsprebid},get ready(){return t}}}});A.object({token:l.IDEAL_AD_STACK_MANAGER,defaultAlias:"idealAdStackManager",factory:()=>J()});A.object({token:l.USER_INFO_MANAGER,dependencies:[l.FREESTAR,l.WINDOW],factory:({dependencies:i})=>{let{freestar:e}=i,t=e.userInfoManager;return delete e.userInfoManager,t}})});var eo,sl=f(()=>{eo=class{constructor({context:e,events:t=[]}){y(this,"_events",[]);this._context=e,t.forEach(r=>this.addEvent(r))}addEvent(e){this._events.push(e)}getJSON(){let e=this._events.reduce((t,r)=>{var s;return t[r.type]=(s=t[r.type])!=null?s:[],t[r.type].push(r.payload),t},{});return b(b({},this._context),e)}get size(){return this._events.length}}});var nl,ol,al,to,dl=f(()=>{nl="fs.session",ol="fs.itf.group",al="fs.itf.targeting",to="fs.ident"});var ll,kp=f(()=>{Re();U();te();$e();F();dl();xi();ll=class{constructor(){this.session=null,this._init()}_init(){this.session=Q({key:nl,type:K.object.type}),(!this.session||!Object.keys(this.session).length)&&(this.session={id:Ae()});let t=Pi.flatMap(r=>{let s=z(r);return s?{key:r,value:s}:[]}).reduce((r,{key:s,value:n})=>(r[s]=n,r),{});this.session.utm=t,ve({key:nl,type:K.object,value:this.session})}getSessionId(){return this.session.id}getUTMValue(e){var t;return(t=this.session.utm)==null?void 0:t[e]}};A.class(ll,{token:l.SESSION_STORAGE_MANAGER,defaultAlias:"sessionStorageManager"})});var cl,Lp=f(()=>{U();te();F();Re();ni();sl();xi();cl=class{constructor({page:e,sessionStorageManager:t,dispensaryData:r}){this._page=e,this._sessionStorageManager=t,this._dispensaryData=r}create({events:e=[]}){let t=this._collectContextInfo();return new eo({context:t,events:e})}_collectContextInfo(){let{pageId:e,pageViewCount:t,url:r}=this._page||{};return b(b(b({messageId:Ae(),referalURL:document.referrer||void 0,pageId:e,url:r,userAgent:navigator.userAgent,pageviewCount:t||1},this._getDispensaryData()),this._getTestData()),this._getSessionData())}_getSessionData(){let t=Object.fromEntries([["utmSource",ps],["utmMedium",hs],["utmCampaign",ms],["utmTerm",$d],["utmContent",gs]].map(([r,s])=>[r,this._sessionStorageManager.getUTMValue(s)]));return V(b({},t),{sessionId:this._sessionStorageManager.getSessionId()})}_getTestData(){let e=Q({key:dr,type:K.number.type})||0,t=Q({key:Bi})||null,r=Q({key:vp})||null;return{testName:t,testGroup:e,testVariantId:r}}_getDispensaryData(){let t=Object.fromEntries(["accountId","siteId","deploymentId","templateVersionId"].map(s=>[s,this._dispensaryData.getValue(s)])),r=this._dispensaryData.getValue("gitHash");return t.templateVersionId==null&&r&&(t.templateVersionId=r),t}};A.class(cl,{token:l.ANALYTICS_MESSAGE_FACTORY,defaultAlias:"analyticsMessageFactory",dependencies:[l.PAGE,l.SESSION_STORAGE_MANAGER,l.DISPENSARY_DATA]})});var Bp=f(()=>{sl();kp();Lp()});var Be,Fp,Up,Gp,bt=f(()=>{Be={IMMEDIATE:"immediate",MAIN:"main",BEACON:"beacon",ERROR:"error"},Fp=["fsrefresh","fsrebid","fs_uuid","floors_id","floors_hour","fs_placementName","fs_ad_product","fs_ad_optimization","fs_clientservermask","amznbid","amznp","fs-auuid","fsbid","fsitf","fs_session_id","fs_pageview_id","fs_version","user-agent","floors_user","floors_rtt","fs_testgroup","fs_carousel"],Up=["fsrefresh","fs_ad_product","fsitf","fs_ad_optimization"],Gp=["fs_clientservermask","fs_ad_product","fs_testgroup","floors_rtt","fsrefresh","floors_hour","floors_id","fsrebid","fs_ad_optimization"]});var Es,fl=f(()=>{Es=class extends Error{constructor({message:e,details:t,context:r}){super(e),this.details=t,this.context=r}}});var ul,Vp=f(()=>{U();F();ni();fl();ul=class{constructor({logger:e,apiHost:t=el,version:r="v2"}={}){this.apiHost=t,this.version=r,this.url=`${this.apiHost}/${this.version}/c`,this._logger=e,this._logger.setContext(l.DATA_COLLECTOR_API),this._logger.setLevel(80)}send(e){return T(this,null,function*(){var t;if(e){this._logger.log(["Sending data to collector",e]);try{let r=yield fetch(this.url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(r!=null&&r.ok)return;throw r}catch(r){let s={status:(t=r==null?void 0:r.status)==null?void 0:t.toString(),statusText:r==null?void 0:r.statusText},n="Data Collector API Error: ";throw r!=null&&r.status?n+=`Status: ${r==null?void 0:r.status} ${r==null?void 0:r.statusText}`:n+=`Status: ${r.message}`,new Es({message:n,details:s,context:e})}}})}sendBeacon(e){let t=new Blob([JSON.stringify(e)],{type:"application/json"});if(!navigator.sendBeacon(this.url,t)){let s={status:"0",statusText:"Failed to send via sendBeacon"},n="Data Collector API Error: sendBeacon failed to send the data.";throw this._logger.warning([n,s]),new Es({message:n,details:s,context:e})}}};A.class(ul,{token:l.DATA_COLLECTOR_API,dependencies:[l.LOGGER],defaultAlias:"dataCollectorAPI"})});var Hp=f(()=>{fl();Vp()});var W,Ie=f(()=>{bt();W=class{constructor(e,t){y(this,"type","default");this._payload=this._buildPayload(e),this._topic=t}get payload(){return this._payload}get topic(){return this._topic||Be.MAIN}setTopic(e){this._topic=e}setType(e){this.type=e}_buildPayload(e){return e||{}}}});var X,io,Gi=f(()=>{Ie();X=class extends W{constructor(){super(...arguments);y(this,"type","customEvent")}_buildPayload(t){let{eventType:r,data:s,eventName:n}=t;return{eventType:r,eventName:n,jsonValue:JSON.stringify(s)}}},io=class extends W{constructor(){super(...arguments);y(this,"type","contentRecommendationPartnerImpression")}get payload(){let{partnerName:t,placementName:r,contextId:s}=this._payload;return{eventType:"contentRecommendationPartnerImpression",partnerName:t,placementName:r,contextId:s}}}});var ro,fr,pl=f(()=>{tt();Ie();ro=class ro extends W{constructor(){super(...arguments);y(this,"type","auctionStart")}_buildPayload(t){return ye(t,ro.payloadProperties)}};y(ro,"payloadProperties",["placementId","DfpId","fsAuctionId","auctionId","auctionType","location","userIds","kvps"]);fr=ro});var no,so,zp=f(()=>{tt();Ie();pl();no=class no extends W{constructor(){super(...arguments);y(this,"type","auctionEnd")}_buildPayload(t){return ye(t,no.payloadProperties)}};y(no,"payloadProperties",[...fr.payloadProperties,"fsAuctionId","winningBid","advertiserId","campaignId","isEmpty","lineItemId","serviceName","size","sourceAgnosticCreativeId","sourceAgnosticLineItemId","isNativeRender","isGamBypass","isS2SDisabled","unfilled"]);so=no});var ao,oo,qp=f(()=>{U();Ie();ao=class ao extends W{constructor(){super(...arguments);y(this,"type","browserInformation")}_buildPayload(t){return ye(t,ao.payloadProperties)}};y(ao,"payloadProperties",["canonical","fpc","hitTime","loadTime","winHeight","winWidth","maxHeight","isServerToServer","googleVersion"]);oo=ao});var ur,hl=f(()=>{Ie();ur=class{create(){return new W}}});var oi,lo=f(()=>{hl();oi=class extends ur{constructor({win:e,freestar:t,dispensaryData:r,rebidManager:s}){super(),this._win=e,this._freestar=t,this._dispensaryData=r,this._rebidManager=s,this._googletag=this._win.googletag}_getCpm(e){let{cpm:t=0}=e;return{cpm:Math.trunc(t*1e4),bidCpm:t,originalCpm:t}}_getBidSource(e){return freestar.thirdPartyVendorTest&&e==="s2s"?"3rd party":e}_getAuctionTimeout(){let{fsdata:e}=this._dispensaryData;return this._freestar.deviceInfo.device.type=="desktop"?e.timeout:e.mobileTimeout}}});function Yp({prebid:i,placementId:e}){var n;if(!e)return 0;let t=(n=i==null?void 0:i.getBidResponsesForAdUnitCode)==null?void 0:n.call(i,e);if(!(t!=null&&t.length))return 0;let r=t.sort((o,a)=>a.cpm-o.cpm),[s]=r;return Number(s.cpm)}function pr({bid:i,placementId:e,rebidManager:t,fsAuctionId:r,auctionManager:s}){let n={isRebid:!1,rebidType:"NONE",rebidAttempt:0};try{let{adUnitCode:o,slotId:a}=i||{},d=e||o||a;if(t){let c=t.getStatus({adUnitCode:d});if(c)return n.isRebid=c.count>0,n.rebidType=c.type||"NONE",n.rebidAttempt=c.count,n}if(r){let c=s.getAuctionByFsAuctionId(r);if(c){let u=Array.from(c.adUnits).find(p=>{var m,h;return p.placement.name===d||((m=p.prebid)==null?void 0:m.code)===d||((h=p.slot)==null?void 0:h.getSlotElementId())===d});if(u){let p=u.getStateByFsAuctionId({fsAuctionId:r});p&&p.rebid&&(n.isRebid=p.rebid.count>0,n.rebidType=p.rebid.type||"NONE",n.rebidAttempt=p.rebid.count)}}}}catch(o){console.error("Error in getRebid function:",o),console.error("Context:",{bid:i,placementId:e,fsAuctionId:r})}return n}function co({adUnitCode:i,dynamicSlotLibrary:e}){return(e==null?void 0:e[i])||i}function ai({slotId:i,slot:e,googletag:t}){if(!i&&!e)return;let r=t.pubads().getSlots().find(n=>[i,e].includes(n.getSlotElementId()));return r?r.getConfig("targeting").targeting.fs_uuid.toString():void 0}var ys=f(()=>{});var Me,Ft,fo,ml,wt,uo,de,hr=f(()=>{Me="slotRenderEnded",Ft="slotRequested",fo="slotOnload",ml="impressionViewable",wt="15184186",uo="1966186",de={UUID:"fs_uuid",REFRESH:"fsrefresh",BID:"fsbid",PLACEMENT_NAME:"fs_placementName",REBID:"fsrebid",PRODUCT:"fs_ad_product",PRODUCT_OPTIMIZATION:"fs_ad_optimization",FLOORS_ID:"floors_id",FLOORS_HOUR:"floors_hour",ITF:"fsitf",CDEP:"cdep",FS_SESSION_ID:"fs_session_id",FS_PAGEVIEW_ID:"fs_pageview_id",FS_OPTIMIZATION:"fs_optimization",FS_VERSION:"fs_version",TEST:"test",TEST_GROUP:"tg",BLOCK:"block",REFERRER:"referrer",USER_AGENT:"user-agent",BROWSI_PP:"browsiPP",FLOORS_USER:"floors_user",FLOORS_RTT:"floors_rtt",DAS_TEST_GROUP:"fs_testgroup",DAS_CS_MASK:"fs_clientservermask"}});function gl(){return window.googletag.pubads&&window.googletag.pubads().getSlots()}function po({elementId:i}){if(i)return gl().filter(e=>e.getSlotElementId()===i)[0]}function $p(i=[]){z("fs-dev-gam")&&QI(i,uo)}function QI(i,e){i.forEach(t=>{var r;(r=t.dfpId)!=null&&r.includes(wt)&&(t.dfpId=t.dfpId.replace(wt,e))})}var Ss=f(()=>{$e();hr()});var _l,El,ne,Ge=f(()=>{De();te();pt();Ss();_l=class{constructor({placement:e=null,prebid:t=null,slot:r=null}){this.placement=e,this.prebid=t,this.slot=r,this.trackedAdIds=new Set,this.states=[],this.renderMap=new Map}update({prebid:e=null,slot:t=null}){e&&(this.prebid=e),t&&(this.slot=t)}getKVPs(){if(!this.slot)return null;let e=this.slot.getTargetingMap(),t=Object.entries(e).flatMap(([n,o])=>o.map(a=>[n,a])),{targeting:r}=googletag.getConfig("targeting"),s=Object.keys(r).flatMap(n=>r[n].map(a=>[n,a]));return[...t,...s]}getWinningBid(){if(!this.prebid)return null;let e=fsprebid.getAllWinningBids().find(t=>this.prebid&&t.adUnitCode===this.prebid.code&&!this.trackedAdIds.has(t.adId));return e?(this.trackedAdIds.add(e.adId),e.adId):null}setAUUID({fsAuctionId:e}){var t,r;(r=(t=this.slot)==null?void 0:t.setTargeting)==null||r.call(t,"fs-auuid",e)}getStateByFsAuctionId({fsAuctionId:e}){return this.states.find(t=>t.fsAuctionId===e)||!1}saveState({fsAuctionId:e,auctionType:t,prebidAuctionId:r=null,rebid:s}){this.setAUUID({fsAuctionId:e}),this.states.push({fsAuctionId:e,prebidAuctionId:r,auctionType:t,rebid:s})}isDisplayAd(){return!["stickyFooter","sideWall","pushdown","stickyRail"].some(t=>it({placement:this.placement,type:`${t}Options`}))}getSlotId(){var e,t,r;return((e=this.prebid)==null?void 0:e.code)||((t=this.slot)==null?void 0:t.getSlotElementId())||((r=this.placement)==null?void 0:r.name)}},El=class{constructor(){this.adUnits=new Map}add({placement:e=null,prebid:t=null,slot:r=null}){let s=(r==null?void 0:r.getSlotElementId())||(t==null?void 0:t.code);if(s){if(this.adUnits.has(s))this.adUnits.get(s).update({prebid:t,slot:r});else if(e||(e=t?re({name:ho({slotId:t.code})}):r?re({name:mo({path:r.getAdUnitPath()}).placementName}):null),e){r=r!=null?r:po({elementId:s});let n=new _l({placement:e,prebid:t,slot:r});this.adUnits.set(s,n)}}}getAdUnitByPlacementName(e){return[...this.adUnits.values()].find(t=>{var r;return((r=t.placement)==null?void 0:r.name)===e})||!1}getAdUnitByPrebidCode(e){return this.adUnits.get(e)||!1}getAdUnitBySlotElementId(e){return Array.from(this.adUnits.values()).find(t=>t.slot&&t.slot.getSlotElementId()===e)||!1}getAdUnitBySlotAdUnitPath(e){return[...this.adUnits.values()].find(t=>{var r;return((r=t.slot)==null?void 0:r.getAdUnitPath())===e})||!1}},ne=new El;window.freestar&&window.freestar.queue&&window.freestar.queue.push(()=>{window.freestar.adUnitManager=ne})});var go,yl,Sl,jp=f(()=>{tt();U();F();Ie();lo();ys();bt();Ge();go=class go extends W{constructor(){super(...arguments);y(this,"type","bidResponse")}_buildPayload(t){return ye(t,go.payloadProperties)}};y(go,"payloadProperties",["bidderCode","width","height","adId","cpm","bidCpm","creativeId","pubapiId","currencyCode","requestId","responseTimestamp","requestTimestamp","bidder","adUnitCode","timeToRespond","adjustment","ttl","format","placementId","source","auctionTimeout","fsRebidCount","auctionId","fsuuid","bidderResponseCode","fsAuctionId","bidCpm","kvps"]);yl=go,Sl=class extends oi{constructor({win:e,freestar:t,dispensaryData:r,auctionManager:s,rebidManager:n}){super({win:e,freestar:t,dispensaryData:r}),this._auctionManager=s,this._dispensaryData=r,this._rebidManager=n,this._adUnitManager=ne}create(e){var u;let{mediaType:t,currency:r,auctionId:s}=e,n=this._auctionManager.getAuctionByPrebidAuctionId(s),o=n?n.fsAuctionId:null,a=co({adUnitCode:e.adUnitCode,dynamicSlotLibrary:this._freestar.dynamicSlotLibrary}),{rebidAttempt:d}=pr({bid:e,placementId:a,rebidManager:this._rebidManager,auctionManager:this._auctionManager}),c=this._adUnitManager.getAdUnitByPrebidCode(e.adUnitCode)||this._adUnitManager.getAdUnitBySlotElementId(a);return new yl(V(b(b({},e),this._getCpm(e)),{fsRebidCount:d,currencyCode:r,fsuuid:ai({slotId:e.slotId,slot:e.slot,googletag:this._win.googletag}),placementId:a,fsAuctionId:o,auctionTimeout:this._getAuctionTimeout(),format:t.length?t:"unknown",kvps:(u=c==null?void 0:c.getKVPs())==null?void 0:u.filter(([p])=>Gp.includes(p)),source:this._getBidSource(e.source)}))}};A.class(Sl,{token:"BidResponseAnalyticsEventFactory",defaultAlias:"bidResponseAnalyticsEventFactory",dependencies:[l.FREESTAR,{token:l.WINDOW,alias:"win"},l.DISPENSARY_DATA,l.AUCTION_MANAGER,l.REBID_MANAGER]})});function JI(i,e){let t={};return window.freestar.config.targeting&&Array.isArray(window.freestar.config.targeting)&&(t=window.freestar.config.targeting.find(function(r){return Object.keys(r).includes(e)})),t&&(i=b(b({},i),t[e])),i}function di(i,e=null,t=null){try{let r=JI(t,e);r&&i.setConfig({targeting:r})}catch(r){freestar.log(49,"ERROR:","setConfig",...arguments),freestar.log(49,"ERROR:","setConfig",r)}}var Kp=f(()=>{});var ZI,Fe,Il=f(()=>{pt();ZI=(i,e)=>!!(i!=null&&i[e])&&it({placement:i,type:e}),Fe=({type:i,getName:e,isActive:t})=>{if(!i&&typeof t!="function")throw new Error("[createProductStrategy] Either 'type' or 'isActive' function must be provided.");return{type:i,getName:e,isActive:r=>typeof t=="function"?t(r):ZI(r,i)}}});var Wp,Qp,Jp=f(()=>{ot();Il();Jt();Wp=[Fe({type:oe.PUSHDOWN_OPTIONS,getName:()=>_o(oe.PUSHDOWN_OPTIONS)}),Fe({type:oe.SIDE_WALL_OPTIONS,getName:()=>_o(oe.SIDE_WALL_OPTIONS)}),Fe({type:oe.CUBE_OPTIONS,getName:()=>_o(oe.CUBE_OPTIONS)}),Fe({type:oe.STICKY_FOOTER_OPTIONS,getName:i=>{var e;return(e=i==null?void 0:i.stickyFooterOptions)!=null&&e.video?"stickyFooterVideo":"stickyFooter"}}),Fe({type:oe.CAROUSEL_OPTIONS,getName:i=>Zp(i)}),V(b({},Fe({getName:()=>"video",isActive:i=>{var e,t,r;return!!((e=i==null?void 0:i.standAloneVideoOptions)!=null&&e.active||(t=i==null?void 0:i.connatixOptions)!=null&&t.active||(r=i==null?void 0:i.primisOptions)!=null&&r.active)}})),{disabledCheckNames:["standAloneVideo","primis","connatix"]}),Fe({getName:i=>Xp(i)?"IAI-FC":"flyingCarpet",isActive:i=>Al(i)})],Qp=[Fe({type:oe.DYNAMIC_AD_OPTIONS_V2,getName:()=>"EAI"}),Fe({type:oe.SLIDING_UNIT_OPTIONS,getName:()=>"slidingStickyAds"}),Fe({getName:()=>"slidewall",isActive:i=>!!(i!=null&&i.sideWallOptions&&i.sideWallOptions.type!==0&&i.sideWallOptions.slidewallEnabled)}),Fe({getName:()=>"IAI",isActive:i=>{var e,t;return!!((t=(e=i.selectedSize)==null?void 0:e.intelligentAdInsertConfig)!=null&&t.active)}}),Fe({getName:()=>"stickyRail",isActive:i=>{var e;return(e=i==null?void 0:i.stickyRailOptions)==null?void 0:e.active}}),Fe({getName:()=>"superflex",isActive:i=>!!(i!=null&&i.superflex||i!=null&&i.superflexV2)}),Fe({getName:()=>"lazy",isActive:i=>i==null?void 0:i.lazyAd})]});var eh=f(()=>{Jp()});function ke(i,e=window){if(!i)return"";for(let{isActive:t,getName:r,disabledCheckNames:s}of Wp)if(t(i)){let n=r(i);if((Array.isArray(s)?s:[n]).some(d=>!Pe({name:d,win:e})))return n}return"display"}function Tt(i){if(!i)return"";let e=[];for(let{isActive:t,getName:r}of Qp)t(i)&&e.push(r(i));return e.join(", ")||null}var th=f(()=>{Nt();eh()});function Zp(i){var t;let e=(t=i==null?void 0:i.name)==null?void 0:t.match(/carousel_([a-z])/i);return e?e[0].toLowerCase():""}function _o(i){return i.replace(/Options.*$/i,"")}var ih=f(()=>{});var Eo,mr,yo,gr,_r,Er,rh,So,yr,Io,Ao,bl=f(()=>{Eo="STICKY_FOOTER_RESIZE",mr="NATIVE_RENDER_ENDED",yo="BEFORE_NATIVE_RENDER",gr="GAM_SLOT_DESTROYED",_r="GAM_SLOT_CREATED",Er="GAM_ALL_SLOTS_DESTROYED",rh="DEVICE_ORIENTATION_CHANGED",So="LAZY_AD_INTERSECTED",yr="AD_INTERSECTED",Io="AD_REFRESH",Ao="AUCTION_START"});var ue,Vi=f(()=>{ue={SILENT:0,CORE:5,MODULE:50,VERBOSE:99}});var at,Sr,sh=f(()=>{le();U();Vi();F();at=class at{constructor(e){var r,s;let t=ei(e==null?void 0:e.defaultLevel)?ue.VERBOSE:e.defaultLevel;this._defaultLevel=Math.max(t||0,ue.SILENT),this._context=(r=e==null?void 0:e.context)!=null?r:"Pubfig",this.id=(s=e==null?void 0:e.id)!=null?s:at._instancesCount,at._instancesCount+=1,ei(e==null?void 0:e.maxLogsLevel)||at.setMaxLogsLevel(Math.max((e==null?void 0:e.maxLogsLevel)||0,ue.SILENT))}static setMaxLogsLevel(e){at.maxLogsLevel=e}log(e,t){if(this.maxLogsLevel===ue.SILENT)return;let{level:r=this._defaultLevel}=t!=null?t:{};this.maxLogsLevel>=r&&console.info(...this._getLogArguments(e,t))}error(e,t){console.error(...this._getArguments(e,t==null?void 0:t.context))}warning(e,t){console.warn(...this._getArguments(e,t==null?void 0:t.context))}info(e,t){console.info(...this._getArguments(e,t==null?void 0:t.context))}table(e,t,r){if(this.maxLogsLevel===ue.SILENT)return;let{level:s=this._defaultLevel}=r!=null?r:{};this.maxLogsLevel>=s&&(this.log(e,r),console.table(t))}groupCollapsed(e,t){if(this.maxLogsLevel===ue.SILENT)return;let{level:r=this._defaultLevel}=t!=null?t:{};this.maxLogsLevel>=r&&console.groupCollapsed(...this._getLogArguments(e,t==null?void 0:t.context))}groupEnd(){this.maxLogsLevel!==ue.SILENT&&console.groupEnd()}setLevel(e){this._defaultLevel=e}get maxLogsLevel(){return at.maxLogsLevel}setContext(e){this._context=e}createLogger(e,t=this._defaultLevel){return at._instancesCount+=1,new at({defaultLevel:t,context:e,id:at._instancesCount})}_getLogArguments(e,{context:t,styles:r}={}){return[`%c${t!=null?t:this._context}:`,this._getStyles(r),...this._getMessages(e)]}_getStyles(e){return e||`background: hsl(${(150+this.id*30)%360}, 40%, 50%); color: #fff; border-radius: 3px; padding: 3px`}_getMessages(e){return Array.isArray(e)?e:[e]}_getArguments(e,t){let r=Array.isArray(e)?e:[e];return[`${t!=null?t:this._context}: `,...r]}};y(at,"_instancesCount",0),y(at,"maxLogsLevel",ue.SILENT);Sr=at;A.class(Sr,{token:l.LOGGER,defaultAlias:"logger",injectionMode:Qt.FOR_FEATURE,dependencies:[l.CONFIG_MANAGER],factory:({dependencies:{config:i}={}})=>new Sr({maxLogsLevel:i.logLevel})})});var Ir,nh=f(()=>{Ir={INIT:"Init",INIT_COMPLETE:"Init complete",INIT_FAILED:"Init failed"}});var Is=f(()=>{sh();nh()});function B({type:i="div",classList:e=[],id:t=!1,src:r=!1,name:s=!1,attributes:n=[],children:o=[],style:a={},innerHTML:d,textContent:c},u=document){let p=u.createElement(i);return e.length&&(p.className=e.join(" ")),r&&(p.src=r),t&&(p.id=t),s&&p.setAttribute("name",s),Array.isArray(n)?n.forEach(m=>{Object.entries(m).forEach(([h,_])=>{p.setAttribute(h,_)})}):Object.entries(n).forEach(([m,h])=>{p.setAttribute(m,h)}),Object.keys(a).length&&wl(p,a),d&&(p.innerHTML=d),c&&(p.textContent=c),o.length&&o.forEach(m=>{m&&p.appendChild(m)}),p}function Ee(i,e,t=null,r,s=!0,n=!1,o=!0,a){try{let d=B({type:"script"});i&&(d.src=i),o&&d.setAttribute("data-owner","freestar"),r&&(d.textContent=r),t&&(d.id=t),s&&(d.async=s),typeof n!="undefined"&&(d.defer=n),d.type="text/javascript";let c=null;e&&d.addEventListener("load",()=>{e(),c&&c.disconnect()},{once:!0}),a&&d.addEventListener("error",u=>{a(u),c&&c.disconnect()}),document.getElementsByTagName("head")[0].appendChild(d),"MutationObserver"in window&&(c=new MutationObserver(u=>{u.forEach(p=>{p.attributeName==="type"&&document.querySelectorAll('[type="osano/blocked"]').forEach(m=>{m===d&&(console.warn("Script was blocked by Osano:",i||t),a&&a(new Event("osano-blocked")),c.disconnect())})})}),c.observe(d,{attributes:!0,attributeFilter:["type"]}))}catch(d){G.instance.resolve(l.ANALYTICS).then(c=>{c.track(new X({eventName:"LOAD_SCRIPT_FAILED",data:{scriptSrc:i,id:t,error:d.message}}))})}}function oh(){if(window.freestar.config.disabledProducts)for(let i in window.freestar.config.disabledProducts)Object.prototype.hasOwnProperty.call(window.freestar.config.disabledProducts,i)&&(window.freestar.config.products[i]===void 0?console.error(`Freestar product name: ${i} does not exist.`):window.freestar.config.products[i].disabled=window.freestar.config.disabledProducts[i])}var wl,Hi,Ar,_e=f(()=>{Gi();U();F();wl=(i,e)=>(i&&Object.entries(e).forEach(([t,r])=>{i.style[t]=r}),i);Hi=(i,e=null,t=null,r={})=>{let{defer:s=!1}=r;return new Promise((n,o)=>{Ee(i,n,e,t,!0,s,!0,o)})};Ar=(i,e)=>i[0]+i[1]<e[0]+e[1]?1:e[0]+e[1]<i[0]+i[1]?-1:0});function ah({slotArray:i}){window.__iasPET.queue=window.__iasPET.queue||[],window.__iasPET.queue.push({adSlots:i,dataHandler:function(){window.__iasPET.setTargetingForGPT()}})}function XI(){let i=[];gl().forEach(e=>i.push(new bo(e))),i.length&&ah({slotArray:i})}function dh({slot:i=null}){typeof window.__iasPET!="undefined"&&(freestar.log(1,"Publisher SlotOperations IAS: iasPETTargeting found"),i?ah({slotArray:[new bo(i)]}):XI())}function lh(){freestar.log(1,"Publisher SlotOperations Testing IAS: loading script"),Ee("//cdn.adsafeprotected.com/iasPET.1.js"),window.__iasPET=window.__iasPET||{};let i=window.__iasPET;i.queue=i.queue||[],i.pubId="10249"}var bo,ch=f(()=>{_e();Ss();bo=class{constructor(e){this.adSlotId=e.getSlotElementId(),this.size=e.getSizes().map(t=>t==="fluid"?[1,1]:[t.getWidth(),t.getHeight()]),this.adUnitPath=e.getAdUnitPath()}}});function fh({slot:i=null}){window.moatPrebidApi&&(typeof window.moatPrebidApi.slotDataAvailable=="function"&&window.moatPrebidApi.slotDataAvailable()||typeof window.moatPrebidApi.pageDataAvailable=="function"&&window.moatPrebidApi.pageDataAvailable())&&(freestar.log(1,"Publisher SlotOperations Moat: moatSlotTargetingReady"),i?window.top.moatPrebidApi.setMoatTargetingForSlot(i):window.moatPrebidApi.setMoatTargetingForAllSlots())}function Tl(i){i=i||0,i++,window.moatPrebidApi&&typeof window.moatPrebidApi.enableLogging=="function"?(freestar.log(1,"Publisher SlotOperations Testing Moat: Logging Enabled"),window.moatPrebidApi.enableLogging()):i<10&&(freestar.log(1,"Publisher SlotOperations Testing Moat: Not set in global try again."),setTimeout(function(){Tl(i)},200))}var uh=f(()=>{});function ph({slot:i=null}){dh({slot:i}),fh({slot:i})}function hh(){switch(z("publisher-slot-op")){case"ias":freestar.log(1,"Publisher SlotOperations Testing IAS"),lh();break;case"moat":freestar.log(1,"Publisher SlotOperations Testing MOAT"),Tl();break;default:freestar.log(1,"No Publisher SlotOperations Testing Params");break}}var vl=f(()=>{ch();uh();Qe()});var wo,mh=f(()=>{bl();Is();U();De();$e();xi();F();ot();Re();ni();Vi();fs();Ge();br();hr();Li();vl();te();le();Ve();Ne();wo=class{constructor({logger:e,dispensaryData:t,eventBus:r,sessionStorageManager:s,adUnitManager:n,floorsManager:o,idealAdStackManager:a,freestar:d,userInfoManager:c,page:u,win:p=window}){this._window=p,this._logger=e,this._dispensaryData=t,this._eventBus=r,this._page=u,this._adUnitManager=n,this._floorsManager=o,this._idealAdStackManager=a,this._userInfoManager=c,this._freestar=d,this._sessionStorageManager=s,this._instance=null,this.googletagCorrelatorUpdate=!0,this.gamMap={},this._logger.setContext("GamManager"),this._logger.setLevel(ue.CORE)}init(){return new Promise(e=>{this._logger.log(Ir.INIT),this._window.googletag=this._window.googletag||{},this._window.googletag.cmd=this._window.googletag.cmd||[],this._window.googletag.cmd.push(()=>{var a,d,c;this._instance=this._window.googletag,this.instance.setConfig({disableInitialLoad:!0});let{altUrl:t}=(a=this._dispensaryData.envAndConfig)!=null?a:{},{collapseEmptyDivs:r,disableSingleRequest:s}=this._dispensaryData.fsdata;t&&this.instance.pubads().set("page_url",t),r&&(this._logger.log("GAM Option set to collapseDiv: ON_NO_FILL"),googletag.setConfig({collapseDiv:"ON_NO_FILL"})),s||this.instance.setConfig({singleRequest:!0}),this._setInitialTargeting();let{ppid:n=(d=freestar==null?void 0:freestar.msg)==null?void 0:d.fpc,setNonPersonalizedAds:o}=(c=this._freestar.config)!=null?c:{};o&&this.instance.pubads().setRequestNonPersonalizedAds(1),n&&(typeof n=="string"?this.instance.pubads().setPublisherProvidedId(n):this._logger.warning("freestar.config.ppid is not a string and will not be set")),this.instance.enableServices(),this._logger.log(Ir.INIT_COMPLETE),e(this)})})}get instance(){if(!this._instance)throw new Error("GamManager must be initiated first.");return this._instance}setGlobalTargeting(e,t){var r;(r=this.instance)==null||r.setConfig({targeting:{[e]:Array.isArray(t)?t.map(String):String(t)}})}getGlobalTargeting(e){return e?this.instance.getConfig("targeting").targeting[e]:this.instance.getConfig("targeting").targeting}setSlotTargeting({slot:e,key:t,value:r}){if(!(e!=null&&e.setConfig)||r==null)return;let s=n=>Array.isArray(n)?n.map(String):String(n);if(t){e.setConfig({targeting:{[t]:s(r)}});return}if(typeof r=="object"&&!Array.isArray(r)){let n=Object.fromEntries(Object.entries(r).map(([o,a])=>[o,s(a)]));e.setConfig({targeting:n})}}getSlotTargeting({slot:e,key:t}){var r,s,n,o;return t?(s=(r=e==null?void 0:e.getConfig)==null?void 0:r.call(e,"targeting"))==null?void 0:s.targeting[t]:(o=(n=e==null?void 0:e.getConfig)==null?void 0:n.call(e,"targeting"))==null?void 0:o.targeting}getSlots(){var e,t;return(t=(e=this.instance)==null?void 0:e.pubads())==null?void 0:t.getSlots()}getSlot({elementId:e}={}){return e?this.getSlots().find(t=>t.getSlotElementId()===e):null}destroySlot({elementId:e}){let t=this.getSlot({elementId:e});t&&(this.instance.destroySlots([t]),this._eventBus.emit(gr,{elementId:e}))}isValidDfPId({specialDfpId:e,dfpId:t}){return!!e||!t.includes("{{channel}}")}defineOutOfPageSlot({dfpId:e,elementId:t}){return this.instance.defineOutOfPageSlot(e,t).addService(this.instance.pubads())}get isFsGam(){let{placements:e=[]}=this._dispensaryData.fsdata;return e.some(t=>t.dfpId.includes(wt))}get isFsDevGam(){let{placements:e}=this._dispensaryData.fsdata;return e.some(t=>t.dfpId.includes(uo))}setGamMapping({id:e,placement:t}){!e||!t||this.gamMap[e]||(this.gamMap[e]=t.dfpId.includes(`/${wt}/`))}createSlot({placement:e,sizes:t,id:r=null,specialDfpId:s=null,slotConfig:n}){if(!e)return this._logger.log("No placement provided. Aborting."),null;if(!t&&(t=To(e,this._window),!t))return this._logger.log("No sizes found at this resolution. Aborting."),null;r||(r=e.name);let{outOfPage:o,dfpId:a,fluidAd:d}=e,c=this.getSlot({elementId:r}),u=this.isValidDfPId({specialDfpId:s,dfpId:a});if(u||console.warn(`Ad slot ${a} requires a channel variable but no channel is defined`),c||(o?u&&r&&(c=this.defineOutOfPageSlot({dfpId:s||a,elementId:r})):(d&&!t.includes("fluid")&&t.push("fluid"),u&&(c=this.instance.defineSlot(s||a,t,r).addService(this.instance.pubads())))),c){let{siteId:p}=this._dispensaryData.fsdata;this.instance.enableServices(),this.setGamMapping({id:r,placement:e});let m=[],h={[de.REFRESH]:"0",[de.REBID]:"0",[de.UUID]:Ae()};!ki({siteId:p,placement:e})&&!zi(e,this._dispensaryData.fsdata)&&(h=this._floorsManager.getInitialFloorKVP({placement:e,keyMap:h})),Object.entries(h).forEach(([g,E])=>{m.push({key:g,value:E})});let _=li()?e==null?void 0:e.customTargetingPlacementName:e==null?void 0:e.name;_&&m.push({key:de.PLACEMENT_NAME,value:_});let I=ke(e,this._window);if(m.push({key:de.PRODUCT,value:I}),!this._idealAdStackManager.isDebugOrTestSession()){let g=this._idealAdStackManager.getConfig(I);g!=null&&g.clientServerMask&&m.push({key:de.DAS_CS_MASK,value:g.clientServerMask});let{testGroup:E}=this._idealAdStackManager.getServerToServerDetails();if(E){let L=this._idealAdStackManager.isRefinement()?`${E}${g.targeting}`:E;m.push({key:de.DAS_TEST_GROUP,value:L})}}if(m.push({key:de.PRODUCT_OPTIMIZATION,value:Tt(e)}),n!=null&&n.targeting)for(let g in n.targeting)Object.prototype.hasOwnProperty.call(n.targeting,g)&&m.push({key:g,value:n.targeting[g]});m.forEach(({key:g,value:E})=>{g&&!ei(E)&&this.setSlotTargeting({slot:c,key:g,value:E})});let S=localStorage.getItem("brw.prf");return S&&this.setSlotTargeting({slot:c,key:de.BROWSI_PP,value:S}),ph({slot:c}),ci({placementName:e.name,slotId:r,path:s||a}),this._adUnitManager.add({placement:e,slot:c}),this._eventBus.emit(_r,{elementId:r}),c}return null}refreshWithCorrelatorControl(e){this.googletagCorrelatorUpdate?(this.instance.pubads().refresh(e),this.googletagCorrelatorUpdate=!1):this.instance.pubads().refresh(e,{changeCorrelator:!1})}logTargeting(e){if(this._logger.maxLogsLevel<50)return;this._logger.groupCollapsed("GPT Targeting");let t=25,r=Object.keys(this.getGlobalTargeting()),s=[];for(let n of r){let o=this.getGlobalTargeting(n);s.push({Key:n,Value:o.join()})}s.length>0&&this._logger.table("GPT Site Level Targeting",s,{level:t}),e?Array.isArray(e)||(e=[e]):e=this.getSlots();for(let n of e){let o=[],a=n.getSlotElementId();r=Object.keys(this.getSlotTargeting({slot:n}));for(let d of r){let c=this.getSlotTargeting({slot:n,key:d});o.push({Key:d,Value:c.join()})}o.length>0&&this._logger.table(`GPT Slot (${a}) Targeting`,o,{level:t})}this._logger.groupEnd()}setCoppa(e){this.instance.pubads().setPrivacySettings({childDirectedTreatment:e})}_setInitialTargeting(){let e=Q({key:dr});e&&this.setGlobalTargeting(de.TEST_GROUP,e);let t=this._sessionStorageManager.getSessionId(),{pageId:r}=this._page,{cdep:s}=this._dispensaryData;s&&this.setGlobalTargeting(de.CDEP,s),this.setGlobalTargeting(de.FS_SESSION_ID,t),this.setGlobalTargeting(de.FS_PAGEVIEW_ID,r),this.setGlobalTargeting(de.FS_VERSION,wp),Ke(this._freestar.config,this._dispensaryData.fsdata)&&this.setGlobalTargeting(de.FS_OPTIMIZATION,"true");let n=z("dfpkey",this._window);n&&this.setGlobalTargeting(de.TEST,n),z("block",this._window)==="fsdirect"&&this.setGlobalTargeting(de.BLOCK,"fsdirect"),this._window.document.referrer.search(/facebook/i)>=0?this.setGlobalTargeting(de.REFERRER,"facebook"):(this._window.document.referrer.search(/twitter/i)>=0||this._window.document.referrer.search(/t.co/i)>=0)&&this.setGlobalTargeting(de.REFERRER,"twitter");let a={facebook:[/facebook/i,/facebot/i,/FB_IAB/i,/FBAN/i,/FBAV/i],twitter:[/Twitter/i],[this._userInfoManager.userAgent]:null};for(let[d,c]of Object.entries(a))if(!c||c.some(u=>this._window.navigator.userAgent.search(u)>=0)){this.setGlobalTargeting(de.USER_AGENT,d);break}Pi.forEach(d=>{let c=z(d,this._window);c&&this.setGlobalTargeting(d,c)}),this._setDasSiteLevelTargeting()}_setDasSiteLevelTargeting(){this.setGlobalTargeting(de.FLOORS_USER,String(this._userInfoManager.isKnown));let{roundTripTime:e}=this._idealAdStackManager.getDynamicAuctionTimeoutDetails();e&&this.setGlobalTargeting(de.FLOORS_RTT,String(e))}};A.class(wo,{token:l.GAM_MANAGER,defaultAlias:"gamManager",dependencies:[l.FREESTAR,l.EVENT_BUS,l.DISPENSARY_DATA,l.LOGGER,l.SESSION_STORAGE_MANAGER,l.PAGE,l.USER_INFO_MANAGER],factory:({dependencies:i})=>new wo(V(b({},i),{adUnitManager:ne,floorsManager:ht(),idealAdStackManager:J()})).init()})});var Ut=f(()=>{hr();mh()});var mt=f(()=>{wr()});var Oe,gh,_h,Eh,vo=f(()=>{he();Oe={NO_BRANDING:"NO_BRANDING",GREEN:"GREEN",GRAYSCALE:"GRAYSCALE",GREEN_FOOTER_ONLY:"GREEN_FOOTER_ONLY",GRAYSCALE_FOOTER_ONLY:"GRAYSCALE_FOOTER_ONLY"},gh=`${vi}/imgs/fslogo-green.svg`,_h=`${vi}/imgs/fslogo-grayscale.svg`,Eh={[Oe.GREEN]:gh,[Oe.GRAYSCALE]:_h,[Oe.GREEN_FOOTER_ONLY]:gh,[Oe.GRAYSCALE_FOOTER_ONLY]:_h}});var As,Rl=f(()=>{vo();As=i=>!i||i===Oe.NO_BRANDING?null:Eh[i]});var Tr,Ro=f(()=>{Tr=({getIsFound:i,getElement:e=()=>null,callback:t,timeout:r=5e3,frequency:s=300})=>{let n=0,o=i(),a=e();if(o){t(o,a);return}let d=setInterval(()=>{n=n+1;let c=i(),u=e();(c||n>=r/s)&&(t(c,u),clearInterval(d))},s)}});var eA,tA,iA,rA,vr,Ol=f(()=>{U();F();Ut();mt();vo();Rl();_e();Ro();le();eA=700,tA=60,iA=`Invalid branding value. Expected one of: ${Object.values(Oe).join(", ")}`,rA="Missing mandatory parameter: slotId",vr=class{constructor({background:e="linear-gradient(to bottom, #00c389 10%, black 100%)",height:t="175vh",branding:r="GREEN",showPoweredBy:s=!0,slotId:n,styleVersion:o="parallax"}){y(this,"_elementToggle",(e=!0)=>{if(this.flyingCarpetElement)if(e){let t=this.styleVersion==="new"?"flex":"block";this.flyingCarpetElement.style.setProperty("display",t),this.flyingCarpetElement.style.setProperty("visibility","visible")}else this.flyingCarpetElement.style.setProperty("visibility","hidden")});if(!n)throw new Error(rA);this.background=e,this.height=t,this.branding=r,this.showPoweredBy=s,this.slotId=n,this.styleVersion=o,this.flyingCarpetElement=null,this.flyingCarpetEffectCallback=null,this.hangtimeWaiter=null,this._bindEvents()}_bindEvents(){G.instance.resolve(l.GAM_MANAGER).then(e=>{e.instance.pubads().addEventListener(Me,({isEmpty:t,slot:r})=>{r.getSlotElementId()===this.slotId&&this.flyingCarpetElement&&(t?this._elementToggle(!1):(this._elementToggle(!0),this.waitForHangtime()))})}),G.instance.resolve(l.EVENT_BUS).then(e=>{e.subscribe(mr,({payload:{elementId:t}})=>{t===this.slotId&&this.flyingCarpetElement&&(this._elementToggle(!0),this.waitForHangtime())})})}_didHangtimeServe(){var n,o,a;let e="xyz-clipping",t=(o=(n=this==null?void 0:this.flyingCarpetElement)==null?void 0:n.classList)==null?void 0:o.contains(e),r=(a=this==null?void 0:this.flyingCarpetElement)==null?void 0:a.querySelector(`.${e}`);return t||r}waitForHangtime(){if(!this.hangtimeWaiter){let e=()=>this._didHangtimeServe(),t=(r,s)=>{r&&this._handleGumgumWin()};this.hangtimeWaiter=Ju(()=>Tr({getIsFound:e,callback:t}),5e3)}this.hangtimeWaiter()}_handleGumgumWin(){this.unstyle(),this.stopRefresh()}_createLogo(){let e=As(this.branding);return B({type:"img",attributes:{src:e,alt:"fs-logo",width:30}})}generateHTML(){let e={original:this._generateOriginalStyleHTML.bind(this),new:this._generateStyleV2HTML.bind(this),parallax:this._generateParallaxStyle.bind(this)};if(!e[this.styleVersion])throw new Error(`Unsupported fc style version: ${this.styleVersion}`);return this.flyingCarpetElement=e[this.styleVersion](),this.flyingCarpetElement}_generateOriginalStyleHTML(){if(![Oe.GREEN,Oe.GRAYSCALE,Oe.NO_BRANDING].includes(this.branding))throw new Error(iA);let e=B({classList:["fs-flying-carpet"],style:{background:this.background,height:this.height}}),t=B({classList:["fs-flying-carpet-ad-container"]});if(e.appendChild(t),this.showPoweredBy&&this.branding!==Oe.NO_BRANDING){let n=B({classList:["fs-powered-by"]});n.appendChild(this._createLogo()),e.appendChild(n)}let r=B({classList:["fs-flying-carpet-header"]});r.textContent="Advertisement",e.appendChild(r);let s=B({id:this.slotId});return t.appendChild(s),e}_generateStyleV2HTML(){let e=B({classList:["fs-flying-carpet-v2"]}),t=B({classList:["fs-flying-carpet-v2-text-border"]});t.textContent="ADVERTISEMENT",e.appendChild(t);let r=B({classList:["fs-flying-carpet-v2-ad-container"]});e.appendChild(r);let s=B({id:this.slotId});r.appendChild(s);let n=B({classList:["fs-flying-carpet-v2-text-border"]});return n.textContent="SCROLL TO CONTINUE READING",e.appendChild(n),e}_generateParallaxStyle(){let e=B({classList:["fs-flying-carpet-v3"]}),t=B({classList:["fs-flying-carpet-v3-text-border"]});t.textContent="ADVERTISEMENT",e.appendChild(t);let r=B({classList:["fs-flying-carpet-v3-container"]}),s=B({classList:["fs-flying-carpet-v3-content"]}),n=B({classList:["fs-flying-carpet-v3-slot-wrapper"]}),o=B({id:this.slotId,classList:["fs-flying-carpet-v3-slot"]});n.appendChild(o),s.appendChild(n),r.appendChild(s),e.appendChild(r);let a=B({classList:["fs-flying-carpet-v3-text-border"]});return a.textContent="SCROLL TO CONTINUE READING",e.appendChild(a),this._setupFlyingCarpetEffect(r,o),e}_parallaxUnstyle(){this.flyingCarpetElement.classList.remove("fs-flying-carpet-v3"),this.flyingCarpetElement.querySelectorAll(".fs-flying-carpet-v3-text-border").forEach(s=>{s.style.display="none"});let e=["fs-flying-carpet-v3-container","fs-flying-carpet-v3-content","fs-flying-carpet-v3-slot-wrapper","fs-flying-carpet-v3-slot"],t=e.map(s=>`.${s}`).join(",");this.flyingCarpetElement.querySelectorAll(t).forEach(s=>{s.classList.remove(...e)}),this._teardownFlyingCarpetEffect();let r=this.flyingCarpetElement.querySelector(`#${this.slotId}`);r.style.transform="none",r.style.webkitTransform="none"}unstyle(){let e={parallax:this._parallaxUnstyle.bind(this)};e[this.styleVersion]&&e[this.styleVersion]()}stopRefresh(){let e=this.slotId;freestar.disableRefreshOn({slotId:e})}_setupFlyingCarpetEffect(e,t){if(this.flyingCarpetEffectCallback)return window.addEventListener("scroll",this.flyingCarpetEffectCallback);let r=window.innerHeight<=eA,s=()=>{let n=e.getBoundingClientRect(),o=window.innerHeight,a=o/2;if(n.top<o&&n.bottom>0){let d=Math.min(Math.max((o-n.top)/o,0),1),c=r?o*.4:o*.1,u=n.top>a?c*(.5-d):c*(d-.5);r&&(u-=tA);let p=`translate(-50%, calc(-50% + ${u}px))`;t.style.transform=p,t.style.webkitTransform=p}};this.flyingCarpetEffectCallback=()=>{requestAnimationFrame(s)},window.addEventListener("scroll",this.flyingCarpetEffectCallback)}_teardownFlyingCarpetEffect(){this.flyingCarpetEffectCallback&&window.removeEventListener("scroll",this.flyingCarpetEffectCallback)}}});var yh,Oo,Sh=f(()=>{le();yh={level:20,title:"UserScrollTracker"},Oo=class i{constructor(){y(this,"_handleScrollData",bn(()=>{this.scrollHeight=this._getScrollHeight();let e=window.scrollY,t=this.scrollHeight-window.innerHeight,r=e/t*100;this.interactionsLastPercentile=r,this.interactionsMaxPercentile=Math.max(this.interactionsMaxPercentile,r),this.interactionsMsgCount+=1,freestar.log(yh,`Updated - Last: ${this.interactionsLastPercentile.toFixed(2)}%, Max: ${this.interactionsMaxPercentile.toFixed(2)}%, Height: ${this.scrollHeight}px, MsgCount: ${this.interactionsMsgCount}`)},250));if(i.instance)return i.instance;this.interactionsMsgCount=0,this.interactionsLastPercentile=0,this.interactionsMaxPercentile=0,this.scrollHeight=this._getScrollHeight(),this._initScrollListener(),this._initMutationObserver(),i.instance=this,freestar.log(yh,"initialized")}_initScrollListener(){window.addEventListener("scroll",this._handleScrollData)}_getScrollHeight(){return document.documentElement.scrollHeight}_initMutationObserver(){new MutationObserver(()=>{this.scrollHeight=this._getScrollHeight()}).observe(document.body,{childList:!0,subtree:!0})}getLastPercentile(){return this.interactionsLastPercentile}getMaxPercentile(){return this.interactionsMaxPercentile}getScrollHeight(){return this.scrollHeight}getMsgCount(){return this.interactionsMsgCount}}});var Co,Ih=f(()=>{Co=class i{constructor(e){y(this,"_handleTermination",()=>{this._handleTerminationCalled||(this._handleTerminationCalled=!0,this._onTerminateCallback&&this._onTerminateCallback(),setTimeout(()=>{this._handleTerminationCalled=!1},this._throttlePeriod))});if(i.instance)return i.instance;this._onTerminateCallback=e,this._handleTerminationCalled=!1,this._throttlePeriod=2e3,this._initTerminationListeners(),i.instance=this}_initTerminationListeners(){window.addEventListener("beforeunload",this._handleTermination),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&this._handleTermination()})}}});function sA(i){return Ah[i]||Object.values(Ah).find(e=>e===i)||"UNKNOWN"}var Ah,Cl,Po,bh=f(()=>{U();F();qi();te();Sh();Ih();bt();Ah={flyingCarpet:"FLYING_CARPET",video:"PRIMIS_VIDEO"},Cl=[l.ANALYTICS,l.PAGE];Po=class{constructor({percentilePlacement:e,highImpactType:t,slotId:r}){this.percentilePlacement=e,this.highImpactType=t,this.slotId=r,this.id=Ae(),this.sendInit(),this.scrollTracker=new Oo,this.highImpactType==="flyingCarpet"&&this.initializePageviewTerminationService()}sendInit(){G.instance.resolveAll(Cl).then(({analytics:e,page:t})=>{e.track(new xo({sessionId:freestar.msg.sessionId,pageviewId:t.pageId,highImpactUnitSessionId:this.id,percentilePlacement:this.percentilePlacement,sessionDepth:t.pageviewCount,highImpactType:sA(this.highImpactType)}))})}sendRequest({auctionId:e,refreshCount:t}){G.instance.resolveAll(Cl).then(({analytics:r,page:s})=>{r.track(new Do({sessionId:freestar.msg.sessionId,pageviewId:s.pageId,auctionId:e,highImpactUnitSessionId:this.id,refreshCount:t}))})}createInteractionsMessage(){G.instance.resolveAll(Cl).then(({analytics:e,page:t})=>{let r=new No({sessionId:freestar.msg.sessionId,pageviewId:t.pageId,highImpactUnitSessionId:this.id,interactionsMsgCount:this.scrollTracker.getMsgCount(),interactionsLastPercentile:this.scrollTracker.getLastPercentile(),interactionsMaxPercentile:this.scrollTracker.getMaxPercentile(),scrollHeight:this.scrollTracker.getScrollHeight()});r.setTopic(Be.BEACON),e.track(r)})}initializePageviewTerminationService(){this.pageviewTerminationService=new Co(this.createInteractionsMessage.bind(this))}}});var Pl,wh,Th=f(()=>{_s();bh();U();F();Pl=class{constructor(){y(this,"sendRequestMessageAuction",e=>{e.getAdUnits().forEach(t=>{this.sendRequestMessage({slotId:t.getSlotId(),auctionId:e.fsAuctionId})})});this.instances={},this.setupRequestMessageListener()}setupRequestMessageListener(){G.instance.resolve(l.AUCTION_MANAGER).then(e=>{e.addEventListener("auctionInit",this.sendRequestMessageAuction)})}newHighImpactTracking({percentilePlacement:e,highImpactType:t,slotId:r}){if(this.instances[r])freestar.log({level:1,title:"HighImpactTrackingManager"},`Already tracking a high impact ad in slot "${r}"!`);else return this.instances[r]=new Po({percentilePlacement:e,highImpactType:t,slotId:r})}sendRequestMessage({slotId:e,auctionId:t}){let r=this.instances[e];r&&G.instance.resolve(l.REFRESH_LIBRARY).then(s=>{var o;let n=((o=s.getRefreshLibraryItem({slotId:e}))==null?void 0:o.timesRefreshed)||0;r.sendRequest({auctionId:t,refreshCount:n})})}},wh=si.getInstanceFn({ClassConstructor:Pl,instanceName:"HighImpactTrackingManager"})});var Rr,vh,Mo=f(()=>{Ro();Rr=({elementSelector:i,callback:e,timeout:t=5e3,frequency:r=300,doc:s=document})=>{Tr({getIsFound:()=>!!s.querySelector(i),getElement:()=>s.querySelector(i),callback:(n,o)=>{e(n,o)},timeout:t,frequency:r})},vh=(...e)=>T(void 0,[...e],function*(i={}){return new Promise(t=>{Rr(V(b({},i),{callback:(r,s)=>{t({isFound:r,element:s})}}))})})});var Oh,xl,Dl,Ch,Ph,Rh,Gt,_C,xh,Dh,Nh=f(()=>{Oh={level:20,title:"IAI"},xl=300,Dl=20,Ch=6e4,Ph=4e4,Rh={VIDEO:"video",FLYING_CARPET:"flyingCarpet"},Gt={PRIMIS_VIDEO:"PRIMIS_VIDEO",FLYING_CARPET:"FLYING_CARPET"},_C={[Gt.PRIMIS_VIDEO]:Rh.VIDEO,[Gt.FLYING_CARPET]:Rh.FLYING_CARPET},xh=0,Dh=1e3});var ko,Mh=f(()=>{te();Ol();le();Th();ti();Mo();Nh();ko=class{constructor({name:e,placement:t,intelligentAdInsertConfig:r,parentElement:s,debugIndex:n,lazy:o=!1,logger:a,dispensaryData:d,freestar:c,onRemove:u,videoManager:p}){this.name=e,this.placement=t,this.config=r,this.parentElement=s,this.debugIndex=n!=null?n:0,this.lazy=o,this._logger=a,this._dispensaryData=d,this._freestar=c,this._onRemove=u,this._videoManager=p,this.childElements=[],this.resizeObserver=null,this.parentSize=null,this.mutationObserver=null,this.nextChildIndex=0,this.blockedChildren=0,this.ads=[],this.adsInsertedCount=0,this.blocklistSelector=(this.config.blocklist||[]).join(", "),this.debugTimeout=null,this.insertTimeout=null,this.intersectionObserver=null,this.currentRootMargin=null,this.slotsAwaitingIntersection={},this.isFlyingCarpetAdded=!1,this.isVideoAdAdded=!1,this.adLastVisible=new Map,this.cleanupTimeout=null,this.timeouts=new Set,this._isDestroyed=!1,this.highImpactTracking=null,this.highImpactPlacementConfig=null,o||this.init()}info(...e){this._logger.log(Oh,this.debugIndex,...e)}init(){this.childElements=this.getValidChildElements(),this.monitorParentMutation(),this.checkForInsertOpportunities(),this.debug(),this.schedulePeriodicCleanup()}schedulePeriodicCleanup(){this._isDestroyed||(this.cleanupTimeout=setTimeout(()=>{if(!this._isDestroyed)try{this.cleanupInvisibleAds(),this.pruneArrays()}finally{this.schedulePeriodicCleanup()}},Ph),this.timeouts.add(this.cleanupTimeout))}cleanupInvisibleAds(){if(this._isDestroyed)return;let e=Date.now(),t=[];for(let r=0;r<this.ads.length;r++){let s=this.ads[r];if(!document.body.contains(s)){t.push(r);continue}let n=s.getBoundingClientRect();if(n.top<(window.innerHeight||document.documentElement.clientHeight)&&n.bottom>0)this.adLastVisible.set(s,e);else{let a=this.adLastVisible.get(s)||0;e-a>Ch&&t.push(r)}}for(let r=t.length-1;r>=0;r--){let s=t[r],n=this.ads[s];this.ads.splice(s,1),this.adLastVisible.delete(n)}}pruneArrays(){if(!this._isDestroyed){if(this.childElements.length>xl){let e=Math.max(this.nextChildIndex+50,xl);if(this.childElements.length>e){let t=this.childElements.length-e;this.childElements=this.childElements.slice(t),this.nextChildIndex=Math.max(0,this.nextChildIndex-t)}}if(this.ads.length>Dl){let e=this.ads.length-Dl;this.ads.splice(0,e)}}}destroy(){var e,t;this._isDestroyed||(this._isDestroyed=!0,this.info("Destroying IAI instance"),this.mutationObserver&&this.mutationObserver.disconnect(),this.mutationObserver=null,this.intersectionObserver&&this.intersectionObserver.disconnect(),this.intersectionObserver=null,this.resizeObserver&&this.resizeObserver.disconnect(),this.resizeObserver=null,clearTimeout(this.debugTimeout),clearTimeout(this.insertTimeout),clearTimeout(this.cleanupTimeout),this.timeouts.forEach(r=>clearTimeout(r)),this.timeouts.clear(),(t=(e=this.adLastVisible)==null?void 0:e.clear)==null||t.call(e),this.childElements=[],this.ads=[],this.slotsAwaitingIntersection={},this.parentElement=null,this.highImpactTracking=null,this.highImpactPlacementConfig=null)}isValidChildElement(e){return e instanceof Element&&!e.matches(".iai-label")&&!e.matches(".fs-iai")&&!e.matches('[class^="fs-"], [class*=" fs-"]')&&(!this.config.childElement||e.matches(this.config.childElement))}getValidChildElements(){let e=[];for(let t of this.parentElement.children)this.isValidChildElement(t)&&e.push(t);return e}biToHw(e,t){var s;let r=(s=e.style.writingMode)!=null?s:getComputedStyle(e).writingMode;return!r||r.toLowerCase().startsWith("horizontal")?{height:t.blockSize,width:t.inlineSize}:{height:t.inlineSize,width:t.blockSize}}onResize(e){let{target:t,borderBoxSize:r,contentBoxSize:s,devicePixelContentBoxSize:n}=e,o={borderBoxSize:this.biToHw(t,r[0]),contentBoxSize:this.biToHw(t,s[0]),devicePixelContentBoxSize:this.biToHw(t,n[0])};this.parentSize=o}onMutation(e){this._isDestroyed||(e.addedNodes.length&&e.addedNodes.forEach(t=>{this.isValidChildElement(t)&&this.childElements.push(t)}),document.body.contains(this.parentElement)||(this.info("Parent element removed from DOM, destroying IAI"),this._onRemove?this._onRemove(this):this.destroy()))}monitorParentMutation(){this.mutationObserver||(this.mutationObserver=new MutationObserver(e=>{for(let t of e)this.onMutation(t);this.insertAds(),this.debug()}),this.mutationObserver.observe(this.parentElement,{childList:!0}))}getNumberOfAdsWithinViewport(e){let r=e.getBoundingClientRect().bottom,{maxHeight:s}=this.getSizeMaxes(),n=r+s,o=(window.innerHeight||document.documentElement.clientHeight)*.95,a=0;for(let d=this.ads.length-1;d>=0;d--){let c=this.ads[d];if(!document.body.contains(c))continue;let p=c.getBoundingClientRect().bottom;if(n-p<o)a+=1;else break}return a}isBlocked(e){var t;return this.blocklistSelector?e.matches(this.blocklistSelector)||((t=e.nextElementSibling)==null?void 0:t.matches(this.blocklistSelector)):!1}canInsertEveryNElements(e,t,r,s){let n=e+1;(!s||s<1)&&(s=t);let o=t-s,a=Math.floor((n+o)/t);return r<a}canInsert(e,t){var u;let r=this.childElements[e],s=!1,n=null,{maxAdsInView:o,everyNElements:a,maxInserts:d,startAfterNElements:c}=this.config;return d&&this.adsInsertedCount>=d?n="maxInserts":this.canInsertEveryNElements(e-t,a,this.adsInsertedCount,c)?(u=r.nextElementSibling)!=null&&u.matches(".fs-iai")?n="adAlreadyInserted":o&&this.getNumberOfAdsWithinViewport(r)>o-1?n="maxAdsInView":this.isBlocked(r)?n="blocklist":s=!0:n="everyNElements",{result:s,reason:n}}insertAds(){this._isDestroyed||(clearTimeout(this.insertTimeout),this.insertTimeout=setTimeout(()=>{this._isDestroyed||this.checkForInsertOpportunities()},1e3))}checkForInsertOpportunities(){for(;this.nextChildIndex<this.childElements.length;){let{reason:e,result:t}=this.canInsert(this.nextChildIndex,this.blockedChildren);if(t)this.info("INSERTING AD @",this.nextChildIndex),this.addSlot(this.nextChildIndex);else if(this.info("NO INSERT @",this.nextChildIndex,"due to",e),e==="maxInserts"){this.info("maxInserts reached, disconnecting MutationObserver..."),this.mutationObserver.disconnect(),this.mutationObserver=null;return}this.nextChildIndex+=1,e==="blocklist"&&(this.blockedChildren+=1)}this.nextChildIndex>=this.childElements.length&&Object.keys(this.slotsAwaitingIntersection).length===0&&this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=null,this.currentRootMargin=null)}getPercentageHeight(e,t){let r=e.getBoundingClientRect(),s=t.getBoundingClientRect(),a=(r.top-s.top+r.height)/s.height;return a<0?0:Math.min(a,.99)}createFlyingCarpetSlot(e,t){let r=t.selectedSize.flyingCarpetOptions,s=this.childElements[e],n=`${this.name}_${this.debugIndex}_${this.adsInsertedCount}_fc`,o=new vr({branding:r.branding||"NONE",background:r.background||"linear-gradient(to bottom, #00c389 10%, black 100%)",height:r.height||"175vh",slotId:n}),a=o.generateHTML();this.ads.push(a),this.parentElement.insertBefore(a,s.nextSibling);let d={placementName:t.name,slotId:o.slotId,skipSAU:!0};return this.registerSlotWithStrategy({element:a,newAdSlotConfig:d}),this.adsInsertedCount+=1,{slotId:n}}static containsSize(e,t){return e.some(r=>r[0]===t[0]&&r[1]===t[1])}buildAndInsertStandardSlot(e){let t=this.childElements[e],{element:r,newAdSlotConfig:s}=this.buildSlot();this.ads.push(r),this.parentElement.insertBefore(r,t.nextSibling),this.registerSlotWithStrategy({element:r,newAdSlotConfig:s})}getHighImpactPlacementConfig(){var n,o,a;if(this.highImpactPlacementConfig)return this.highImpactPlacementConfig;let e=this.canInsertFlyingCarpetPlacement(),t=((a=(o=(n=this.config)==null?void 0:n.highImpact)==null?void 0:o.placements)!=null?a:[]).filter(d=>{switch(d.format){case Gt.FLYING_CARPET:return e&&this.getFlyingCarpetObject(d.name);case Gt.PRIMIS_VIDEO:return this.isValidVideoPlacement(d.name);default:return!1}}),r=t[Math.floor(Math.random()*t.length)],s=this.getIaiQuartile();return this.highImpactPlacementConfig={placement:r,targetQuartile:s},this.highImpactPlacementConfig}canInsertFlyingCarpetPlacement(){var t,r,s;return((s=(r=(t=this._freestar)==null?void 0:t.deviceInfo)==null?void 0:r.device)==null?void 0:s.type)===st&&!Qu()}isValidVideoPlacement(e){var r,s,n,o;if(this.isVideoAdAdded)return!1;let t=this.getVideoAdByName(e);if(!t)return!1;switch(t.vendor){case"PRIMIS":{let a=(r=t==null?void 0:t.device)==null?void 0:r.toLowerCase(),d=(o=(n=(s=freestar==null?void 0:freestar.deviceInfo)==null?void 0:s.device)==null?void 0:n.type)==null?void 0:o.toLowerCase();return a==="all_devices"||a===d}default:return!1}}getChildPercentageHeight(e){let t=this.childElements[e];return this.getPercentageHeight(t,this.parentElement)}handleHighImpactUnit(e,t,r){var o;let s;switch(t.highImpactType){case Gt.FLYING_CARPET:{({slotId:s}=this.createFlyingCarpetSlot(e,r)),this.isFlyingCarpetAdded=!0;break}case Gt.PRIMIS_VIDEO:{this._videoManager&&!this.isVideoAdAdded&&({slotId:s}=this.createPrimisVideoSlot(e,r),this.isVideoAdAdded=!0);break}default:return}Math.random()*100<((o=this._dispensaryData.getValue("prebidLogPercentage"))!=null?o:1)&&s&&(this.highImpactTracking=wh().newHighImpactTracking(V(b({},t),{slotId:s})))}createPrimisVideoSlot(e,t){var c,u;let r=this.childElements[e],s=(u=(c=t==null?void 0:t.parentElement)==null?void 0:c.trim())!=null?u:"",n=s.startsWith("#")&&s.length>1,o=`${this.name}_${this.debugIndex}_${this.adsInsertedCount}_iai-video-ad`,a=n?s.slice(1):o;n||(t.parentElement=`#${a}`),t.nthElement=-1;let d=B({id:a});return this.ads.push(d),this.parentElement.insertBefore(d,r.nextSibling),Rr({elementSelector:n?s:`#${a}`,callback:()=>{var p,m;return(m=(p=this._videoManager)==null?void 0:p.add)==null?void 0:m.call(p,t==null?void 0:t.name)},timeout:3e3}),this.adsInsertedCount+=1,{slotId:a}}getVideoAdByName(e){var t,r;return(r=(t=freestar.fsdata)==null?void 0:t.videoAds)==null?void 0:r.find(s=>s.name===e)}getHighImpactObject(e){if(this.isFlyingCarpetAdded||this.isVideoAdAdded)return{shouldServe:!1};let{placement:t,targetQuartile:r}=this.getHighImpactPlacementConfig();if(!t)return{shouldServe:!1};let s=this.getChildPercentageHeight(e),n=r-.25,o=Math.round(r*4)+s;if(!(s>=n))return{shouldServe:!1};let d;return(t==null?void 0:t.format)===Gt.PRIMIS_VIDEO?d=this.getVideoAdByName(t.name):(t==null?void 0:t.format)===Gt.FLYING_CARPET&&(d=freestar.fsdata.placements.find(c=>c.name===t.name)),d?{shouldServe:!0,tracking:{percentilePlacement:o,highImpactType:t.format},highImpactPlacement:d}:{shouldServe:!1}}getFlyingCarpetObject(e){var r,s;let t=freestar.fsdata.placements.find(n=>n.name===e);if((s=(r=t==null?void 0:t.selectedSize)==null?void 0:r.flyingCarpetOptions)!=null&&s.active)return t.selectedSize.flyingCarpetOptions}addSlot(e){let{shouldServe:t,tracking:r,highImpactPlacement:s}=this.getHighImpactObject(e);t?this.handleHighImpactUnit(e,r,s):this.buildAndInsertStandardSlot(e)}getSizeMaxes(){let e=this.placement.sizes.filter(s=>Array.isArray(s)),t=0,r=0;return e.forEach(s=>{t=Math.max(t,s[0]),r=Math.max(r,s[1])}),{maxWidth:t,maxHeight:r}}getStickySettings(){var e,t;if((t=(e=this.placement)==null?void 0:e.selectedSize)!=null&&t.stickyAdEnabled){let{headerHeight:r,stickyAdBackgroundRgba:s}=this.placement.selectedSize;return{headerHeight:r,stickyAdBackgroundRgba:s}}return null}getStickyStyleContent({headerHeight:e,stickyAdBackgroundRgba:t}){let r=[];return t&&r.push(`.fs-iai-sticky { background-color: ${t} }`),(!e||e<0)&&(e=0),r.push(`.fs-iai-sticky > div { top: ${e}px }`),r.join(` `)}makeStickyStyle({headerHeight:e,stickyAdBackgroundRgba:t}){let r=`iai-sticky-style-${this.name}`;if(!document.getElementById(r)){let n=document.createElement("style");n.id=r,n.textContent=this.getStickyStyleContent({headerHeight:e,stickyAdBackgroundRgba:t}),document.head.appendChild(n)}}buildSlot(){let e=`${this.name}_${this.debugIndex}_${this.adsInsertedCount}`,{maxWidth:t,maxHeight:r}=this.getSizeMaxes(),s=this.getStickySettings();s&&this.makeStickyStyle(s);let o=B({type:"div",id:e,classList:s?["fs-iai","fs-iai-sticky"]:["fs-iai"],attributes:[{style:`min-height:${r}px; min-width:${t}px;`},{"data-freestar-ad":kh({placement:this.placement})},{name:this.name}]}),a=e+"_slot",d=B({type:"div",id:a,attributes:[{style:"display: flex; align-items: center; min-height: inherit;"}]});return o.appendChild(d),this.adsInsertedCount+=1,{element:o,newAdSlotConfig:{placementName:this.name,slotId:a,skipSAU:!0}}}intersectionObserverCallback(e,t){e.forEach(r=>{if(r.isIntersecting){let{target:s}=r;t.unobserve(s);let n=this.slotsAwaitingIntersection[s.id];n&&(this.info("Registering new ad slot for",s.id),delete this.slotsAwaitingIntersection[s.id],this._freestar.newAdSlots([n]))}}),Object.keys(this.slotsAwaitingIntersection).length===0&&(this.intersectionObserver&&this.intersectionObserver.disconnect(),this.intersectionObserver=null,this.currentRootMargin=null)}isApplicableLazyLoadHeight(e){return e!=null&&typeof e=="number"&&e>=xh&&e<=Dh}registerSlotWithStrategy({element:e,newAdSlotConfig:t}){let r=this.config.lazyLoadHeight;this.isApplicableLazyLoadHeight(r)?this.registerSlotLazy(e,t,r):this.registerSlotImmediate(t)}registerSlotImmediate(e){this.info("Registering ad slot immediately (lazy loading disabled)"),this._freestar.newAdSlots([e])}registerSlotLazy(e,t,r){let s=`${r}%`;(!this.intersectionObserver||this.currentRootMargin!==s)&&(this.intersectionObserver&&this.intersectionObserver.disconnect(),this.intersectionObserver=new IntersectionObserver((n,o)=>this.intersectionObserverCallback(n,o),{rootMargin:s}),this.currentRootMargin=s,Object.keys(this.slotsAwaitingIntersection).forEach(n=>{let o=document.getElementById(n);o&&this.intersectionObserver.observe(o)})),this.slotsAwaitingIntersection[e.id]=t,this.intersectionObserver.observe(e),this.info(`Waiting for intersection for ${e.id} with ${r}% margin`)}debug(){this._freestar.debug&&(clearTimeout(this.debugTimeout),this.debugTimeout=setTimeout(()=>this._debug(),1e3))}_debug(){this.debugAddStyleNode(),this.debugNames()}getDebugStyleContent(){let e="";return this.blocklistSelector&&(e=` ${this.config.blocklist.map(r=>`${this.config.parentElement} >${r}`).join(", ")} { outline: dashed red; } `),` ${this.config.parentElement} { outline: solid blue; } ${this.config.parentElement} >${this.config.childElement||"*"} { outline: solid fuchsia; } .parent-label { color: blue; } .child-label { color: fuchsia; } .ad-label { color: #00c389; } .iai-label { position: absolute; font: large; background: silver; padding: 3px; } .fs-iai { outline: solid #00c389; /* freestar green */ } ${e} `}debugAddStyleNode(){let e=`iai-style-${this.name}`;if(!document.getElementById(e)){let r=document.createElement("style");r.id=e,r.textContent=this.getDebugStyleContent(),document.head.appendChild(r)}}debugNames(){this.debugAddLabel(this.parentElement,"parent-label",`${this.name} parent ${this.debugIndex}`),this.childElements.forEach((e,t)=>this.debugAddLabel(e,"child-label",`child ${t}`)),this.ads.forEach((e,t)=>this.debugAddLabel(e,"ad-label",`ad ${t}`))}debugAddLabel(e,t,r){let s=e.querySelector(".iai-label");s||(s=document.createElement("label"),s.classList.add("iai-label"),e.insertBefore(s,e.firstChild)),s.classList.add(t),s.textContent=r}getIaiQuartile(){let e=[.25,.5][Math.floor(Math.random()*2)],t=Wu();return this.info(`Using ${t!=null?`${t} from query parameter`:`randomly generated target quartile ${e}`}`),t!=null?t:e}}});function Ml({placement:i}){var e;return(e=i==null?void 0:i.selectedSize)==null?void 0:e.intelligentAdInsertConfig}var Nl,Lh=f(()=>{U();Mh();Nt();F();Vi();Nl=class{constructor({freestar:e,logger:t,dispensaryData:r,video:s}){y(this,"newIai",e=>{var t;(t=this._dispensaryData.getValue("placements"))==null||t.forEach(r=>{if(e&&r.name!==e)return;let s=Ml({placement:r});s!=null&&s.active&&(this.registerConfig({placement:r,intelligentAdInsertConfig:s}),this.initConfig({name:r.name}))})});this._freestar=e,this._logger=t,this._dispensaryData=r,this._videoManager=s,this.configs={},this.instances=new Map,this.initializedParentElements=new WeakMap,this._logger.setContext("IAI"),this._logger.setLevel(ue.CORE)}registerConfig({placement:e,intelligentAdInsertConfig:t}){let r=e.name;if(!this.configs[r]){let s={name:r,placement:e,intelligentAdInsertConfig:t};this.configs[r]=s}}initConfig({name:e}){if(Pe({name:"iai"}))return;let t=this.configs[e];if(!t){this._freestar.log(50,`Cannot init unregistered IAI ${e}!`);return}let{placement:r,intelligentAdInsertConfig:s}=t,n=s.parentElement,o=Array.from(document.querySelectorAll(n));o.length!==0&&o.forEach(a=>{if(this.initializedParentElements.has(a))return;let d=new ko({name:e,placement:r,intelligentAdInsertConfig:s,parentElement:a,debugIndex:this.instances.size,logger:this._logger,dispensaryData:this._dispensaryData,freestar:this._freestar,onRemove:c=>this.removeInstance(c),videoManager:this._videoManager});this.instances.set(d,a),this.initializedParentElements.set(a,e)})}removeInstance(e){var r;let t=this.instances.get(e);t&&((r=e==null?void 0:e.destroy)==null||r.call(e),this.instances.delete(e),this.initializedParentElements.delete(t))}};A.class(Nl,{token:"IntelligentAdInsertManager",dependencies:[l.FREESTAR,l.LOGGER,l.DISPENSARY_DATA,{token:l.VIDEO,optional:!0}],defaultAlias:"intelligentAdInsertManager"})});function Al(i){var e,t;return!!((t=(e=i==null?void 0:i.selectedSize)==null?void 0:e.flyingCarpetOptions)!=null&&t.active)}function Xp(i){var t;return Al(i)?(typeof freestar!="undefined"&&((t=freestar==null?void 0:freestar.fsdata)==null?void 0:t.placements)||[]).some(r=>{var n;let s=Ml({placement:r});return!(s!=null&&s.active)||!((n=s.highImpact)!=null&&n.placements)?!1:s.highImpact.placements.some(o=>o.format==="FLYING_CARPET"&&o.name===i.name)}):!1}var Bh=f(()=>{Lh()});function Fh(i){if(Or())throw new Error("Ad serving is blocked in "+i.locData.iso)}var Uh=f(()=>{Ve()});function Gh({channel:i,logTitle:e="ChannelConfiguration",config:t,placements:r,logger:s}){return!i&&t.channel&&(i=t.channel),t.orignalChannel||(t.orignalChannel="{{channel}}"),i&&t.orignalChannel!==i&&(r=nA({channel:i,logTitle:e,originalChannel:t.orignalChannel,placements:r,logger:s}),t.orignalChannel=i),{channel:i,placements:r}}function nA({channel:i,originalChannel:e,logTitle:t,placements:r,logger:s}){s.log("Channel is different than originally set, modifying dfpIds",{level:s.constructor.VERBOSE,context:t});let n=r.map(o=>V(b({},o),{dfpId:o.dfpId.replace(e,i)}));return s.log(["New dfpIDs",n.map(o=>o.dfpId)],{level:s.constructor.VERBOSE,context:t}),n}var Vh=f(()=>{});function Hh(i,e,t){if(!i)return[];Array.isArray(i)||(i=[i]);let r=i.filter(s=>{let{placementName:n}=s,o=re({name:n})!==void 0;return o||t.log(`cannot find placement for ${n}, ignoring`,{level:t.constructor.CORE,context:e}),o});return In(r,"slotId")}var zh=f(()=>{te();le()});var ot=f(()=>{Kp();th();ih();Bh();Il();Uh();Vh();zh()});var Lo,kl,Ll,qh=f(()=>{U();F();ot();Ne();De();te();bt();Ie();lo();ys();he();We();Ge();Lo=class Lo extends W{constructor(){super(...arguments);y(this,"type","bidWon")}_buildPayload(t){return ye(t,Lo.payloadProperties)}};y(Lo,"payloadProperties",["bidderCode","width","height","adId","creativeId","cpm","rawCpm","bidCpm","adUrl","requestId","responseTimestamp","requestTimestamp","bidder","adUnitCode","timeToRespond","pbLg","pbMg","pbHg","pbAg","pbDg","pbCg","size","alwaysUseBid","bidderRefresh","isRebid","format","placementId","source","rebidType","prebidAuctionStrategy","dropped","fsRebidCount","dealId","adomain","networkCode","impressionId","countryCode","fsAdProduct","auctionId","originalCpm","fsuuid","cdep","isGamBypass","isS2SDisabled","isNativeRender","fsAuctionId","auctionTimeout","paymentRelationship","kvps"]);kl=Lo,Ll=class extends oi{constructor({win:e,freestar:t,dispensaryData:r,auctionManager:s,rebidManager:n}){super({win:e,freestar:t,dispensaryData:r}),this._auctionManager=s,this._dispensaryData=r,this._rebidManager=n,this._adUnitManager=ne}create(e){var I;let{mediaType:t,currency:r,adUnitCode:s,auctionId:n}=e,o=this._auctionManager.getAuctionByPrebidAuctionId(n),a=o?o.fsAuctionId:null,d=e.creative_id||e.creativeId,c=co({adUnitCode:e.adUnitCode,dynamicSlotLibrary:this._freestar.dynamicSlotLibrary}),u=this._adUnitManager.getAdUnitByPrebidCode(s)||this._adUnitManager.getAdUnitBySlotElementId(c),{isRebid:p,rebidType:m,rebidAttempt:h}=pr({bid:e,placementId:c,rebidManager:this._rebidManager,fsAuctionId:a,auctionManager:this._auctionManager}),_=re({name:ge({slotId:s})});return new kl(V(b(b(b({},e),this._getMeta(e)),this._getCpm(e)),{isRebid:p,rebidType:m,fsRebidCount:h,isGamBypass:this._getIsGamBypass(),currencyCode:r,fsuuid:ai({slotId:e.slotId,slot:e.slot,googletag:this._win.googletag}),placementId:c,auctionTimeout:this._getAuctionTimeout(),format:t.length?t:"unknown",fsAdProduct:ke(_),networkCode:Number(_.dfpId.split("/")[1]),impressionId:Ae(),isS2SDisabled:J().isS2SDisabled(),adomain:this._getAdomain(e),creativeId:d&&String(d),cdep:this._dispensaryData.cdep||"",fsAuctionId:a,auctionId:n,paymentRelationship:this._getPaymentRelationship(e),kvps:(I=u==null?void 0:u.getKVPs())==null?void 0:I.filter(([S])=>Up.includes(S)),source:this._getBidSource(e.source)}),Be.IMMEDIATE)}_getIsGamBypass(){return!J().isGAMEnabled()}_getMeta(e){let{meta:t={}}=e;return Object.entries(t).reduce((r,[s,n])=>(r[s]=Array.isArray(n)?n.join(","):n,r),{})}_getAdomain(e){let{meta:t={},advertiserDomains:r}=e,s=r||(t==null?void 0:t.advertiserDomains)||[];return Array.isArray(s)?s.join(","):s}_getPaymentRelationship(e){var s,n,o,a,d,c;let t=(o=(n=(s=window.freestar)==null?void 0:s.fsdata)==null?void 0:n.schain)==null?void 0:o.type,r=(c=(d=(a=window.freestar)==null?void 0:a.fsdata)==null?void 0:d.schain)==null?void 0:c.bidderOverrides;if(r&&r.length){if(t===Ri&&r.includes(se(e.bidder)))return pn[rt];if(t===rt&&r.includes(se(e.bidder)))return pn[Ri]}return pn[t]}};A.class(Ll,{token:"BidWonAnalyticsEventFactory",defaultAlias:"bidWonAnalyticsEventFactory",dependencies:[l.FREESTAR,{token:l.WINDOW,alias:"win"},l.DISPENSARY_DATA,l.AUCTION_MANAGER,l.REBID_MANAGER]})});function oA(i){if(i.src)return i.src;let e=i.bids;if(!e||e.length===0)return;let t=new Set(e.map(r=>r.src).filter(Boolean));if(t.size===1)return[...t][0]}var Bo,Bl,Fl,Yh=f(()=>{tt();U();F();Ie();lo();Bo=class Bo extends W{constructor(){super(...arguments);y(this,"type","bidRequested")}_buildPayload(t){return ye(t,Bo.payloadProperties)}};y(Bo,"payloadProperties",["bidderCode","auctionId","bidderRequestId","start","timeout","bids","auctionStart","src"]);Bl=Bo,Fl=class extends oi{constructor({win:e,freestar:t,dispensaryData:r,auctionManager:s}){super({win:e,freestar:t,dispensaryData:r}),this._auctionManager=s,this._dispensaryData=r}create(e){let t=oA(e),r=e.bids.map(n=>({bidder:n.bidder,placementCode:n.adUnitCode,bidId:n.bidId,params:JSON.stringify(n.params)}));return new Bl(V(b({},e),{bids:r,src:this._getBidSource(t)}))}};A.class(Fl,{token:"BidRequestedAnalyticsEventFactory",defaultAlias:"bidRequestedAnalyticsEventFactory",dependencies:[l.FREESTAR,{token:l.WINDOW,alias:"win"},l.DISPENSARY_DATA,l.AUCTION_MANAGER]})});var Uo,Fo,$h=f(()=>{tt();Ie();Uo=class Uo extends W{constructor(){super(...arguments);y(this,"type","bidTimeout")}_buildPayload(t){return ye(t,Uo.payloadProperties)}};y(Uo,"payloadProperties",["auctionId","bidderRequestId","bidId","bidder","adUnitCode","src","timeout"]);Fo=Uo});var Vo,Ul,Go,jh=f(()=>{tt();U();F();Ie();hl();ys();Vo=class Vo extends W{constructor(){super(...arguments);y(this,"type","dfpResponse")}_buildPayload(t){return ye(t,Vo.payloadProperties)}};y(Vo,"payloadProperties",["placementId","DfpId","advertiserId","campaignId","isEmpty","lineItemId","serviceName","size","sourceAgnosticCreativeId","sourceAgnosticLineItemId","complete","auctionId","dfpRefresh","maxBid","fsRebidCount","fstrU","networkCode","impressionId","countryCode","fsAdProduct","fsuuid","itfTargetingValue","fsAuctionId"]);Ul=Vo,Go=class extends ur{constructor({win:e,freestar:t,prebidManager:r,auctionManager:s,rebidManager:n,refreshLibrary:o}){super(),this._window=e,this._freestar=t,this._prebidManager=r,this._auctionManager=s,this._rebidManager=n,this._refreshLibrary=o}create(e){var S,g;let{parentDiv:t,advertiserId:r=0,campaignId:s=0,lineItemId:n=0,sourceAgnosticCreativeId:o=0,sourceAgnosticLineItemId:a=0,placementId:d,fsAuctionId:c,slotId:u}=e,p=this._window.document.getElementById(t),m=(S=this._refreshLibrary.getRefreshLibraryItem({slotId:t}))==null?void 0:S.dataRefreshId,h=!1;if(p&&m){let E,L=RegExp(m,"g");(g=this._freestar.refreshSlots)==null||g.forEach((k,$)=>{L.test(k.refreshId)&&(E=$,h=!0)}),this._freestar.refreshSlots.splice(E,1)}let{rebidAttempt:_}=pr({bid:{fsAuctionId:c,slotId:u},placementId:d,rebidManager:this._rebidManager,fsAuctionId:c,auctionManager:this._auctionManager}),I=Yp({placementId:d,prebid:this._prebidManager.instance});return new Ul(V(b({},e),{maxBid:Math.trunc(I*1e4),advertiserId:r,campaignId:s,lineItemId:n,dfpRefresh:h,fsRebidCount:_,sourceAgnosticCreativeId:o,sourceAgnosticLineItemId:a,itfTargetingValue:this._freestar.identity.targeting,fsuuid:ai({slotId:u,googletag:this._window.googletag})}))}};A.class(Go,{token:l.DFP_RESPONSE_ANALYTICS_EVENT_FACTORY,dependencies:[l.FREESTAR,{token:l.WINDOW,alias:"win"},l.AUCTION_MANAGER,l.REBID_MANAGER,l.REFRESH_LIBRARY],factory:({dependencies:i})=>new Go(V(b({},i),{prebidManager:{get instance(){return i.win.fsprebid}}}))})});var Ho,zo,Kh=f(()=>{Ie();Ho=class extends W{constructor(){super(...arguments);y(this,"type","outstreamBidWon")}},zo=class extends W{constructor(){super(...arguments);y(this,"type","outstreamTagLoad")}}});var qo,Wh=f(()=>{Ie();qo=class extends W{constructor(){super(...arguments);y(this,"type","sniffer")}}});var xo,Qh=f(()=>{Ie();xo=class extends W{constructor(){super(...arguments);y(this,"type","iaiHighImpactTrackings")}}});var Do,Jh=f(()=>{Ie();Do=class extends W{constructor(){super(...arguments);y(this,"type","iaiHighImpactAdRequests")}}});var No,Zh=f(()=>{Ie();No=class extends W{constructor(){super(...arguments);y(this,"type","iaiHighImpactInteractions")}}});var bs,Gl=f(()=>{Ie();bs=class extends W{constructor(){super(...arguments);y(this,"type","adBlocked")}}});var $o,Yo,Xh=f(()=>{tt();Ie();$o=class $o extends W{constructor(){super(...arguments);y(this,"type","amazonBidStream")}_buildPayload(t){return ye(t,$o.payloadProperties)}};y($o,"payloadProperties",["amzniid","bidder","adUnitCode","isRefresh","countryCode","auctionId","fsuuid","bidFloor","hashedCpm","requestTimestamp","responseTimestamp"]);Yo=$o});var em=f(()=>{tt();Ie()});var qi=f(()=>{Ie();Gi();pl();zp();qp();jp();qh();Yh();$h();jh();Kh();Wh();Qh();Jh();Zh();Gl();Xh();em()});var Cr,jo=f(()=>{Cr={ERROR:"analyticsError"}});var fi,Ko=f(()=>{fi=class{beforeMessageSend(e,t){t(e)}}});var Qo,Wo,tm=f(()=>{We();Ko();Qo=class Qo extends fi{beforeMessageSend(e,t){let{payload:r}=e;Qo.propertiesToUnalias.forEach(s=>{r[s]&&(r[s]=se(r[s]))}),t()}};y(Qo,"propertiesToUnalias",["bidder","bidderCode","adapterCode"]);Wo=Qo});var im=f(()=>{Ko();tm()});var Jo,rm=f(()=>{Ko();Jo=class extends fi{beforeMessageSend({payload:e},t){var r;(r=e.kvps)!=null&&r.length&&(e.kvps=e.kvps.map(([s,n])=>`[${s}=${n}]`)),t()}}});var Zo,sm=f(()=>{Is();U();jo();Gi();F();im();bt();rm();Zo=class{constructor({logger:e,mainQueue:t,errorQueue:r,immediateQueue:s,beaconQueue:n,eventBus:o}){y(this,"_reportError",({payload:e})=>{var t;this._errorQueue.enqueue(new X({eventName:"MESSAGE_ERROR",eventType:(t=e.details)==null?void 0:t.status,data:{error:e.details,message:e.message,timestamp:new Date().toISOString()}}))});this._logger=e,this._logger.setContext(l.ANALYTICS),this._logger.setLevel(2),this._errorReportingEnabled=Math.random()<=.01,this._mainQueue=t,this._errorQueue=r,this._immediateQueue=s,this._beaconQueue=n,this._middlewares=[],this._eventBus=o,this._topicMap={[Be.ERROR]:this._errorQueue,[Be.BEACON]:this._beaconQueue,[Be.IMMEDIATE]:this._immediateQueue,[Be.MAIN]:this._mainQueue},this._errorReportingEnabled&&this._eventBus.subscribe(Cr.ERROR,this._reportError),this._init()}_init(){this._logger.log(Ir.INIT),this._mainQueue.start(),this._logger.log([Ir.INIT_COMPLETE,"Queue processing started."])}addMiddleware(e){if(!(e instanceof fi))throw new Error("Middleware must be an instance of AnalyticsMiddleware");this._middlewares.includes(e)||this._middlewares.push(e)}removeMiddleware(e){this._middlewares=this._middlewares.filter(t=>t!==e)}track(e){if(!e.type||!e.payload){this._logger.error("Invalid event type. event must be an instance of AnalyticsEvent.");return}let t=this._applyBeforeSendMiddleware(e);if(!t)return;(this._topicMap[t.topic]||this._topicMap[Be.MAIN]).enqueue(t)}_applyBeforeSendMiddleware(e){let t=this._middlewares.filter(r=>r.beforeMessageSend);if(!t.length)return e;try{let r=()=>{if(!t.length)return;t.shift().beforeMessageSend(e,r)};return r(),e}catch(r){return null}}};A.class(Zo,{token:l.ANALYTICS,defaultAlias:"analytics",dependencies:[l.LOGGER,l.MAIN_QUEUE,l.ERROR_QUEUE,l.IMMEDIATE_QUEUE,l.BEACON_QUEUE,l.EVENT_BUS],factory:({dependencies:i})=>{let e=new Zo(i);return e.addMiddleware(new Wo),e.addMiddleware(new Jo),e}})});var ui,Xo=f(()=>{ui=class{enqueue(){throw new Error("Method not implemented")}}});var ea,nm=f(()=>{bt();Xo();jo();ea=class extends ui{constructor({analyticsMessageFactory:t,eventBus:r,logger:s,api:n,batchLimit:o=30,intervalMs:a=500}){super();y(this,"_name","DelayedQueue");this._eventBus=r,this._logger=s,this._messageFactory=t,this._logger.setContext(`Analytics Queue: ${this._name}`),this._logger.setLevel(2),this._queue=[],this._api=n,this._intervalMs=a,this._batchLimit=o,this._isProcessing=!1,this._intervalId=null}enqueue(t){let r=this._queue[this._queue.length-1];if(r&&r.size<this._batchLimit){r.addEvent(t);return}this._queue.push(this._messageFactory.create({events:[t]}))}start(){this._processQueue(),this._intervalId=setInterval(()=>{this._processQueue()},this._intervalMs)}stop(){clearInterval(this._intervalId)}_processQueue(){return T(this,null,function*(){if(this._isProcessing)return;let t=this._queue.shift();if(t!=null&&t.size)try{this._isProcessing=!0,yield this._api.send(t.getJSON())}catch(r){this._logger.warning(["Failed to process queue",r]),this._eventBus.emit(Cr.ERROR,r)}finally{this._isProcessing=!1}})}}});var ws,om=f(()=>{jo();Xo();ws=class extends ui{constructor({analyticsMessageFactory:t,eventBus:r,logger:s,api:n,reportErrors:o=!0}){super();y(this,"_name","ImmediateQueue");this._eventBus=r,this._logger=s,this._messageFactory=t,this._logger.setContext(`Analytics Queue: ${this._name}`),this._logger.setLevel(2),this._queue=[],this._api=n,this._reportErrors=o,this._isProcessing=!1}enqueue(t){this._queue.push(this._messageFactory.create({events:[t]})),this._processQueue()}_processQueue(){return T(this,null,function*(){for(;this._queue.length;)try{let t=this._queue.shift();if(!(t!=null&&t.size))continue;yield this._api.send(t.getJSON())}catch(t){this._logger.warning(["Failed to process queue",t]),this._reportErrors&&this._eventBus.emit(Cr.ERROR,t)}})}}});var Ts,am=f(()=>{Xo();Ts=class extends ui{constructor({analyticsMessageFactory:t,logger:r,api:s}){super();y(this,"_name","BeaconQueue");this._messageFactory=t,this._api=s,this._logger=r,this._logger.setContext(`Analytics Queue: ${this._name}`),this._logger.setLevel(2),this._queue=[]}enqueue(t){let r=this._messageFactory.create({events:[t]});this._sendBeacon(r)}_sendBeacon(t){try{this._api.sendBeacon(t.getJSON())}catch(r){this._logger.warning(["Failed to send beacon",r])}}}});var dm=f(()=>{nm();om();am()});var zl,ta,ia,lm=f(()=>{U();dm();bt();F();zl=[l.EVENT_BUS,l.LOGGER,{token:l.DATA_COLLECTOR_API,alias:"api"},l.ANALYTICS_MESSAGE_FACTORY],ta=class extends ea{constructor(){super(...arguments);y(this,"_name",l.MAIN_QUEUE)}},ia=class extends ws{constructor(){super(...arguments);y(this,"_name",l.IMMEDIATE_QUEUE)}};A.class(ta,{token:l.MAIN_QUEUE,defaultAlias:"mainQueue",dependencies:zl,factory:({dependencies:i})=>new ta(V(b({},i),{batchLimit:30,intervalMs:500}))});A.class(ia,{token:l.ERROR_QUEUE,defaultAlias:"errorQueue",dependencies:zl,factory:({dependencies:i})=>new ia(V(b({},i),{reportErrors:!1}))});A.class(ws,{token:l.IMMEDIATE_QUEUE,defaultAlias:"immediateQueue",dependencies:zl});A.class(Ts,{token:l.BEACON_QUEUE,defaultAlias:"beaconQueue",dependencies:[l.ANALYTICS_MESSAGE_FACTORY,l.LOGGER,l.EVENT_BUS,{token:l.DATA_COLLECTOR_API,alias:"api"}],factory:({dependencies:i})=>new Ts({analyticsMessageFactory:i.analyticsMessageFactory,api:i.api,eventBus:i.eventBus,logger:i.logger})})});var Yi=f(()=>{Bp();bt();Hp();qi();sm();lm()});var fm=Ti((ra,cm)=>{(function(i,e){typeof ra=="object"?cm.exports=ra=e(Zn()):typeof define=="function"&&define.amd?define(["./core"],e):e(i.CryptoJS)})(ra,function(i){return function(e){var t=i,r=t.lib,s=r.WordArray,n=r.Hasher,o=t.algo,a=[],d=[];(function(){function p(I){for(var S=e.sqrt(I),g=2;g<=S;g++)if(!(I%g))return!1;return!0}function m(I){return(I-(I|0))*4294967296|0}for(var h=2,_=0;_<64;)p(h)&&(_<8&&(a[_]=m(e.pow(h,1/2))),d[_]=m(e.pow(h,1/3)),_++),h++})();var c=[],u=o.SHA256=n.extend({_doReset:function(){this._hash=new s.init(a.slice(0))},_doProcessBlock:function(p,m){for(var h=this._hash.words,_=h[0],I=h[1],S=h[2],g=h[3],E=h[4],L=h[5],k=h[6],$=h[7],H=0;H<64;H++){if(H<16)c[H]=p[m+H]|0;else{var we=c[H-15],Te=(we<<25|we>>>7)^(we<<14|we>>>18)^we>>>3,ee=c[H-2],et=(ee<<15|ee>>>17)^(ee<<13|ee>>>19)^ee>>>10;c[H]=Te+c[H-7]+et+c[H-16]}var Ye=E&L^~E&k,Pt=_&I^_&S^I&S,St=(_<<30|_>>>2)^(_<<19|_>>>13)^(_<<10|_>>>22),It=(E<<26|E>>>6)^(E<<21|E>>>11)^(E<<7|E>>>25),xt=$+It+Ye+d[H]+c[H],Ji=St+Pt;$=k,k=L,L=E,E=g+xt|0,g=S,S=I,I=_,_=xt+Ji|0}h[0]=h[0]+_|0,h[1]=h[1]+I|0,h[2]=h[2]+S|0,h[3]=h[3]+g|0,h[4]=h[4]+E|0,h[5]=h[5]+L|0,h[6]=h[6]+k|0,h[7]=h[7]+$|0},_doFinalize:function(){var p=this._data,m=p.words,h=this._nDataBytes*8,_=p.sigBytes*8;return m[_>>>5]|=128<<24-_%32,m[(_+64>>>9<<4)+14]=e.floor(h/4294967296),m[(_+64>>>9<<4)+15]=h,p.sigBytes=m.length*4,this._process(),this._hash},clone:function(){var p=n.clone.call(this);return p._hash=this._hash.clone(),p}});t.SHA256=n._createHelper(u),t.HmacSHA256=n._createHmacHelper(u)}(Math),i.SHA256})});var pm=Ti((sa,um)=>{(function(i,e){typeof sa=="object"?um.exports=sa=e(Zn()):typeof define=="function"&&define.amd?define(["./core"],e):e(i.CryptoJS)})(sa,function(i){return function(){var e=i,t=e.lib,r=t.WordArray,s=t.Hasher,n=e.algo,o=[],a=n.SHA1=s.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(d,c){for(var u=this._hash.words,p=u[0],m=u[1],h=u[2],_=u[3],I=u[4],S=0;S<80;S++){if(S<16)o[S]=d[c+S]|0;else{var g=o[S-3]^o[S-8]^o[S-14]^o[S-16];o[S]=g<<1|g>>>31}var E=(p<<5|p>>>27)+I+o[S];S<20?E+=(m&h|~m&_)+1518500249:S<40?E+=(m^h^_)+1859775393:S<60?E+=(m&h|m&_|h&_)-1894007588:E+=(m^h^_)-899497514,I=_,_=h,h=m<<30|m>>>2,m=p,p=E}u[0]=u[0]+p|0,u[1]=u[1]+m|0,u[2]=u[2]+h|0,u[3]=u[3]+_|0,u[4]=u[4]+I|0},_doFinalize:function(){var d=this._data,c=d.words,u=this._nDataBytes*8,p=d.sigBytes*8;return c[p>>>5]|=128<<24-p%32,c[(p+64>>>9<<4)+14]=Math.floor(u/4294967296),c[(p+64>>>9<<4)+15]=u,d.sigBytes=c.length*4,this._process(),this._hash},clone:function(){var d=s.clone.call(this);return d._hash=this._hash.clone(),d}});e.SHA1=s._createHelper(a),e.HmacSHA1=s._createHmacHelper(a)}(),i.SHA1})});var gt,na,hm,mm,gm,_m,aA,dA,Em,ym,Sm,Im,ql,Pr,Am,vs,bm,wm,Tm,vm,Yl,Rs,$l,Vt,Rm,Om,Cm,Pm,xm,Dm,Ze,Nm,q,Mm,km,Lm,Bm,Fm,Os,Um,Cs,Gm,I0,Ht=f(()=>{gt={ALL_DISABLED:"disabled",ALL_ENABLED:"enabled",TEST_PARTNERS:"test"},na={criteo:{itfPosition:0,itfTestPercent:.95,enabled:void 0},uid2:{itfPosition:1,itfTestPercent:.95,enabled:void 0},fabrickId:{itfPosition:2,itfTestPercent:.95,enabled:void 0},hadronId:{itfPosition:3,itfTestPercent:.95,enabled:void 0},id5Id:{itfPosition:4,itfTestPercent:.95,enabled:void 0},pairId:{itfPosition:5,itfTestPercent:.95,enabled:void 0},"33acrossId":{itfPosition:6,itfTestPercent:.95,enabled:void 0},sharedId:{itfPosition:7,itfTestPercent:.95,enabled:void 0},connectid:{itfPosition:8,itfTestPercent:.95,enabled:void 0},identityLink:{itfPosition:9,itfTestPercent:.95,enabled:void 0},liveIntentId:{itfPosition:11,itfTestPercent:.95,enabled:void 0},unifiedId:{itfPosition:12,itfTestPercent:.95,enabled:void 0},intentIqId:{itfPosition:13,itfTestPercent:.95,enabled:!0},carbon:{itfPosition:14,itfTestPercent:.95,enabled:void 0},airgrid:{itfPosition:15,itfTestPercent:.95,enabled:void 0},linkedInAdsId:{itfPosition:16,itfTestPercent:.95,enabled:void 0},symitri:{itfPosition:17,itfTestPercent:.95,enabled:void 0},gamera:{itfPosition:18,itfTestPercent:.95,enabled:void 0},optable:{itfPosition:19,itfTestPercent:.95,enabled:void 0}},hm=.01,mm=.01,gm=` @import url('https://fonts.googleapis.com/css2?family=Varela+Round&display=swap'); .__fs-modal__overlay { position: absolute; z-index: 10000; top: 0; right: 0; bottom: 0; left: 0; background-color: rgba(255,255,255,0.75); display: flex; align-items: center; justify-content: center; } .__fs-modal { font-family: 'Varela Round', sans-serif !important; font-size: 16px; width: 45vw; border-radius: 5px; background-color: white; box-shadow: 0 10px 25px 0 rgb(0 195 137 / 50%); border: 1px solid rgb(0 195 137); } .__fs-modal__content { margin: 1rem; padding: 1rem; height: calc(100% - 2rem); } .__fs-modal__header { width: 100%; text-align: left; font-size: 2rem; } h2.__fs-modal__header { border-bottom: 3px solid rgb(0 195 137); margin-bottom: 1rem; } h3.__fs-modal__header { font-size: 1.5rem; } .__fs-modal__description { width: 100%; font-size: 1rem; margin-bottom: .75rem; } .__fs-modal__content span { width: 100%; font-size: 1.25rem; display: flex; align-items: center; justify-content: space-between; } .__fs-modal__content span input, .__fs-modal__content span button { width: 100%; font-size: 1.25em; padding: .25rem; } .__fs-modal__content span button { border: 0; border-radius: 5px; background-color: rgb(0 195 137); color: white; font-family: 'Varela Round', sans-serif !important; } @media only screen and (min-device-width : 320px) and (max-device-width : 768px) { .__fs-modal { width: 100vw; border-radius: 0; background-color: white; box-shadow: initial; border: 0; position: fixed; top: 0; bottom: 0; } } `,_m=`<div class="__fs-modal"><form class="__fs-modal__content"><h2 class="__fs-modal__header">Welcome!</h2><p class="__fs-modal__description">Our trusted advertising partners using the UID identifier and/or encrypted email addresses are committed to delivering relevant advertising that also respects your choice. Advertising enables access to your favorite content across the internet.</p><h3 class="__fs-modal__header">Opt-Out</h3><p class="__fs-modal__description">Your choice to Opt-Out will indicate to trusted advertising partners that you no longer wish to receive targeted advertising based on your UID/email. The scope of this Opt-Out is limited to this site which use UID/email. For choice with respect to advertising based on cookies, please visit https://optout.aboutads.info. To opt out of UID across all sites please visit <a href="https://transparentadvertising.org/" target="_blank">https://transparentadvertising.org/</a></p><p class="__fs-modal__description">Note: this choice may limit your ability to access ad supported content. You may be asked to Opt-In again in the future to access such content.</p><span><button type="submit" id="__fs-model__submit">OPT OUT</button>&nbsp; <button id="__fs-model__cancel">CANCEL</button></span></form></div>`,aA="serverPublicKey",dA="subscriptionId",Em="emailHash",ym=[aA,dA],Sm="fs_liveintent",Im="liveIntentId",ql=.95,Pr="carbon",Am="4d97a662ad",vs="airgrid",bm="PV483g",wm="FpZbsa",Tm="cdeffa51-8532-473f-8ba0-200d751fd73e",vm="https://pb-ing.ccgateway.net",Yl={PARENT_ID:"parentId",ENDPOINT:"endpoint",ANALYTICS_ENDPOINT:"analyticsEndpoint"},Rs="hadronId",$l=474,Vt="symitri",Rm="freestar.dap.symitri.net",Om="x1",Cm="compositeid",Pm="HEM:",xm=708,Dm="https://prodsymitriapp.azurewebsites.net/v1/impression",Ze="gamera",Nm=[vs,Pr,Vt,Ze],q={FABRICK_ID:"fabrickId",CONNECT_ID:"connectid",ID5_ID:"id5Id",LIVEINTENT_ID:"liveIntentId",UID2:"uid2",IDENTITY_LINK:"identityLink",AMAZON:"amazon",CRITEO:"criteo",OPTABLE:"optable"},Mm=40,km=64,Lm=32,Bm=2,Fm=106,Os="optable",Um="https://freestar.solutions.cdn.optable.co/public-assets/freestar-sdk.js",Cs="intentIqId",Gm="https://a.pub.network/core/intentIQ/20250618/IIQUniversalID.js",I0=q.CONNECT_ID});var vt,jl=f(()=>{le();vt=class{static normalizeEmail(e){if(!(e!=null&&e.length))return;let t=e.trim().toLowerCase();if(t.includes(" "))return;let r=this.splitEmailIntoAddressAndDomain(t);if(!r)return;let{address:s,domain:n}=r,o=this.isGmail(n),a=this.normalizeAddressPart(s,o,o);return a?`${a}@${n}`:void 0}static bytesToBase64(e){let t=Array.from(e,r=>String.fromCodePoint(r)).join("");return btoa(t)}static hashUID2(e){let t=new Uint8Array(e.match(/[\da-f]{2}/gi).map(function(r){return parseInt(r,16)}));return this.bytesToBase64(new Uint8Array(t))}static splitEmailIntoAddressAndDomain(e){let t=e.split("@");if(!(t.length!==2||t.some(r=>r==="")))return{address:t[0],domain:t[1]}}static isGmail(e){return e===this.GMAIL_DOMAIN}static dropExtension(e){return e.split(this.EMAIL_EXTENSION_SYMBOL)[0]}static normalizeAddressPart(e,t,r){let s=e;return t&&(s=Yu(s,this.EMAIL_DOT,"")),r&&(s=this.dropExtension(s)),s}};y(vt,"EMAIL_EXTENSION_SYMBOL","+"),y(vt,"EMAIL_DOT","."),y(vt,"GMAIL_DOMAIN","gmail.com")});var Kl,Vm,Hm=f(()=>{Ht();Kl=(i,e,t)=>(i==null?void 0:i.length)===e?{[t]:i}:{},Vm=i=>{let e=b(b(b({},Kl(i==null?void 0:i.sha256,km,"sha256")),Kl(i==null?void 0:i.sha1,Mm,"sha1")),Kl(i==null?void 0:i.md5,Lm,"md5"));return e.sha256||console.warn("Limited support with ID partners due to invalid sha256",i==null?void 0:i.sha256),e}});var zm,qm,Ym,Wl,$m=f(()=>{zm=Xi(fm()),qm=Xi(pm()),Ym=Xi(rl());Ht();jl();hr();te();U();F();Yi();le();Ci();Hm();Re();Wl=class{constructor({identityConfig:i,hashedEmailProviderManager:e,realtimeProvidersManager:t,logger:r,analytics:s,gamManager:n,win:o=window}){y(this,"targeting","----------------------------------------");y(this,"hashedEmailsPassed",!1);y(this,"messageSent",!1);y(this,"prebidNonRealTimeProvidersConfig",null);this._window=o,this._gamManager=n,this._identityConfig=i,this._analytics=s,this._logger=r,this._logger.setContext(l.IDENTITY_MANAGER),this.hashedEmailProviders=e,this.realtimeProviders=t,this._populatePrebidNonRealTimeProvidersConfig(),this._initializeLiveIntentHIRO()}init(){var i;this._logger.log((i=this._identityConfig.identityProviders)!=null&&i.length?`Eligible providers: ${this._identityConfig.identityProviders.map(e=>e.slug)}`:"No Eligible Providers"),this.hashedEmailProviders.initializeProviders(),this.realtimeProviders.loadScripts(),this._createTargeting(),this._logger.log(`Targeting: ${JSON.stringify(this.targeting)}`),this._setGamTargeting(),this._sendEventMessages(this._identityConfig.providersRules)}_hasIdentitySet(){return!!this._identityConfig.identityData&&!!Object.keys(this._identityConfig.identityData).length}setIdentity({email:i,hashes:e}={}){return i||e?(i&&Km({email:i})&&this._setIdentityFromEmail(i),e&&this._setIdentityFromHashes(e),this._sendEventMessages(this._identityConfig.providersRules),!0):(this._logger.error("setIdentity requires at least one parameter: email or hashes"),!1)}_updateProviders(i){this.hashedEmailProviders.updateAllProviders(i,!1)}_setIdentityFromHashes(i){let e=Vm(i);if(!Object.keys(e).length)return console.warn("Invalid hashes: ",i),!1;this._identityConfig.setIdentityData(e),this._updateProviders(e)}_setIdentityFromEmail(i){let e=vt.normalizeEmail(i),t={sha256:(0,zm.default)(e).toString(),sha1:(0,qm.default)(e).toString(),md5:(0,Ym.default)(e).toString()};this._identityConfig.setIdentityData(t),this._updateProviders(t)}showModal(){jm(gm);let i=B({classList:["__fs-modal__overlay"]});i.innerHTML=_m,this._window.document.body.appendChild(i);let e=this._window.document.getElementById("__fs-model__submit"),t=this._window.document.getElementById("__fs-model__cancel");e.onclick=r=>T(this,null,function*(){r.preventDefault(),this._identityConfig.removeIdentityDataFromSessionStorage(),this.hashedEmailProviders.updateAllProviders({},this._identityConfig.testGroup,!1),i.remove(),je({name:"identityModalOptOut",detail:!0})}),t.onclick=r=>{r.preventDefault(),i.remove(),je({name:"identityModalClosed",detail:!0})}}addOptOut({selector:i="#freestarOptOutLink",element:e=!1}){if(e=e!=null?e:document.querySelector(i),!e)return!1;e.onclick=t=>{t.preventDefault(),this.showModal()}}_createTargeting(){if(this._identityTrackingDisabled){this.targeting="0";return}let i=this._identityConfig.identityProviders.filter(({slug:e})=>e).map(({slug:e})=>e.toLowerCase());Object.entries(this._identityConfig.providersRules).forEach(([e,t])=>{var r;if((i.includes(e.toLowerCase())||e==="gamera")&&typeof t.enabled=="boolean"){let s=this.targeting.split("");s[t.itfPosition]=t.enabled?(r=t.itfValue)!=null?r:"Y":"N",this.targeting=s.join("")}})}_setGamTargeting(){if(this._gamManager.setGlobalTargeting(de.ITF,this.targeting),this.targeting==="0")return;let i=na[Im].itfPosition||-1,e=this.targeting.length>0&&this.targeting[i];["Y","N"].includes(e)&&this._gamManager.setGlobalTargeting(Sm,e)}get _identityTrackingDisabled(){return!(this._identityConfig.itfY||this._identityConfig.itf_n)&&this._identityConfig.testGroup===gt.ALL_DISABLED}_normalizeStorageConfig(config={}){let{refreshInSeconds,expires}=config!=null?config:{};try{return V(b({},config),{refreshInSeconds:eval(refreshInSeconds),expires:eval(expires)})}catch(i){return config}}_populatePrebidNonRealTimeProvidersConfig(){if(this._identityTrackingDisabled)return[];this.prebidNonRealTimeProvidersConfig=this._identityConfig.identityProviders.filter(({slug:i})=>!Nm.includes(i)&&this._identityConfig.checkIfProviderEnabled(i)&&this._identityConfig.checkIfProviderIsAllowedInGeo(i)&&Os!==i&&Cs!==i).map(({slug:i,params:e,storage:t})=>{var s,n,o,a,d,c,u,p;let r=b(b({name:i},Object.keys(e||{}).length!==0?{params:e}:{}),Object.keys(t||{}).length!==0?{storage:b({},this._normalizeStorageConfig(t))}:{});switch(i){case"uid2":if((s=this._identityConfig.identityData)!=null&&s.sha256){let m=this.hashedEmailProviders.getProviderConfigByName(i,this._identityConfig.identityData);r.params=Object.assign(r.params,m.params)}break;case"merkleId":r.params=Object.assign(r.params,{sv_domain:window.location.hostname});break;case"pairId":if((n=r.params)!=null&&n.liveramp){let m=xd("liveramp",r.params);r.params=Object.assign(r.params,{liveramp:m})}break;case"liveIntentId":if((o=r.params)!=null&&o.requestedAttributesOverrides){let m=xd("requestedAttributesOverrides",r.params);if(typeof m=="object"&&!Array.isArray(m)&&m!==null&&Object.keys(m).forEach(h=>{let _=["nonId","uid2","medianet","magnite","bidswitch","pubmatic","openx","sovrn","index","thetradedesk","triplelift","vidazoo","sonobi","sharethrough","nexxen"];m[h]=_.includes(h)&&m[h]==="true"}),r.params=Object.assign(r.params,{requestedAttributesOverrides:m}),(a=this._identityConfig.identityData)!=null&&a.sha1||(d=this._identityConfig.identityData)!=null&&d.md5){let h=this.hashedEmailProviders.getProviderConfigByName(i,this._identityConfig.identityData);h.emailHash&&(r.params.emailHash=h.params.emailHash)}}break;case"connectid":if((c=this._identityConfig.identityData)!=null&&c.sha256){let m=this.hashedEmailProviders.getProviderConfigByName(i,this._identityConfig.identityData);r.params=Object.assign(r.params,m.params)}else{let{pixelId:m}=r.params||{};if(!m)break;let h=Q({key:"fs.config",type:K.object.type}),_=h==null?void 0:h.fsuid,I=b({pixelId:m},_?{puid:_}:{});Object.assign(r.params,I)}break;case q.FABRICK_ID:if((u=this._identityConfig.identityData)!=null&&u.sha256){let m=this.hashedEmailProviders.getProviderConfigByName(i,this._identityConfig.identityData);r.params=Object.assign(r.params,m.params)}break;case q.ID5_ID:if((p=this._identityConfig.identityData)!=null&&p.sha256){let m=this.hashedEmailProviders.getProviderConfigByName(i,this._identityConfig.identityData);r.params=Object.assign(r.params,m.params)}break}return r})}_sendEventMessages(i){var r,s;let e={};i&&typeof i=="object"&&!Array.isArray(i)&&(e=Object.keys(i).reduce((n,o)=>(i[o].enabled?n.available.push(o):n.unavailable.push(o),n),{available:[],unavailable:[]}));let t=e&&(((r=e.available)==null?void 0:r.length)||((s=e.unavailable)==null?void 0:s.length));!this.messageSent&&this._hasIdentitySet()&&t&&(e.hemsAvailability=this.hashedEmailProviders.getHashesSentByProvider(),this._logger.log(`HEM types sent: ${JSON.stringify(e.hemsAvailability)}`),this._analytics.track(new X({eventType:"IDENTITY",eventName:"HASHED_EMAIL_PROVIDERS",data:e})),this.messageSent=!0)}_initializeLiveIntentHIRO(){this._window.liModuleEnabled===void 0&&(this._window.liModuleEnabled=Math.random()<ql,this._window.liTreatmentRate=ql)}};A.class(Wl,{token:l.IDENTITY_MANAGER,dependencies:[l.IDENTITY_CONFIG,l.HASHED_EMAIL_PROVIDERS,l.REALTIME_PROVIDERS,l.LOGGER,l.ANALYTICS,l.OPTABLE_MANAGER,l.IIQ_MANAGER,l.GAM_MANAGER,{token:"window",alias:"win"}]})});var oa,Wm=f(()=>{F();_e();U();Ht();Ro();oa=class{constructor({dispensaryData:e,logger:t,identityConfig:r,prebidManager:s,gamManager:n,win:o=window}){y(this,"_atsKey","ats");y(this,"version",2);y(this,"atsEnabled",!1);this._window=o,this._identityConfig=r,this._dispensaryData=e,this._prebidManager=s,this._gamManager=n,this._instance=null,this._logger=t,this._lastATSIdentityData=null,this._logger.setContext(l.ATS_MANAGER),this._init()}_init(){if(!this._identityConfig.checkIfProviderEnabled(q.IDENTITY_LINK)||!this._isGeoAllowed)return;this.atsEnabled=this._dispensaryData.fsdata.atsEnabledV2,this.atsEnabled&&(this._gamManager.setGlobalTargeting({key:"atsd",value:[]}),this._loadScript()),(this._dispensaryData.fsdata.atsAnalyticsEnabled!==null&&this._dispensaryData.fsdata.atsAnalyticsEnabled!==void 0?this._dispensaryData.fsdata.atsAnalyticsEnabled:this._dispensaryData.fsdata.atsEnabledV2)&&this._enablePrebidAnalytics()}get _isGeoAllowed(){var t;let e=(t=this._dispensaryData.locData)==null?void 0:t.iso;return e?this._identityConfig.checkIfProviderIsAllowedInGeo(q.IDENTITY_LINK)?!0:(this._logger.log(`LiveRamp ATS does not run for users in ${e}.`,{level:10}),!1):(this._logger.log("LiveRamp ATS does not run for users "+(e?`in ${e}.`:"without location data."),{level:10}),!1)}getConfigV2(){let e=this._identityConfig.identityData;return e?{id:Object.values(e),type:"emailHashes"}:{}}_enablePrebidAnalytics(){var r,s;let e=this._identityConfig.identityProviders.find(n=>n.id===Bm),t=(s=(r=e==null?void 0:e.params)==null?void 0:r.pid)!=null?s:Fm;this._prebidManager.instance.enableAnalytics([{provider:"atsAnalytics",options:{pid:t}}])}get _atsURL(){return`https://launchpad-wrapper.privacymanager.io/${this._dispensaryData.fsdata.atsV2ConfigUUID}/launchpad-liveramp.js`}_loadScript(){Ee(this._atsURL,()=>{Tr({getIsFound:()=>{var e;return!!((e=this._window[this._atsKey])!=null&&e.setAdditionalData)},callback:()=>{this._instance=this._window[this._atsKey],this.setConfig()},timeout:60*1e3})})}_hasValidIdentityData(e){return!e||Object.keys(e).length===0?!1:e.id&&(Array.isArray(e.id)?e.id.length>0:e.id.trim()!=="")}setConfig(){var t;let e=this.getConfigV2();if(!this._hasValidIdentityData(e)){this._logger.log(["Skipping LiveRamp ATS setAdditionalData - no meaningful identity data:",e],{level:10});return}if(this._lastATSIdentityData&&JSON.stringify(this._lastATSIdentityData)===JSON.stringify(e)){this._logger.log("Skipping LiveRamp ATS setAdditionalData - identity data unchanged",{level:10});return}this._logger.log("LiveRamp ATS setAdditionalData called with identity data",{level:10}),(t=this._instance)==null||t.setAdditionalData(e),this._lastATSIdentityData=e}};A.class(oa,{token:l.ATS_MANAGER,dependencies:[l.DISPENSARY_DATA,{token:"window",alias:"win"},l.LOGGER,l.IDENTITY_CONFIG,l.PREBID_MANAGER,l.GAM_MANAGER],factory:e=>T(void 0,[e],function*({dependencies:i}){return yield i.prebidManager.ready,new oa(b({},i))})})});var dt,Qm=f(()=>{dt=Object.freeze({SHA256:"sha256",SHA1:"sha1",MD5:"md5"})});var aa,Jm=f(()=>{Ht();jl();U();F();Qm();Re();aa=class{constructor({identityConfig:e,dispensaryData:t,atsManager:r,prebidManager:s,amazonManager:n,win:o=window}){this._prebid=s,this._amazon=n,this._ats=r,this._identityConfig=e,this._dispensaryData=t,this._window=o,this._hashesSentByProvider={}}_recordHashSent(e,t){this._hashesSentByProvider[e]||(this._hashesSentByProvider[e]=new Set),this._hashesSentByProvider[e].add(t)}getProviderConfigByName(e,t={}){switch(e){case q.FABRICK_ID:return this._getFabrickConfig(t);case q.CONNECT_ID:return this._getYahooConfig(t);case q.ID5_ID:return this._getID5Config(t);case q.LIVEINTENT_ID:return this._getLiveIntentConfig(t);case q.UID2:return this._getUid2Config(t);case q.CRITEO:return this._getCriteoConfig(t);default:return{}}}getHashesSentByProvider(){let e={};for(let[t,r]of Object.entries(this._hashesSentByProvider))e[t]=Array.from(r).sort();return e}_resetHashesSentByProvider(){this._hashesSentByProvider={}}updateAllProviders(e={},t){if(!(!this._identityConfig.testGroup||this._identityConfig.testGroup===gt.ALL_DISABLED)){if(this._resetHashesSentByProvider(),this._identityConfig.checkIfProviderEnabled(q.AMAZON)&&this._hasSha256(e)&&this._amazon.isEnabled&&this._updateAmazon(e,t),this._identityConfig.checkIfProviderEnabled(q.IDENTITY_LINK)&&this._updateATS(),this._identityConfig.checkIfProviderEnabled(q.FABRICK_ID)&&this._updatePrebidUserSyncConfig(this._getFabrickConfig(e)),this._identityConfig.checkIfProviderEnabled(q.CONNECT_ID)&&this._updatePrebidUserSyncConfig(this._getYahooConfig(e)),this._identityConfig.checkIfProviderEnabled(q.ID5_ID)&&this._updatePrebidUserSyncConfig(this._getID5Config(e)),this._identityConfig.checkIfProviderEnabled(q.LIVEINTENT_ID)&&this._updatePrebidUserSyncConfig(this._getLiveIntentConfig(e)),this._identityConfig.checkIfProviderEnabled(q.UID2)&&this._updatePrebidUserSyncConfig(this._getUid2Config(e)),this._identityConfig.checkIfProviderEnabled(q.CRITEO)){let r=this._getCriteoConfig(e);r&&this._prebid.instance.setBidderConfig(r,!0)}if(this._identityConfig.checkIfProviderEnabled(q.OPTABLE)){let r=this._getOptableConfig(e);if(r)try{window.optable=window.optable||{cmd:[]},window.optable.cmd.push(()=>{var s,n;(n=(s=window.optable)==null?void 0:s.freestar_auth)==null||n.identify("e:"+r)})}catch(s){console.warn(s)}}this._prebid.instance.refreshUserIds()}}initializeProviders(){if(this._hasSha256(this._identityConfig.identityData)&&this._identityConfig.testGroup!==gt.ALL_DISABLED&&this._amazon.isEnabled&&this._initializeAmazon(this._identityConfig.identityData),this._identityConfig.checkIfProviderEnabled(q.CRITEO)){let e=this._getCriteoConfig(this._identityConfig.identityData);e&&this._prebid.instance.setBidderConfig(e,!0)}}_hasSha256(e){return typeof(e==null?void 0:e.sha256)!="undefined"}_initializeAmazon(e){var t;(t=this._amazon.instance)==null||t.renewId({hashedRecords:[{type:"email",record:e.sha256}]})}_getConfigBySlug(e){return this._identityConfig.identityProviders.find(({slug:t})=>t===e)}_getCriteoConfig(e){if(e!=null&&e.sha256||e!=null&&e.md5){e!=null&&e.sha256&&this._recordHashSent(q.CRITEO,dt.SHA256),e!=null&&e.md5&&this._recordHashSent(q.CRITEO,dt.MD5);try{return{bidders:["criteo"],config:{ortb2:{user:{ext:{data:{eids:[{source:this._window.location.hostname,uids:[...e.md5?[{id:e.md5,atype:3,ext:{stype:"hemmd5"}}]:[],...e.sha256?[{id:e.sha256,atype:3,ext:{stype:"hemsha256"}}]:[]]}]}}}}}}}catch(t){return}}}_getFabrickConfig(e){if(this._dispensaryData.locData.iso){let r=this._getConfigBySlug(q.FABRICK_ID);if(this._hasSha256(e)&&r)return this._recordHashSent(q.FABRICK_ID,dt.SHA256),{name:q.FABRICK_ID,params:V(b({},r.params),{e:e.sha256}),storage:r.storage}}return{}}_getYahooConfig(e){let t=this._getConfigBySlug(q.CONNECT_ID),r=Q({key:"fs.config",type:K.object.type}),s=r&&r.fsuid?r.fsuid:void 0;return this._hasSha256(e)&&t?(this._recordHashSent(q.CONNECT_ID,dt.SHA256),{name:t.slug,params:b(V(b({},t.params),{he:e.sha256}),s?{puid:s}:{}),storage:t.storage}):{}}_getID5Config(e){var r,s;let t=(s=(r=this._getConfigBySlug(q.ID5_ID))==null?void 0:r.params)==null?void 0:s.partner;if(this._hasSha256(e)&&t){this._recordHashSent(q.ID5_ID,dt.SHA256);let n={1:e.sha256},o=Object.keys(n).map(d=>d+"="+n[d]).join("&"),a=btoa(o);return{name:q.ID5_ID,params:{partner:t,pd:a}}}return{}}_getLiveIntentConfig(e){var s,n;let t=this._getConfigBySlug(q.LIVEINTENT_ID),r=(n=(s=e==null?void 0:e.sha1)!=null?s:e==null?void 0:e.sha256)!=null?n:e==null?void 0:e.md5;if(typeof r!="undefined"&&t){e.sha1?this._recordHashSent(q.LIVEINTENT_ID,dt.SHA1):e.sha256?this._recordHashSent(q.LIVEINTENT_ID,dt.SHA256):e.md5&&this._recordHashSent(q.LIVEINTENT_ID,dt.MD5);try{return{name:q.LIVEINTENT_ID,params:V(b({},t.params),{emailHash:r}),storage:t.storage}}catch(o){return{}}}return{}}_getUid2Config(e){let t=this._getConfigBySlug(q.UID2);return!ym.every(s=>!!(t!=null&&t.params[s]))||!this._hasSha256(e)?{}:(this._recordHashSent(q.UID2,dt.SHA256),{name:q.UID2,params:V(b({},t.params),{[Em]:vt.hashUID2(e.sha256)}),storage:t.storage})}_getOptableConfig(e){return this._hasSha256(e)?(this._recordHashSent(q.OPTABLE,dt.SHA256),e.sha256):null}_updatePrebidUserSyncConfig(e){if(Object.keys(e).length===0)return;let t=this._prebid.instance.getConfig("userSync"),r=t.userIds.find(({name:s})=>s.toLowerCase()===e.name.toLowerCase());if(r){let s=t.userIds.filter(({name:n})=>n.toLowerCase()!==e.name.toLowerCase());t.userIds=[...s,b(b({},r),e)],this._prebid.instance.mergeConfig({userSync:t})}}_updateAmazon(e,t){var r;this._recordHashSent(q.AMAZON,dt.SHA256),(r=this._amazon.instance)==null||r.updateId({optOut:t,hashedRecords:[{type:"email",record:e.sha256}]})}_updateATS(){this._window.addEventListener("pairIdEnvelopePresent",()=>{this._prebid.instance.refreshUserIds()}),this._window.addEventListener("lrEnvelopePresent",()=>{this._prebid.instance.refreshUserIds()}),this._ats.setConfig()}};A.class(aa,{token:l.HASHED_EMAIL_PROVIDERS,dependencies:[l.IDENTITY_CONFIG,l.DISPENSARY_DATA,l.ATS_MANAGER,l.PREBID_MANAGER,l.AMAZON_MANAGER,{token:"window",alias:"win"}],factory:e=>T(void 0,[e],function*({dependencies:i}){return yield i.prebidManager.ready,new aa(i)})})});var da,Zm=f(()=>{Ht();le();U();F();da=class{constructor({identityConfig:e,dispensaryData:t,prebidManager:r,logger:s,win:n=window}){y(this,"HADRON_NAME","_hadron");y(this,"HADRON_SRC","https://cdn.hadronid.net/hadron.js");y(this,"GAMERA_SRC","https://metrics.rapidedge.io/gamera.js?ltv=1&audience=1&tpcs=1&partner=freestar");y(this,"prebidAnalyticProviders",[]);y(this,"prebidRealTimeDataProviders",[]);this._window=n,this._logger=s,this._logger.setContext(l.REALTIME_PROVIDERS),this._identityConfig=e,this._prebidManager=r,this._dispensaryData=t,this._carbonInit(),this._hadronInit(),this._airgridInit(),this._permutiveInit(),this._gameraInit()}_getIdentityProviderConfigBySlug(e){return this._identityConfig.identityProviders.find(t=>(t==null?void 0:t.slug)===e)}_getConfigValue(e,t){if(e.params=e.params||{},!(ei(e.params[t])||e.params[t]===""))return e.params[t]}_getConfigValueOrDefault(e,t,r){return this._getConfigValue(e,t)||r}_getHadronId(e,t){let r=this._getConfigValue(e,"partnerId");return ei(r)||Number.isNaN(r)?t:typeof r!="number"&&!Number.isNaN(Number(r))?Number(r):r}_getUserIdValue(e,t){var r,s,n,o,a,d,c,u;if(this._identityConfig.checkIfProviderEnabled(e)&&this._identityConfig.checkIfProviderIsAllowedInGeo(e)){let p=(a=(o=(n=(s=(r=this._prebidManager.instance.getConfig())==null?void 0:r.userSync)==null?void 0:s.userIds)==null?void 0:n.find(({name:m})=>m===e))==null?void 0:o.storage)==null?void 0:a.name;return p?t?(c=(d=this._prebidManager.instance.getUserIds())==null?void 0:d[p])==null?void 0:c[t]:(u=this._prebidManager.instance.getUserIds())==null?void 0:u[p]:null}}_loadHadronScript(){let e=this._getIdentityProviderConfigBySlug(Rs);if(!(e&&this._identityConfig.checkIfProviderEnabled(Rs)))return;let t=this._getConfigValueOrDefault(e,"partnerId",$l);(function(r,s,n,o,a,d,c){r[d]=r[d]||function(){(r[d].q=r[d].q||[]).push(arguments)},r[d]({config:{dm:c}});let u=s.createElement(n);s.async=!0,u.src=o+"?url="+encodeURIComponent(r.location.href)+"&ref="+encodeURIComponent(s.referrer)+"&_it=freestar&partner_id="+a+"&ha="+d;let p=s.getElementsByTagName(n)[0];p.parentNode.insertBefore(u,p)})(window,document,"script",this.HADRON_SRC,t,this.HADRON_NAME,!0)}_carbonInit(){let e=this._getIdentityProviderConfigBySlug(Pr);if(!e||!this._identityConfig.checkIfProviderEnabled(Pr)||!this._identityConfig.checkIfProviderIsAllowedInGeo(Pr))return;let t=this._getConfigValueOrDefault(e,Yl.PARENT_ID,Am);if(!t)return;let r=this._getConfigValueOrDefault(e,Yl.ANALYTICS_ENDPOINT,vm);this.prebidAnalyticProviders.push({provider:Pr,options:{parentId:t,endpoint:r}})}_hadronInit(){let e=this._getIdentityProviderConfigBySlug(Rs);if(e&&this._identityConfig.checkIfProviderEnabled(Rs)){let t=this._getHadronId(e,"partnerId")||$l;t&&this.prebidRealTimeDataProviders.push({name:"hadron",waitForIt:!0,params:{partnerId:t}})}}_airgridInit(){let e=this._getIdentityProviderConfigBySlug(vs);if(e&&this._identityConfig.checkIfProviderEnabled(vs)){let t=this._getConfigValueOrDefault(e,"accountId",bm),r=this._getConfigValueOrDefault(e,"publisherId",wm),s=this._getConfigValueOrDefault(e,"apiKey",Tm),n={name:vs,waitForIt:!0,params:{apiKey:s,accountId:t,publisherId:r}},o=this._getConfigValue(e,"bidders");o&&(n.params.bidders=o.split(",").map(a=>a.trim())),this.prebidRealTimeDataProviders.push(n)}}_permutiveInit(){this._dispensaryData.fsdata.permutiveEnabled&&this.prebidRealTimeDataProviders.push({name:"permutive",waitForIt:!0,params:{acBidders:[this._dispensaryData.fsdata.permutiveBidders.split(",")]}})}get waitForUserSync(){return!!(this._getIdentityProviderConfigBySlug(Vt)&&this._identityConfig.checkIfProviderEnabled(Vt)&&this._identityConfig.checkIfProviderIsAllowedInGeo(Vt))}_symitriInit(){let e=this._getIdentityProviderConfigBySlug(Vt);if(!e||!this._identityConfig.checkIfProviderEnabled(Vt)||!this._identityConfig.checkIfProviderIsAllowedInGeo(Vt))return;let t=this._getConfigValueOrDefault(e,"apiHostname",Rm),r=this._getConfigValueOrDefault(e,"apiVersion",Om),s=this._getConfigValueOrDefault(e,"segtax",xm),n=this._getConfigValueOrDefault(e,"pixelUrl",Dm).trim(),o={},a=this._identityConfig.identityData;a!=null&&a.sha256&&(o.HEM=a==null?void 0:a.sha256);let d=this._getUserIdValue(q.ID5_ID,"uid");d&&(o.ID5=d);let c=this._getUserIdValue(q.IDENTITY_LINK);c&&(o.RampId=c);let u=Object.keys(o).reduce((m,h)=>(m.push(`${h}:${o[h]}`),m),[]).join(","),p={name:`${Vt}Dap`,waitForIt:!0,params:{apiHostname:t.trim(),apiVersion:r,domain:this._dispensaryData.fsdata.domain,segtax:s,pixelUrl:n,identityType:Cm,identityValue:u||Pm}};this.prebidRealTimeDataProviders.push(p)}_gameraInit(){if(!this._getIdentityProviderConfigBySlug(Ze)||!this._identityConfig.checkIfProviderEnabled(Ze)||!this._identityConfig.checkIfProviderIsAllowedInGeo(Ze))return;let t={name:Ze,waitForIt:!0};this.prebidRealTimeDataProviders.push(t)}_loadGameraScript(){if(!this._getIdentityProviderConfigBySlug(Ze)||!this._identityConfig.checkIfProviderEnabled(Ze)||!this._identityConfig.checkIfProviderIsAllowedInGeo(Ze))return;let t=document.createElement("script");t.src=this.GAMERA_SRC,t.type="text/javascript",t.async=!0,t.id="__gamera__",document.body.appendChild(t)}loadScripts(){this._loadHadronScript(),this._loadGameraScript()}getRtdProvidersConfig(){return this._symitriInit(),this.prebidRealTimeDataProviders}};A.class(da,{token:l.REALTIME_PROVIDERS,dependencies:[l.IDENTITY_CONFIG,l.DISPENSARY_DATA,l.PREBID_MANAGER,l.LOGGER,{token:"window",alias:"win"}],factory:e=>T(void 0,[e],function*({dependencies:i}){return yield i.prebidManager.ready,new da(i)})})});var Ql,Xm=f(()=>{Re();Ht();$e();dl();U();F();Ql=class{constructor({dispensaryData:e,logger:t}){y(this,"providersRules",[]);this._dispensaryData=e,this._logger=t,this._logger.setContext(l.IDENTITY_CONFIG),this.itfY=z("itf_y"),this.itf_n=z("itf_n"),this.identityData=this.identityDataFromSessionStorage,this.testTrafficPercentage=1-hm,this._populateIdentityTestGroup(),this._populateProviderRules()}get identityProviders(){return this._dispensaryData.fsdata.identityProviders||[]}get identityDataFromSessionStorage(){return Q({key:to,type:K.object.type})}setIdentityData(e){this.identityData=e,ve({key:to,value:e,type:K.object})}removeIdentityDataFromSessionStorage(){this.identityDataFromSessionStorage&&(nr({key:to}),this.identityData=null)}checkIfProviderEnabled(e){var t;return!this.providersRules[e]||((t=this.providersRules[e])==null?void 0:t.enabled)!==!1}checkIfProviderIsAllowedInGeo(e){var o,a;let t=(a=(o=this._dispensaryData)==null?void 0:o.locData)==null?void 0:a.iso;if(!t)return!1;let r=this.identityProviders.find(({slug:d})=>d===e);if(!r)return!1;let{disallowedGeos:s,allowedGeos:n}=r;return s!=null&&s.length?!s.includes(t):n!=null&&n.length?n.includes(t):!0}_populateProviderRules(){try{this.providersRules=JSON.parse(atob(Q({key:al,type:K.string.type})))}catch(e){this._getProvidersRulesByTestGroup()}this._updateProvidersRulesByUrlParams()}_getProvidersRulesByTestGroup(){let t={[gt.TEST_PARTNERS]:!0,[gt.ALL_DISABLED]:!1}[this.testGroup];this.providersRules=this._getDefaultProviderRules(t),this.testGroup===gt.TEST_PARTNERS&&Math.random()<=mm&&this._setRandomIdentityProvider(!1),this.providersRules[Ze]={itfPosition:18,itfValue:"-",itfTestPercent:1,enabled:!0},ve({key:al,value:btoa(JSON.stringify(this.providersRules)),type:K.string.type})}_getDefaultProviderRules(e){let t={};return this.identityProviders.filter(r=>r.slug!==Ze).forEach(r=>{let s=na[r.slug],n=typeof e=="function"?e(r.slug,s):e;t[r.slug]=Object.assign({},s,{enabled:n})}),t}_populateIdentityTestGroup(){let e=Q({key:ol,type:K.string.type});this.testGroup=e||this._determineTestingGroup(),ve({key:ol,value:this.testGroup,type:K.string.type})}_updateProvidersRulesByUrlParams(){if(this.itfY&&this._logger.log(`itf_y parameter found: ${this.itfY}`),this.itf_n&&this._logger.log(`itf_n parameter found: ${this.itf_n}`),this.itfY||this.itf_n){let e=this.itfY?this.itfY.split(","):[],t=this.itf_n?this.itf_n.split(","):[];this._logger.log(`Provider Rules before update: ${this.providersRules}`),this.providersRules=Object.keys(this.providersRules).reduce((r,s)=>(e.includes(s)?(this._logger.log(`Enabling identity provider: ${s}`),r[s]=V(b({},this.providersRules[s]),{enabled:!0})):t.includes(s)&&(this._logger.log(`Disabling identity provider: ${s}`),r[s]=V(b({},this.providersRules[s]),{enabled:!1})),r),this.providersRules),this._logger.log(`Provider Rules after update: ${this.providersRules}`)}}_determineTestingGroup(){return Math.random()<=this.testTrafficPercentage?gt.TEST_PARTNERS:gt.ALL_DISABLED}_setRandomIdentityProvider(e){let t=this.identityProviders.filter(s=>s.slug!==Ze);if(t.length===0)return;let r=t[Math.floor(Math.random()*t.length)];this.providersRules[r.slug].enabled=e}};A.class(Ql,{token:l.IDENTITY_CONFIG,dependencies:[l.DISPENSARY_DATA,l.LOGGER]})});var Jl,eg=f(()=>{F();_e();U();Ht();Ci();Yi();Jl=class{constructor({dispensaryData:e,logger:t,identityConfig:r,win:s=window,analytics:n}){y(this,"version",1);this._window=s,this._identityConfig=r,this._dispensaryData=e,this._logger=t,this._analytics=n,this._logger.setContext(l.OPTABLE_MANAGER),this._init()}_setOptableReload(){let r={value:!0,expiration:new Date().getTime()+5*60*1e3};sessionStorage.setItem("optableReload",JSON.stringify(r))}_isOptableReloadInvalid(){let e=sessionStorage.getItem("optableReload");if(!e)return!0;try{let t=JSON.parse(e);return new Date().getTime()>t.expiration?(sessionStorage.removeItem("optableReload"),!0):!1}catch(t){return sessionStorage.removeItem("optableReload"),!0}}get _isGeoAllowed(){var r;let e=(r=this._dispensaryData.locData)==null?void 0:r.iso,t="Optable does not run for users";return e?this._identityConfig.checkIfProviderIsAllowedInGeo(Os)?!0:(this._logger.log(`${t} in ${e}.`,{level:10}),!1):(this._logger.log(`${t} without location data.`,{level:10}),!1)}_getSlug(){try{let t=this._dispensaryData.fsdata.domain.split("."),r=t.slice(-2),s=["co.uk","org.uk","gov.uk","com.au","net.au"],n=t.slice(-2).join("."),o=t.slice(-3).join(".");s.includes(n)?r=t.slice(-3):s.includes(o)&&(r=t.slice(-4));let a=r.join("-");return a=a.replace(/_/g,"-"),/^\d/.test(a)&&(a=`s-${a}`),a}catch(e){return null}}_checkAndMergeOptableConfig(){var s,n;let e,t=localStorage.getItem("OPTABLE_RESOLVED");if(!t)return;try{e=JSON.parse(t)}catch(o){this._logger.log("Failed to parse OPTABLE_RESOLVED from localStorage.",{level:10})}if(!e)return;let r=(n=(s=e==null?void 0:e.ortb2)==null?void 0:s.user)==null?void 0:n.eids;je({name:"optablePerformance",detail:{legacy:1,eidLength:r.length}}),r&&fsprebid.que.push(()=>{fsprebid.mergeConfig({userSync:{userIds:(()=>{let o=fsprebid.getConfig("userSync.userIds")||[],a=o.find(d=>d.name==="pubProvidedId");return a||(a={name:"pubProvidedId",params:{}},o.push(a)),a.params=a.params||{},a.params.eids=a.params.eids?[...a.params.eids,...r]:r,o})()}}),fsprebid.refreshUserIds({submoduleNames:["pubProvidedId"]})})}_loadScript(e){window.optable=window.optable||{cmd:[]},window.optable.site=e,document.addEventListener("optableResolved",()=>{this._checkAndMergeOptableConfig()}),this._setOptableReload(),Ee(Um)}_init(){let e=this._getSlug();!this._identityConfig.checkIfProviderEnabled(Os)||!this._isGeoAllowed||!e||(this._isOptableReloadInvalid()?this._loadScript(e):this._checkAndMergeOptableConfig(),window.addEventListener("optable-split-test",t=>{this._analytics.track(new X({eventName:"OPTABLE-SPLIT-TEST",data:{optableMatcher:t.detail.optable_matcher}}))}))}};A.class(Jl,{token:l.OPTABLE_MANAGER,dependencies:[l.DISPENSARY_DATA,{token:"window",alias:"win"},l.LOGGER,l.IDENTITY_CONFIG,l.PREBID_MANAGER,l.ANALYTICS]})});var la,tg=f(()=>{F();Ht();_e();U();Ci();la=class{constructor({dispensaryData:e,identityConfig:t,prebidManager:r,gamManager:s,win:n=window}){y(this,"version",1);this._window=n,this._identityConfig=t,this._dispensaryData=e,this._prebidManager=r,this._gamManager=s,this._iiq=null,this._init()}_init(){!this._identityConfig.checkIfProviderEnabled(Cs)||!this._isGeoAllowed||this._loadScript()}get _isGeoAllowed(){var t;return((t=this._dispensaryData.locData)==null?void 0:t.iso)?this._identityConfig.checkIfProviderIsAllowedInGeo(Cs):!1}_iiqPrebidOperations(){this._prebidManager.instance.onEvent("bidWon",e=>{if(this._iiq!=null){let t={biddingPlatformId:1,bidderCode:e==null?void 0:e.bidder,prebidAuctionId:e==null?void 0:e.auctionId,cpm:e==null?void 0:e.cpm,currency:e==null?void 0:e.currency,originalCpm:e==null?void 0:e.originalCpm,originalCurrency:e==null?void 0:e.originalCurrency,status:e==null?void 0:e.status,placementId:e==null?void 0:e.adUnitCode};this._iiq.reportExternalWin(t)}})}_iiqGAMKVPSetting(){let e="intent_iq_group";try{this._gamManager.setGlobalTargeting(e,this._iiq.intentIqConfig.abTesting.currentTestGroup||"U")}catch(t){this._gamManager.setGlobalTargeting(e,"U")}}_iiqGAMPPIDSetting(){let t=(r=>{try{let s=r.eids;for(let n=0;n<s.length;n++){let o=s[n];if(o.source==="intentiq.com"){let a=o.uids;for(let d=0;d<a.length;d++){let c=a[d];if(c.ext.stype==="ppuid")return c.id}}}return null}catch(s){return null}})(this._iiq.getIntentIqData());t!=null&&this._gamManager.instance.setPublisherProvidedId(t)}_iiqGAMOperations(){this._iiq!=null&&(this._iiqGAMKVPSetting(),this._iiqGAMPPIDSetting())}_loadScript(){Ee(Gm,()=>{this._iiq=new IntentIqObject({partner:1434517136,pbjs:this._prebidManager.instance,callback:()=>{je({name:"iiqInit",detail:!0})},timeoutInMillis:400,ABTestingConfigurationSource:"IIQServer",allowGDPR:!1,manualWinReportEnabled:!0,domainName:this._dispensaryData.domainName,vrBrowserBlackList:["chrome"]}),this._iiqPrebidOperations(),this._iiqGAMOperations()})}};A.class(la,{token:l.IIQ_MANAGER,dependencies:[l.DISPENSARY_DATA,l.IDENTITY_CONFIG,l.PREBID_MANAGER,l.GAM_MANAGER],factory:e=>T(void 0,[e],function*({dependencies:i}){return yield i.prebidManager.ready,new la(i)})})});var ig=f(()=>{$m();Wm();Jm();Zm();Xm();eg();tg()});var Zl,rg=f(()=>{U();F();Zl=class{constructor(){y(this,"_events");this._events={}}subscribe(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)}unsubscribe(e,t){this._events[e]&&(this._events[e]=this._events[e].filter(r=>r!==t))}emit(e,t){this._events[e]&&this._events[e].forEach(r=>r({eventName:e,payload:t}))}hasSubscribers(e){var t;return!!((t=this._events[e])!=null&&t.length)}};A.class(Zl,{token:l.EVENT_BUS,defaultAlias:"eventBus"})});var zt=f(()=>{rg();bl()});var sg=f(()=>{Qe();Gi();ni()});var ng,Xl,ec=f(()=>{ng=()=>{let i=Xl();return(i==null?void 0:i.offsetHeight)||0},Xl=()=>{var e;return(((e=freestar==null?void 0:freestar.currentStickyFooter)==null?void 0:e.footer)||(freestar==null?void 0:freestar.currentStickyFooter)||{}).slotWrapper}});var lA,og,ag=f(()=>{We();lA=["kargo","teads","seedtag"],og=i=>{var o;if(i.mediaType==="banner"){let a=fsprebid.adUnits.find(({code:c})=>c===i.adUnitCode);if(!((o=a==null?void 0:a.sizes)==null?void 0:o.some(([c=0,u=0])=>c===i.width&&u===i.height)))return freestar.log(10,`Invalid bid size for ad unit: ${i.adUnitCode}`),!1}let e=se(i.bidderCode);if(!lA.some(a=>se(a)===e))return!0;let{width:t,height:r,ad:s}=i;if(!s||!t||!r)return!0;let n=String(s).toLowerCase().includes(`${t}x${r}`);return n||freestar.log(10,`Invalid ad size for ${i.bidderCode} bid: ${t}x${r}`),n}});var dg,lg=f(()=>{dg=(i,e=5e3)=>T(void 0,null,function*(){return new Promise((t,r)=>{var s,n;if(!i){t();return}if(((n=(s=i.contentWindow)==null?void 0:s.document)==null?void 0:n.readyState)==="complete"){t();return}i.addEventListener("load",()=>{if(Number(i==null?void 0:i.width)<=1){r(new Error("Iframe width is less than or equal to 1"));return}t()},{once:!0}),setTimeout(()=>{t()},e)})})});var ca=f(()=>{ec();ag();lg()});var fa,tc=f(()=>{te();fa=class{constructor({type:e,prebidAuctionId:t=null}){this.fsAuctionId=Ae(),this.type=e,this.prebidAuctionId=t,this.adUnits=new Set,this.reportedPlacements=new Set,this.timestamp=Date.now()}addAdUnit(e){this.adUnits.add(e)}getAdUnits(){return Array.from(this.adUnits)}isAuctionEndReported(e){return this.reportedPlacements.has(e)}}});var cA,xr,ic,rc,cg=f(()=>{_e();Ge();le();cA={"scribd-com":{clientId:"ca-pub-1211639399720391",sizes:{"300x100":6475080870,"300x250":7125817567,"300x50":1716797968,"320x100":9052362509,"320x50":4499654227,"336x280":4367012037,"468x60":5113117491,"728x90":7843222610,"970x250":5105378639,"970x90":6338569255}}},xr=()=>{var i;return((i=freestar==null?void 0:freestar.config)==null?void 0:i.adsense)||cA[freestar.sitePath]},ic=class{constructor(){this.params=!1,this.init()}init(){this.params=xr()}render(e=null){if(!xr())return;this.params||(this.params=xr()),window.adsbygoogle||(Ee("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"),window.adsbygoogle=[]);let t=ne.getAdUnitByPrebidCode(e),{placement:r}=t,s=Object.keys(this.params.sizes),n=Dd({placement:r,sizesAllowed:s}),o=document.getElementById(e);o.innerHTML=`<ins class="adsbygoogle" style="display:block; width:${n[0]}px; height:${n[1]}px;" data-ad-client="${this.params.clientId}" data-ad-slot="${this.params.sizes[n.join("x")]}" ></ins>`,window.adsbygoogle.push({})}},rc=new ic});var Xe,sc,fg=f(()=>{Xe={PREBID:"PREBID",PREBID_GAM:"PREBID-GAM",GAM:"GAM"},sc=10*60*1e3});var ua,ug=f(()=>{Ge();Bt();Ut();Ne();cg();U();F();Yi();zt();tc();fg();$e();ua=class{constructor({adUnitManager:e,analytics:t,prebidManager:r,gamManager:s,idealAdStackManager:n,rebidManager:o,dispensaryData:a,logger:d,nativeRenderManager:c,eventBus:u}){this._adUnitManager=e,this._idealAdStackManager=n,this._analytics=t,this._prebidManager=r,this._gamManager=s,this._rebidManager=o,this._dispensaryData=a,this._nativeRenderManager=c,this._logger=d,this._eventBus=u,this._logger.setContext(l.AUCTION_MANAGER),this.auctions=new Map,this._bindPrebidEvents(),this._bindGamEvents(),this._listeners={auctionInit:[]}}addEventListener(e,t){if(!this._listeners[e])throw new Error(`Invalid event type: ${e}`);this._listeners[e].includes(t)||this._listeners[e].push(t)}removeEventListener(e,t){this._listeners[e]=this._listeners[e].filter(r=>r!==t)}_bindGamEvents(){this._gamManager.instance.pubads().addEventListener(Ft,this._handleSlotRequested.bind(this)),this._gamManager.instance.pubads().addEventListener(Me,this._handleSlotRenderEnded.bind(this))}_bindPrebidEvents(){this._prebidManager.instance.onEvent(Qn,this._handleAuctionInit.bind(this)),this._prebidManager.instance.onEvent(Fi,this._handleAuctionEnd.bind(this))}_createAuction(e,t=null){let r=new fa({type:e,prebidAuctionId:t});return this.auctions.set(r.fsAuctionId,r),r}_handleAuctionInit(e){let{adUnits:t,auctionId:r}=e,s=this._idealAdStackManager.isGAMEnabled()?Xe.PREBID_GAM:Xe.PREBID,n=this._createAuction(s,r),o=n.fsAuctionId;t.forEach(a=>{let{code:d}=a,c=this._adUnitManager.getAdUnitByPrebidCode(d);c&&(c.saveState({fsAuctionId:o,auctionType:s,prebidAuctionId:r,rebid:this._rebidManager.getStatus({adUnitCode:c.getSlotId()})}),n.addAdUnit(c),this._trackAuctionStart(c,o,s,r))}),this._listeners.auctionInit.forEach(a=>a(n))}_handleAuctionEnd(e){let{auctionId:t}=e,r=this.getAuctionByPrebidAuctionId(t);r&&r.adUnits.forEach(s=>{let n=(o,a=!1)=>{this._trackAuctionEnd(s,r.fsAuctionId,o,e,t,a,!1)};if(r.type===Xe.PREBID){let o=null;this._nativeRenderManager.isEnabled&&(o=this._nativeRenderManager.getHighestBid(s.prebid.code)),o?this._nativeRenderManager.renderAd(o,s.prebid.code).then(()=>{n(Xe.PREBID,!0)}):xr()&&s.isDisplayAd()?rc.render(s.prebid.code):n(Xe.PREBID)}else s.slot||n(Xe.PREBID_GAM)})}_handleSlotRequested(e){var s;let{slot:t}=e,r=this._adUnitManager.getAdUnitBySlotElementId(t.getSlotElementId());if(r){let n=(s=this._gamManager.getSlotTargeting({slot:t,key:"fs-auuid"}))==null?void 0:s[0],o=this.getAuctionByFsAuctionId(n);if((o==null?void 0:o.type)===Xe.PREBID_GAM||(o==null?void 0:o.type)===Xe.PREBID)return;let a=this._createAuction(Xe.GAM);r.saveState({fsAuctionId:a.fsAuctionId,auctionType:Xe.GAM,rebid:this._rebidManager.getStatus({adUnitCode:r.getSlotId()})}),this._trackAuctionStart(r,a.fsAuctionId,Xe.GAM)}}_handleSlotRenderEnded(e){var c;let{slot:t}=e,r=t.getSlotElementId(),s=this._adUnitManager.getAdUnitBySlotElementId(r);if(!s)return;let n=(c=this._gamManager.getSlotTargeting({slot:t,key:"fs-auuid"}))==null?void 0:c[0],o=this.getAuctionByFsAuctionId(n);if(!o)return;let a=(u=!1)=>{this._trackAuctionEnd(s,n,o.type,e,o.prebidAuctionId,u,u)};if(z("fs-force-rebid")){this._rebidEmptySlot(e,r),a(),this._logger.log("When in 'fs-force-rebid' mode, ads will not be rendered natively");return}if(z("fs-force-native-render")){let u=this._nativeRenderManager.getHighestBid(r);if(u){this._nativeRenderManager.renderAd(u,r).then(()=>{a(!0)}).catch(p=>{this._logger.log(`Error native rendering prebid ad: ${p}`)});return}}if(!e.isEmpty){a();return}if(xr()&&s.isDisplayAd()){rc.render(r);return}let d=null;if(this._nativeRenderManager.isEnabled&&(d=this._nativeRenderManager.getHighestBid(r)),d){this._nativeRenderManager.renderAd(d,r).then(()=>{a(!0)}).catch(u=>{this._logger.log(`Error native rendering prebid ad: ${u}`)});return}this._rebidEmptySlot(e,r),a()}_rebidEmptySlot(e,t){this._dispensaryData.fsdata.secondAuctionDisabled||!this._idealAdStackManager.isRebidAllowed()||this._rebidManager.handleNoBidScenario(e,t)}_trackAuctionStart(e,t,r,s=null){var a,d,c;let n=V(b({},this._buildBaseAuctionPayload(e,t,r,s)),{fsAuctionId:t}),o=e.getSlotId();o&&((a=this._eventBus)!=null&&a.emit)&&this._eventBus.emit(Ao,{slotId:o,fsAuctionId:t,auctionType:r,prebidAuctionId:s,placementId:(c=(d=e.placement)==null?void 0:d.name)!=null?c:null}),this._analytics.track(new fr(n))}_trackAuctionEnd(e,t,r,s,n=null,o,a){let d=this.getAuctionByFsAuctionId(t);if(d&&!d.reportedPlacements.has(e.placement.name)){let c=this._buildAuctionEndPayload(e,t,r,s,n,o,a);this._analytics.track(new so(c)),d.reportedPlacements.add(e.placement.name),this._setAuctionExpiration(t)}}_setAuctionExpiration(e){setTimeout(()=>{this._logger.log(`Removing expired auction ${e} after ${sc}`),this.auctions.delete(e)},sc)}_buildAuctionEndPayload(e,t,r,s,n,o,a){return V(b(b(b({},this._buildBaseAuctionPayload(e,t,r,n)),this._extractAuctionEndData(s)),this._calculateAuctionStatusFields(t,r,s,o,a)),{fsAuctionId:t,winningBid:e.getWinningBid(),isS2SDisabled:this._idealAdStackManager.isS2SDisabled()})}_buildBaseAuctionPayload(e,t,r,s=null){var n,o;return{placementId:e.placement.name,DfpId:(n=e.slot)==null?void 0:n.getAdUnitPath(),fsAuctionId:t,auctionId:s,auctionType:r,location:(o=freestar.locData)!=null?o:{},userIds:this._prebidManager.instance.getConfig().userSync.userIds.map(a=>a.name),kvps:e.getKVPs().filter(([a])=>Fp.includes(a))}}_extractAuctionEndData(e){return V(b({},e),{size:JSON.stringify(e.size)})}_calculateAuctionStatusFields(e,t,r,s,n){let o,a;return t===Xe.PREBID?(o=!0,a=!s):(o=!1,a=r.isEmpty&&!s&&!n),{isNativeRender:s,isGamBypass:o,unfilled:a}}getAuctionByFsAuctionId(e){return this.auctions.get(e)||null}getAuctionByPrebidAuctionId(e){return Array.from(this.auctions.values()).find(t=>t.prebidAuctionId===e)||null}};A.class(ua,{token:l.AUCTION_MANAGER,dependencies:[l.ANALYTICS,l.FREESTAR,l.PREBID_MANAGER,l.GAM_MANAGER,l.DISPENSARY_DATA,l.LOGGER,l.NATIVE_RENDER_MANAGER,l.REBID_MANAGER,l.EVENT_BUS],factory:e=>T(void 0,[e],function*({dependencies:i}){return yield i.prebidManager.ready,new ua(V(b({},i),{idealAdStackManager:J(),adUnitManager:ne}))})})});var pg=f(()=>{tc();ug()});var be,Dr=f(()=>{be={pubfigEngineLoadInit:"pubfig-engine-load-init",pubfigEngineSetupStart:"pubfig-engine-setup-start",pubfigEngineLoad:"pubfig-engine-load",pubfigSlotRequested:"pubfig-slotRequested",pubfigStickyFooterSlotRequested:"pubfig-sticky-footer-slotRequested",pubfigSlotRenderEnded:"pubfig-slotRenderEnded",pubfigEngineSetupEnd:"pubfig-engine-setup-end",pubfigStickyFooterSlotRenderEnded:"pubfig-sticky-footer-slotRenderEnded",pubfigPrebidFsRequestBids:"pubfig-prebid-fsRequestBids",pubfigPrebidAuctionInit:"pubfig-prebid-auctionInit",pubfigPrebidAuctionEnd:"pubfig-prebid-auctionEnd",pubfigLoaded:"pubfig-loaded",pubfigInitRequestStart:"pubfig-init-request-start",pubfigInitRequestEnd:"pubfig-init-request-end"}});var pa,hg=f(()=>{pa=class{constructor(){this._queue=[]}enqueue({bidObjects:e}){this._queue=this._queue.concat(e)}get items(){return Array.from(new Set(this._queue))}hasItem(e){return this.items.includes(e)}clear(){this._queue=[]}}});function pi({adUnits:i}){Array.isArray(i)||(i=[i]);let e=i.filter(r=>r&&r.bids!=null&&r.bids.length>0),t=i.filter(r=>!r||r.bids==null||r.bids.length===0);if(t.length>0){let r=t.map(s=>s&&s.code).join(", ");freestar.log(20,`Not adding adUnits ${r} which have no bidders configured.`)}freestar.log(20,`Adding ${e.length} adUnits to fsprebid.`),fsprebid.que.push(function(){fsprebid.addAdUnits(e)}),e.forEach(r=>{ne.add({prebid:r})})}function mg(){fsprebid.que.push(function(){fsprebid.onEvent(Fi,function(i){freestar.performanceLogger.logMark({markerName:be.pubfigPrebidAuctionEnd,compareTo:[be.pubfigPrebidAuctionInit]}),G.instance.resolve(l.BIDS_MANAGER).then(e=>{e.handleNoBids({auctionData:i})})})})}function gg(i=new ri){var m,h;let{placements:e,networks:t}=window.freestar.fsdata,{bidderOverrides:r=[],type:s=rt}=((h=(m=window.freestar)==null?void 0:m.fsdata)==null?void 0:h.schain)||{},n=_=>_.slug,o=(_,I,S)=>S.indexOf(_)===I&&!Mu.includes(_),a=()=>e.filter(_=>_.networks.length).map(({networks:_})=>_.map(n)),d=t.map(n).concat(a()).flat();i.hasValidStoredRequests()&&d.push(i.getSlug());let c=r&&r.length;c&&s===Ri?d=d.filter(_=>!r.includes(_)):c&&s===rt&&(d=d.filter(_=>r.includes(_)));let u=d.filter(o),p=[];return Object.entries(J().getBidderSummary()).forEach(([_,I])=>{u.includes(_)&&I==="both"&&p.push(kn(_))}),u.concat(p)}function nc(i){return i.sizes.forEach(e=>{Object.keys(e.params).forEach(t=>!e.params[t]&&delete e.params[t])})}var Nr=f(()=>{he();Dr();Hn();Ne();Ge();We();Bt();U();F()});var ha,_g=f(()=>{F();U();Dr();Ne();te();Qe();De();le();Ci();Ve();Gn();hg();Nr();ha=class{constructor(e){this._logger=e.logger,this._analytics=e.analytics,this._deviceInfo=e.deviceInfo,this._performanceLogger=e.performanceLogger,this._gamManager=e.gamManager,this._prebidManager=e.prebidManager,this._bidsQueue=e.bidsQueue,this._adBlock=e.adBlock,this._freestar=e.freestar,this._dispensaryData=e.dispensaryData,this._amazonManager=e.amazonManager,this._logger.setContext(l.BIDS_MANAGER),this._initializeState(),this._processingTimeout=null}enqueueBids({bidObjects:e}){if(!(e!=null&&e.length)){this._logger.log("No bid objects provided for enqueueBids");return}this._bidsQueue.enqueue({bidObjects:e}),this._processingTimeout&&clearTimeout(this._processingTimeout),this._processingTimeout=setTimeout(()=>{this.processBidsQueue()},100)}processBidsQueue({timeout:e}={}){let t=this._bidsQueue.items;if(this._bidsQueue.clear(),!t.length){this._logger.log("No items in bids queue");return}this._logger.log(["BidsQueue:Processing following bidObjects:",t]);let r=this._prebidManager.instance.adUnits,s=new Set,n=new Set,o=[],a=new Set(r.map(d=>d.code));return t.forEach(d=>{var u;if(!((u=d.sizes)!=null&&u.length))return;n.add(d.code),a.has(d.code)||o.push(d);let c=this._gamManager.getSlot({elementId:d.code});c&&s.add(c)}),s=Array.from(s),n=Array.from(n),pi({adUnits:o}),this.requestBids({elementIds:n,slots:s,timeout:e})}_initializeState(){this.requestReference={bidTimer:null,requestNum:Number(freestar.bidRequestNum)||0},this._freestar.requestReference=this.requestReference}requestBids({elementIds:e,slots:t,timeout:r,callback:s,sendAdserverSignal:n}={}){var d;if(this._adBlock.adBlockerDetected){this._logger.log("AdBlocker detected, skip requesting bids");return}let o=this._validateElements({elementIds:e});if(!(o!=null&&o.length))return;this._logPerformanceMark();let a=this._initializeRequestConfig({elementIds:o,slots:t,timeout:r,callback:s,sendAdserverSignal:n});n instanceof Promise&&this._trackEarlyBids(o),(d=freestar==null?void 0:freestar.config)!=null&&d.setNonPersonalizedAds?this._handleNonPersonalizedAds(a):this._initiateAuction(a)}handleNoBids({auctionData:e}){let{bidsReceived:t,noBids:r}=e,s=this._getAdUnitCodesWithNoBids({bidsReceived:t,noBids:r});this._setNoBidTargeting({adUnitCodesWithNoBids:s,isTimeout:!1})}_initializeRequestConfig({elementIds:e,slots:t,timeout:r,callback:s,sendAdserverSignal:n}){let o=r||this._dispensaryData.fsdata.timeout;return{elementIds:e,slots:t,failSafeTimeout:o,callback:s,sendAdserverSignal:n,requestManager:{prebid:!1,aps:!1,adserverRequestSent:!1},amazonSlots:this._setupAmazonSlots(t)}}_setupAmazonSlots(e){if(!J().isGAMEnabled())return[];let t=this._amazonManager.setupAmazonSlots(e);return Array.isArray(t)?t:[]}_validateElements({elementIds:e}){return!e||!e.length?this._getAllValidPlacements():Array.isArray(e)?e:[e]}_getAllValidPlacements(){return this._dispensaryData.fsdata.placements.flatMap(e=>e.validAdSizes&&!e.stickyFooter&&!e.pushdownUnit&&e.sideWallType===0&&document.getElementById(e.name)?e.name:[])}_initiateAuction(e){this._requestBidsFromVendors(e),this._setFailsafeTimeout(e)}_requestBidsFromVendors(e){let{elementIds:t,sendAdserverSignal:r}=e;this.requestReference.requestNum+=1,this._requestAmazonBids(e),this._requestPrebidBids(e),r instanceof Promise&&this._trackEarlyBids(t)}_setFailsafeTimeout(e){let{failSafeTimeout:t}=e;this.requestReference.bidTimer=window.setTimeout(()=>{J().isGAMEnabled()&&(this._logger.log(` (${this.requestReference.requestNum}) TIMEOUT!`),this._setNoBidTargeting({isTimeout:!0}),this._handleAdServerSignal(e))},t)}_requestPrebidBids(e){let{elementIds:t,failSafeTimeout:r}=e,s={timeout:r||3e3,bidsBackHandler:n=>{this._logger.log([` (${this.requestReference.requestNum}) prebid bid responses:`,n]),e.requestManager.prebid=!0,this._handleBidderBack("prebid",e)}};t&&(s.adUnitCodes=t),this._prebidManager.instance.que.push(()=>{this._prebidManager.instance.requestBids(s)})}_requestAmazonBids(e){let{amazonSlots:t,failSafeTimeout:r}=e;if(!J().isGAMEnabled()||!this._amazonManager.isEnabled||!t.length){this._logger.log("Amazon bidding is not applicable or no valid amazon Slots"),e.requestManager.aps=!0,this._handleBidderBack("aps",e);return}this._logger.log(["Requesting bids from Amazon:",t]),this._amazonManager.instance.fetchBids({slots:t,timeout:r||3e3},n=>{this._amazonManager.track(n),this._logger.log([` (${this.requestReference.requestNum}) aps bids:`,n]),e.requestManager.aps=!0,this._handleBidderBack("aps",e)})}_handleBidderBack(e,t){let{requestManager:r}=t;this._freestar.debug&&this._freestar.debug>24&&e==="prebid"&&setTimeout(()=>mp(),1500),this._logger.log([`(${this.requestReference.requestNum}) Bidder back:`,e]),this._allBiddersBack(r)&&J().isGAMEnabled()&&(t.sendAdserverSignal instanceof Promise?this._handleAdServerSignal(t):this._handleAdServerRequest(t))}_allBiddersBack(e){return e.prebid&&(J().isGAMEnabled()?e.aps:!0)}_handleAdServerSignal(e){let{sendAdserverSignal:t,elementIds:r}=e;t instanceof Promise?t.then(()=>{this._handleAdServerRequest(e)}).catch(()=>{this._logger.log(`Adserver request cancelled for: ${r.toString()}`)}):this._handleAdServerRequest(e)}_handleAdServerRequest(e){let{requestManager:t}=e;t.adserverRequestSent||(this.requestReference.bidTimer&&(clearTimeout(this.requestReference.bidTimer),this.requestReference.bidTimer=null),t.adserverRequestSent=!0,this._logger.log([` (${this.requestReference.requestNum}) Sending adserver request!`]),this._sendAdServerRequest(e))}_sendAdServerRequest(e){let{elementIds:t}=e;this._gamManager.instance.cmd.push(()=>{let r={activeIds:[],activeSlots:[]};if(Array.isArray(t)&&t.length){this._logger.log([` (${this.requestReference.requestNum}) Refresh Only:`,t]),this._amazonManager.isEnabled&&this._amazonManager.instance.setDisplayBids(t);let s=this._dynamicPlacementFlooring(t);r.activeIds=s.activeIds,r.activeSlots=s.activeSlots}else this._logger.log(` (${this.requestReference.requestNum}) Refresh All!`),this._amazonManager.isEnabled&&this._amazonManager.instance.setDisplayBids(),r.activeIds=this._staticPlacementFlooring();this._setTestTargeting(),r.activeSlots.length&&(r.activeIds.length&&this._prebidManager.instance.setTargetingForGPTAsync(r.activeIds),this._gamManager.logTargeting(r.activeSlots),this._gamManager.refreshWithCorrelatorControl(r.activeSlots)),e.callback&&e.callback()})}_setTestTargeting(){let e=pp();e&&(this._logger.log(["Part of an A/B test... ",e]),this._gamManager.setGlobalTargeting("fs_test_variant_id",String(e.testGroup)))}_setNoBidTargeting({adUnitCodesWithNoBids:e,isTimeout:t}){this._gamManager.getSlots().forEach(r=>{if(t)this._gamManager.setSlotTargeting({slot:r,key:"fsbid",value:"timeout"});else if(e){let s=r.getAdUnitPath(),n=Eg({adUnitPath:s});n&&e.includes(n.name)&&this._gamManager.setSlotTargeting({slot:r,key:"fsbid",value:"0"})}})}_placementFlooring({placementName:e,domId:t}){let r=!0,s,n,o=this._prebidManager.instance.getBidResponses()[t],a=re({name:ge({slotId:e})});return!o||!a||(n=as(o,function(d){return Number(d.cpm)}),s=a[`floor${this._deviceInfo.device.type.charAt(0).toUpperCase()+this._deviceInfo.device.type.slice(1)}`],yn(s)&&s>0&&(n!=null&&n.cpm)&&n.cpm<s&&(r=!1)),r}_fetchPlacementName(e){return this._freestar.dynamicSlotLibrary[e]||e}_dynamicPlacementFlooring(e){let t={activeIds:[],activeSlots:[]};return e.forEach(r=>{let s=this._gamManager.getSlot({elementId:r});s&&t.activeSlots.push(s),this._placementFlooring({placementName:this._fetchPlacementName(r),domId:r})&&t.activeIds.push(r)}),t}_staticPlacementFlooring(){let e=[];return this._gamManager.getSlots().forEach(t=>{var s;let r=t.getSlotElementId();(s=this._freestar.bidsWon)!=null&&s[r]&&!this._freestar.bidsWon[r]&&(this._freestar.bidsWon[r].evaluated=!0,this._placementFlooring({placementName:this._fetchPlacementName(r),domId:r})&&e.push(r))}),e}_getAdUnitCodesWithNoBids({bidsReceived:e}){let t=this._prebidManager.instance.adUnits.reduce((r,s)=>(r[s.code]=!1,r),{});return e&&e.forEach(r=>{r.cpm>0&&(t[r.adUnitCode]=!0)}),Object.keys(t).filter(r=>!t[r])}_createAuctionStartEvent(){je({name:"auctionStarted",detail:!0})}_logPerformanceMark(){this._performanceLogger.logMark({markerName:be.pubfigPrebidFsRequestBids})}_trackEarlyBids(e){this._logger.log(["Refreshing early bids",e])}_handleNonPersonalizedAds(e){this._logger.log(` (${this.requestReference.requestNum}) set to skip pre auctions, sending GAM request.`),e.sendAdserverSignal instanceof Promise?e.sendAdserverSignal.then(()=>this._sendAdServerRequest(e)).catch(()=>{this._logger.log(`Adserver request cancelled for: ${e.elementIds.toString()}`)}):this._sendAdServerRequest(e)}};A.class(ha,{token:l.BIDS_MANAGER,defaultAlias:"bidsManager",dependencies:[l.LOGGER,l.ANALYTICS,l.DEVICE_INFO,l.PERFORMANCE_LOGGER,l.GAM_MANAGER,l.PREBID_MANAGER,l.AD_BLOCK,l.FREESTAR,l.DISPENSARY_DATA,l.AMAZON_MANAGER],factory:e=>T(void 0,[e],function*({dependencies:i}){return yield i.prebidManager.ready,i.bidsQueue=i.bidsQueue||new pa,new ha(i)})})});var yg=f(()=>{_g()});var ma,Sg=f(()=>{_e();U();F();Ge();ca();zt();ss();We();ma=class{constructor({prebidManager:e,adUnitManager:t,logger:r,eventBus:s,ancillary:n,dispensaryData:o}){this._dispensaryData=o,this._prebidManager=e,this._adUnitManager=t,this._ancillary=n,this._eventBus=s,this._dispensaryData=o,this._logger=r,this._logger.setContext(l.NATIVE_RENDER_MANAGER)}get isEnabled(){return this._dispensaryData.getValue("enableNativeRender")!==!1}getHighestBid(e,t=[]){if(!this.isEnabled)return null;let r=this._prebidManager.instance.getBidResponsesForAdUnitCode(e);if((r==null?void 0:r.length)>0){let s=r.filter(n=>n.status!=="rendered"&&og(n)&&!t.includes(se(n.bidderCode)));if(s.length>0)return s.sort((n,o)=>o.cpm-n.cpm),s[0]}return null}getAdUnit(e){return this._adUnitManager.getAdUnitBySlotElementId(e)}_sendEvents(e,t,r){this._eventBus.emit(mr,{elementId:t,bid:r})}renderAd(e,t){return T(this,null,function*(){if(!this.isEnabled){this._logger.log("Native render is not enabled");return}let r=document.getElementById(t);if(r.style.display==="none"&&!this._dispensaryData.fsdata.collapseEmptyDivs)return;r.style.display==="none"&&(r.style.display="");let s=this.getAdUnit(t);if(!s){console.warn(`[nativeRender-renderAd] AdUnit not found for elementId: ${t}`);return}if(s.renderMap.has(e.adId))return;s.renderMap.set(e.adId,!0),yield this.clearExistingAd(t),e.isNativeRender=!0;let n=this.createAdElement(e);r.appendChild(n),this.executeRenderAd(e.adId),this._ancillary.create({id:t,placement:s.placement,container:n}),this._sendEvents(s,t,e)})}clearExistingAd(e){return new Promise(t=>{this._ancillary.hide(e),ir(e),this._eventBus.emit(yo,{elementId:e}),t()})}createAdElement(e){return B({id:an,children:[B({type:"iframe",id:`_fs-ad-${e.adId||e.amzniid}`,attributes:[{width:e.width||"100%",height:e.height||"100%",frameBorder:"0",marginHeight:"0",marginWidth:"0",scrolling:"no"}]})]})}executeRenderAd(e){let t=document.querySelector(`#_fs-ad-${e}`).contentWindow;t.adId=e,this._prebidManager.instance.renderAd(t.document,e),this._logger.log(`rendered #_fs-ad-${e} natively`)}};A.class(ma,{token:l.NATIVE_RENDER_MANAGER,dependencies:[l.PREBID_MANAGER,l.LOGGER,l.EVENT_BUS,l.ANCILLARY,l.DISPENSARY_DATA],factory:e=>T(void 0,[e],function*({dependencies:i}){return yield i.prebidManager.ready,new ma(V(b({},i),{adUnitManager:ne}))})})});var Ig=f(()=>{Sg()});var Mr,qt,Le,$i=f(()=>{Mr="REFRESH",qt="VIDEO",Le="STICKYFOOTER"});var Ag,bg,wg,Tg,vg,oc,ga=f(()=>{Ag={root:null,threshold:.5},bg=1e3,wg=.49,Tg=300,vg=["stickyFooter","sideWall","pushdown","dynamicAd","stickyRail"],oc="Ad refresh is disabled for this geo."});var Ps,Rg=f(()=>{$i();ga();Ps=class{constructor({logger:e,freestar:t},r){e.setContext(Mr),t.refreshLibrary={},t.refreshSlots=[],e.log(r!=null?r:oc),["refresh","refreshAll"].forEach(s=>{this[s]=()=>{e.warning(r!=null?r:oc)}}),["refreshAllVisible","resetCapCounter","disableForItem","enableForItem","disable","enable","pause","resume","setDirectAdRefresh"].forEach(s=>{this[s]=()=>{e.log(r!=null?r:"Ad refresh is disabled.")}})}}});var _a,ac=f(()=>{_a=({elementId:i})=>document.getElementById(i)&&i.indexOf("_fs-sf")===-1});var Ea,dc=f(()=>{Ea=class{constructor({logger:e,delayMs:t=0}){this._logger=e,this._delayMs=t,this._queue=[],this._isProcessing=!1,this._processingTimeouts=new Set,this._queuedElementIds=new Set}enqueue(e){if(this._queuedElementIds.has(e.elementId)){this._logger.log(`Skipping duplicate queue entry for ${e.elementId}`);return}this._queue.push(e),this._queuedElementIds.add(e.elementId),this._logger.log(`Queued refresh for ${e.elementId}. Queue size: ${this._queue.length}`),this._isProcessing||this._processQueue()}_processQueue(){return T(this,null,function*(){if(!this._isProcessing){for(this._isProcessing=!0;this._queue.length>0;){let e=this._queue[0];try{this._logger.log(`Processing refresh for ${e.elementId}`),e.refreshFn(),this._queue.length>0&&this._delayMs>0&&(this._logger.log(`Delaying refresh for ${e.elementId} for ${this._delayMs}ms`),yield this._delay(this._delayMs)),this._queue.shift(),this._queuedElementIds.delete(e.elementId)}catch(t){this._logger.error(`Error processing refresh for ${e.elementId}:`,t),this._queuedElementIds.delete(e.elementId),this._queue.shift()}}this._isProcessing=!1}})}_delay(e){return new Promise(t=>{let r=setTimeout(()=>{this._processingTimeouts.delete(r),t()},e);this._processingTimeouts.add(r)})}clear(){this._queue=[],this._queuedElementIds.clear(),this._isProcessing=!1,this._processingTimeouts.forEach(e=>{clearTimeout(e)}),this._processingTimeouts.clear(),this._logger.log("Refresh queue cleared")}get size(){return this._queue.length}get isProcessing(){return this._isProcessing}}});var ya,Og=f(()=>{U();F();Ne();Rg();ga();te();Li();br();$i();Ut();zt();ac();Ve();dc();ya=class{constructor({renderBidMidwayManager:e,logger:t,dispensaryData:r,refreshers:s,globalRefreshUserIDsState:n,gamManager:o,freestar:a,win:d,eventBus:c,refreshLibrary:u}){y(this,"_counterEventsConfig",[{thresholdPercentageFrom:.75,thresholdPercentageTo:.85,handler:({elementId:e,refreshLibraryItem:t})=>{t.checkingForBid=!1,!(t.hasPrefetchCalled||!t.canBeRefreshed()||!t.isVisibilityThresholdMet())&&(t.hasPrefetchCalled=!0,this._prefetchBids({elementId:e,refreshLibraryItem:t}))}},{thresholdPercentageFrom:.8,handler:({elementId:e,refreshLibraryItem:t})=>{if(!ki({siteId:this._dispensaryData.fsdata.siteId,placement:t.placement})&&!zi(t.placement)){let r=(t.timesRefreshed||0)+1;ht().prefetchFloorsData({placement:t.placement,slotId:e,timesRefreshed:r})}}},{thresholdPercentageFrom:.8,handler:({refreshLibraryItem:e})=>{var t;this._globalRefreshUserIDsState.allowed()&&((t=e.refreshUserIds)!=null&&t.requiresRefresh)&&(e.refreshUserIds.refresh(),this._globalRefreshUserIDsState.updateLastRefreshTime())}},{thresholdPercentageFrom:1,handler:({elementId:e,refreshLibraryItem:t})=>{!t.canBeRefreshed()||!t.isVisibilityThresholdMet()||(this._refresh({elementId:e,refreshLibraryItem:t}),t.hasPrefetchCalled=!1,t.refreshUserIds.reset())}}]);y(this,"_isTimeoutUpdatedForSubsequentAuctions",!1);y(this,"_handleIntersection",e=>{e.forEach(t=>{let{isIntersecting:r,intersectionRatio:s}=t,{id:n}=t.target;this._refreshLibrary.updateLibraryItem({slotId:n,attributes:{intersectionRatio:r?s:0}}),this._eventBus.emit(yr,{id:n,isIntersecting:r,intersectionRatio:s})})});y(this,"_checkRefreshCap",()=>{let[e]=Object.values(this._refreshLibrary.items),{slotsCombinedRefreshCap:t}=this._dispensaryData.fsdata;if(!e||t===0)return;let r=t||Tg;e.constructor.totalRefreshes>=r&&(this._logger.log(`Max refresh cap reached. Total Refreshes: ${e.constructor.totalRefreshes}, Cap: ${r}`),this._refreshLibrary.toggleRefreshForAll({disableRefresh:!0}))});this._renderBidMidwayManager=e,this._gamManager=o,this._window=d,this._freestar=a,this._eventBus=c,this._refreshLibrary=u,this._dispensaryData=r,this._logger=t,this._logger.setContext(Mr),this._logger.setLevel(50),this._currentUrl=d.location.href,this._globalRefreshUserIDsState=n,this._observedElements=new Set,this._intervalId=null,this._freestar.refreshSlots=this.refreshSlots=[],this._refreshers=s,this._refreshQueue=new Ea({logger:this._logger,delayMs:this._dispensaryData.fsdata.refreshQueueDelay||0}),this._subscribeToEvents(),this._attachIntersectionObserver(),this._populateCounterEventsConfig(),this._startPolling()}_populateCounterEventsConfig(){var e;this._dispensaryData.fsdata.enableMidwayRender!==!1&&((e=this._counterEventsConfig)==null||e.unshift({thresholdPercentageFrom:.5,thresholdPercentageTo:.75,handler:({elementId:t,refreshLibraryItem:r})=>{r.checkingForBid||!r.canBeRefreshed()||!r.isVisibilityThresholdMet()||(r.checkingForBid=!0,this._renderBidMidwayManager.renderAd({elementId:t}))}}))}disableForItem({slotId:e,placementName:t}){this._refreshLibrary.toggleRefreshForItem({slotId:e,placementName:t,disableRefresh:!0})}enableForItem({slotId:e,placementName:t}){this._refreshLibrary.toggleRefreshForItem({slotId:e,placementName:t,disableRefresh:!1})}disable(){this._refreshLibrary.toggleRefreshForAll({disableRefresh:!0}),this._refreshQueue.clear()}enable(){this._refreshLibrary.toggleRefreshForAll({disableRefresh:!1})}pause(){this._refreshLibrary.updateAllItems({attributes:{pauseRefresh:!0}})}resume(){this._refreshLibrary.updateAllItems({attributes:{pauseRefresh:!1}})}addToLibrary({elementId:e}){let t=this._refreshLibrary.addToLibrary({elementId:e});if(!t)return;let r=this._window.document.getElementById(t.observedElementId);return r||(r=this._createObservedElement({targetElementId:e,observedElementId:t.observedElementId})),this._addToObserver(r),t}_createObservedElement({targetElementId:e,observedElementId:t}){let r=this._window.document.getElementById(e),s=this._window.document.createElement("div");return s.id=t,s.style.width="1px",s.style.height="0px",r.after(s),s}refresh({elementIds:e}={}){this._logger.log(["freestar.refresh: ",e]),e=e!=null?e:this._gamManager.instance.pubads().getSlots().map(({getSlotElementId:t})=>t()),e.forEach(t=>{if(!_a({elementId:t}))return;let r=this._refreshLibrary.getRefreshLibraryItem({slotId:t});r||(r=this.addToLibrary({elementId:t})),r&&this._refresh({elementId:t,refreshLibraryItem:r})})}refreshAll(){this._logger.log("freestar.refreshAllSlots");let e=this._gamManager.instance.pubads().getSlots();e==null||e.forEach(t=>{let r=t.getSlotElementId(),s=this._refreshLibrary.getRefreshLibraryItem({slotId:r});s!=null&&s.canBeRefreshed()&&this._refresh({elementId:r,refreshLibraryItem:s})})}refreshAllVisible(){let e=this._gamManager.instance.pubads().getSlots();e==null||e.forEach(t=>{let r=t.getSlotElementId(),s=this._refreshLibrary.getRefreshLibraryItem({slotId:r});s!=null&&s.isVisibilityThresholdMet()&&(s!=null&&s.canBeRefreshed())&&this._refresh({elementId:r,refreshLibraryItem:s})})}removeFromLibrary({elementId:e}){this._refreshLibrary.removeFromLibrary({elementId:e}),this._observedElements.delete(e);let t=this._window.document.getElementById(e);!this._observer||!t||this._observer.unobserve(t)}_eventMatchesDirectAdRefresh(e){return["advertiserId","campaignId","lineItemId","creativeId"].some(t=>{let r=e[t];return r!=null&&this._dispensaryData.fsdata.directAdRefreshTargeting.includes(r.toString())?(this._logger.log(1,`found ${t} ${r} in directAdRefreshTargeting, setting refresh ${this._dispensaryData.fsdata.directAdRefreshRate}.`),!0):!1})}setDirectAdRefresh(e){let t=this._dispensaryData.fsdata.directAdRefreshRate;this._refreshLibrary.updateLibraryItem({slotId:e,attributes:{refreshTime:t>0?t:-1,disableRefresh:t<=0}})}_subscribeToEvents(){this._gamManager.instance.pubads().addEventListener(Me,e=>{var t,r;try{this._dispensaryData.fsdata.customDirectAdRefresh&&this._eventMatchesDirectAdRefresh(e)&&this.setDirectAdRefresh(e.slot.getSlotElementId())}catch(s){}try{let s=e==null?void 0:e.slot,n=(t=s==null?void 0:s.getSlotElementId)==null?void 0:t.call(s),o=((r=s==null?void 0:s.getTargeting)==null?void 0:r.call(s,"fsrefresh"))||[],a=parseInt(o[0]||"0",10);n&&a>0&&this._eventBus.emit(Io,{elementId:n,refreshCount:a})}catch(s){}}),this._gamManager.instance.pubads().addEventListener(Ft,e=>{ir(e.slot.getSlotElementId())}),this._eventBus.subscribe(_r,({payload:{elementId:e,elementIds:t}})=>{t||(t=[e]),t.forEach(r=>{this.addToLibrary({elementId:r})})}),this._eventBus.subscribe(gr,({payload:{elementId:e}})=>{this.removeFromLibrary({elementId:e})}),this._eventBus.subscribe(Er,()=>{this._clearLibrary()}),this._eventBus.subscribe(So,({payload:{elementId:e}})=>{this._refreshLibrary.updateLibraryItem({slotId:e,attributes:{hasIntersectLazyAd:!0}})})}_clearLibrary(){this._refreshLibrary.clearLibrary(),this._refreshQueue.clear()}_addToObserver(e){this._observer&&(this._observer.observe(e),this._observedElements.add(e.id))}_attachIntersectionObserver(){"IntersectionObserver"in this._window&&(this._observer=new this._window.IntersectionObserver(this._handleIntersection,Ag))}_startPolling(){this._intervalId||(this._intervalId=this._window.setInterval(()=>{var r,s;if(this._observedElements.forEach(n=>{if(!this._refreshLibrary.getRefreshLibraryItem({slotId:n})){this._observedElements.delete(n);let o=this._window.document.getElementById(n);o&&this._observer.unobserve(o)}}),this._window.document.hidden)return;let e=this._dispensaryData.fsdata.enableRefreshOutOfFocus===void 0?!0:!!this._dispensaryData.fsdata.enableRefreshOutOfFocus;if(!this._window.document.hasFocus()&&!e)return;let t=!1;(this._currentUrl!==this._window.location.href||this._placementsChangedViaUrl!==this._refreshLibrary.count)&&(t=!0,this._placementsChangedViaUrl=this._refreshLibrary.count,this._currentUrl=this._window.location.href);for(let n in this._refreshLibrary.items){let o=this._window.document.getElementById(n);if(!(o!=null&&o.id))continue;let a=this._refreshLibrary.getRefreshLibraryItem({slotId:n});a!=null&&a.canIncrementCounter()&&(a.incrementCounter(),this._counterEventsConfig.forEach(({thresholdPercentageFrom:d,thresholdPercentageTo:c,handler:u})=>{let p=a.refreshTime*d,m=c?a.refreshTime*c:null;a.refreshCounter>=p&&(!m||a.refreshCounter<m)&&u({refreshLibraryItem:a,elementId:n})}),(!this._observedElements.has(n)||t)&&(this._observedElements.add(n),(r=this._observer)==null||r.unobserve(o),(s=this._observer)==null||s.observe(o)))}},bg))}_prefetchBids(r){return T(this,arguments,function*({elementId:e,refreshLibraryItem:t}){let s=t.placement,n=this._gamManager.instance.pubads().getSlots().find(o=>o.getSlotElementId()===e);this._gamManager.setSlotTargeting({slot:n,key:"fs_uuid",value:Ae()}),t.isCounterStopped=!0,s&&!ki({siteId:this._dispensaryData.fsdata.siteId,placement:s})&&!zi(s)&&(t.timesRefreshed+=1,yield ht().getFloorsData({placement:s,slotId:e,callback:({result:o})=>{t.timesRefreshed-=1,o&&n&&(this._gamManager.setSlotTargeting({slot:n,value:o}),freestar.log({title:"FLOORS"},e,"Refreshed floors value.",o))}})),J().refreshData(),t.isCounterStopped=!1;for(let o of this._refreshers)if(o.shouldRefresh({elementId:e,placement:s,refreshLibraryItem:t})){o.fetchBids({elementId:e,placement:s,refreshLibraryItem:t}),this._logger.log(`Making bid ahead of time ${e}`);break}})}_refresh({refreshLibraryItem:e,elementId:t}){this._refreshQueue.enqueue({elementId:t,refreshLibraryItem:e,refreshFn:()=>this._executeRefresh({elementId:t,refreshLibraryItem:e})})}_executeRefresh(r){return T(this,arguments,function*({refreshLibraryItem:e,elementId:t}){let s=e.placement;e.refreshCounter=1,e.timesRefreshed+=1;for(let n of this._refreshers)if(n.shouldRefresh({elementId:t,placement:s,refreshLibraryItem:e})){n.refresh({elementId:t,placement:s,refreshLibraryItem:e});break}this._checkRefreshCap()})}resetCapCounter(){let[e]=Object.values(this._refreshLibrary.items);e&&(e.constructor.totalRefreshes=0,this._logger.log("Resetting refresh cap counter"))}};A.class(ya,{token:l.AD_REFRESHER,dependencies:[{token:l.WINDOW,alias:"win"},l.FREESTAR,l.DISPENSARY_DATA,l.EVENT_BUS,l.LOGGER,l.RENDER_BID_MIDWAY,l.GLOBAL_REFRESH_USER_IDS_STATE,l.GAM_MANAGER,l.REFRESH_LIBRARY,l.DEFAULT_REFRESHER,{token:l.SUPERFLEX_REFRESHER,optional:!0},{token:l.STICKY_FOOTER_REFRESHER,optional:!0},l.AD_BLOCK],factory:e=>T(void 0,[e],function*({dependencies:i}){if(i.adBlock.adBlockerDetected)return new Ps(i,"Ad refresh is disabled when Ad blocker is on");let{isRefreshAllowed:t}=J().determineAdRefreshBehavior();if(!t)return new Ps(i);let r=[i.defaultRefresher];return i.stickyFooterRefresher&&r.unshift(i.stickyFooterRefresher),i.superflexRefresher&&r.unshift(i.superflexRefresher),new ya(V(b({},i),{refreshers:r}))})})});var Sa,Cg=f(()=>{Sa=class{constructor(){this.requiresRefresh=!0}reset(){this.requiresRefresh=!0}refresh(){this.requiresRefresh=!1,window.fsprebid.refreshUserIds()}}});var Aa,Ia,Pg=f(()=>{ga();pt();Cg();Aa=class Aa{constructor({placement:e,elementId:t,refreshAttributes:r={},siteRefreshRate:s,freestar:n,logger:o,win:a=window,enableRefreshCounterOutOfView:d,collapseEmptyDivs:c}={}){let{refreshTime:u,isCounterStopped:p,refreshCounter:m,disableRefresh:h,pauseRefresh:_,intersectionRatio:I,checkingForBid:S,timesRefreshed:g,hasPrefetchCalled:E,hasIntersectLazyAd:L,refreshUserIds:k}=r;if(this._freestar=n,this._logger=o,this.placement=e,this.placementName=e.name,this._siteRefreshRate=s,this.refreshTime=u||this._getPlacementAdRefreshRate(),this.isCounterStopped=p!=null?p:!1,this.checkingForBid=S!=null?S:!1,this.hasPrefetchCalled=E!=null?E:!1,this.pauseRefresh=_!=null?_:!1,this.refreshCounter=m!=null?m:0,this.intersectionRatio=I!=null?I:0,this._timesRefreshed=g!=null?g:0,this.hasIntersectLazyAd=L!=null?L:!1,this.elementId=t,this.observedElementId=c?`${t}_tracker`:t,this.enableRefreshCounterOutOfView=d!=null?d:!0,typeof h!="boolean"){this.disableRefresh=!1;let $=a.document.getElementById(t);(Number($==null?void 0:$.getAttribute("data-refresh-time"))===-1||e.outOfPage===!0)&&(this.disableRefresh=!0)}else this.disableRefresh=h;this.refreshUserIds=k!=null?k:new Sa}canBeRefreshed(){var e,t;return!((e=this.placement)!=null&&e.lazyAd&&!this.hasIntersectLazyAd&&((t=this.placement.selectedSize)==null?void 0:t.lazyLoadViewportHeight)>0||this.disableRefresh||this.pauseRefresh)}toggleRefresh(e){this.disableRefresh=e,this.refreshTime=e?0:this._getPlacementAdRefreshRate()}setRefreshCounter(e){this.refreshCounter=e}setRefreshTime(e){this.refreshTime=e||this._getPlacementAdRefreshRate()}isVisibilityThresholdMet(){return this.intersectionRatio>wg}incrementCounter(){if(!(this.refreshCounter>=this.refreshTime)){if(isNaN(this.refreshCounter)){this.refreshCounter=1;return}this.refreshCounter+=1}}canIncrementCounter(){var t;return((t=this.placement)==null?void 0:t.lazyAd)&&!this.hasIntersectLazyAd?(this.refreshCounter=0,!1):this.disableRefresh||this.isCounterStopped||this.refreshTime<=0||this.refreshCounter<0||!this.enableRefreshCounterOutOfView&&!this.isVisibilityThresholdMet()?!1:(this._logger.log(`${this.elementId} ${this.refreshCounter}`),!0)}_getPlacementAdRefreshRate(){let{ignoreSiteRefresh:e,adRefreshRate:t}=this.placement,r=e?t:this._siteRefreshRate;return this._getConfigOverrides({refreshRate:r})}_getConfigOverrides({refreshRate:e}){var t;if(!this._freestar.config.products)return e;for(let r of vg){if(!((t=this._freestar.config.products)!=null&&t[r])||!it({placement:this.placement,type:`${r}Options`}))continue;let{refreshDisabled:n,refreshInterval:o}=this._freestar.config.products[r];if(n)return 0;if(o>15)return o}return e}get timesRefreshed(){return this._timesRefreshed}set timesRefreshed(e){Aa.totalRefreshes+=e-this._timesRefreshed,this._timesRefreshed=e}};y(Aa,"totalRefreshes",0);Ia=Aa});var lc,xg=f(()=>{U();F();De();Pg();ac();$i();lc=class{constructor({logger:e,dispensaryData:t,freestar:r,win:s}){this._window=s,this._dispensaryData=t,this._logger=e,this._logger.setContext(Mr),this._logger.setLevel(50),this._freestar=r,this._freestar.refreshLibrary=this.items={}}get count(){return this.items.length}get globalRefreshCount(){let[e]=Object.values(this.items);return(e==null?void 0:e.totalRefreshes)||0}getRefreshLibraryItem({slotId:e,placementName:t}){var r;return(r=this.items[e])!=null?r:Object.values(this.items).find(s=>s.placementName===t||s.observedElementId===e)}addToLibrary({elementId:e}){var d;if(!_a({elementId:e}))return;let{adRefreshRate:t,enableRefreshCounterOutOfView:r,placements:s}=this._dispensaryData.fsdata,n=ge({freestar:this._freestar,slotId:e}),o=s.find(c=>c.name===n);if(!o||((d=o.interstitialOptions)==null?void 0:d.active)===!0){this._logger.log(`Cannot find placement for AD slot: ${e}`,{level:20});return}let a=new Ia({placement:o,elementId:e,refreshAttributes:this.items[e],siteRefreshRate:t,freestar:this._freestar,logger:this._logger,win:this._window,enableRefreshCounterOutOfView:r,collapseEmptyDivs:this._dispensaryData.fsdata.collapseEmptyDivs});return Object.assign(this.items,{[e]:a}),this.items[e]}removeFromLibrary({elementId:e}){this.items[e]&&delete this.items[e]}toggleRefreshForAll({disableRefresh:e}){var t;for(let r in this.items)(t=this.items[r])==null||t.toggleRefresh(e)}toggleRefreshForItem({slotId:e,placementName:t,disableRefresh:r}){let s=this.getRefreshLibraryItem({slotId:e,placementName:t});s==null||s.toggleRefresh(r)}updateAllItems({attributes:e}){for(let t in this.items){let r=this.items[t];Object.assign(r,e)}}updateLibraryItem({slotId:e,placementName:t,attributes:r}){let s=this.getRefreshLibraryItem({slotId:e,placementName:t});s&&Object.assign(s,r)}clearLibrary(){for(let e in this.items)this.removeFromLibrary({elementId:e})}};A.class(lc,{token:l.REFRESH_LIBRARY,dependencies:[{token:l.WINDOW,alias:"win"},l.FREESTAR,l.LOGGER,l.DISPENSARY_DATA]})});var cc,Dg,fc=f(()=>{cc={LANDSCAPE:"landscape",MOBILE:"mobile"},Dg=1e3});var xs,uc=f(()=>{fc();xs=({width:i,height:e})=>i>e?cc.LANDSCAPE:cc.MOBILE});var pc,Ng=f(()=>{U();F();Ve();ot();zt();fc();le();ti();uc();pc=class{constructor({dispensaryData:e,freestar:t,eventBus:r,adRefresher:s,gamManager:n,adSlotsManager:o,win:a=window}){this._dispensaryData=e,this._freestar=t,this._adRefresher=s,this._eventBus=r,this._gamManager=n,this._adSlotManager=o,this._win=a,this.orientation=this._currentDeviceOrientation,this._shouldRecreateSlots=this._dispensaryData.fsdata.reorientationRefresh&&!this._freestar.config.disableReorientation&&[st,Pn].indexOf(this._freestar.deviceInfo.device.type)>-1,this._shouldRecreateSlots&&!t.config.alwaysRefresh&&(t.config.alwaysRefresh=e.fsdata.placements.map(({name:d})=>d)),this._subscribeToEvents()}_subscribeToEvents(){this._win.visualViewport.addEventListener("resize",bn(()=>{this.orientation!==this._currentDeviceOrientation&&(this.orientation=this._currentDeviceOrientation,this._eventBus.emit(rh,{orientation:this.orientation}),this._onOrientationChange())},Dg))}_recreateSlot(e){this._adSlotManager.deleteAdSlots([e.name]);let t=this._gamManager.createSlot({placement:e,id:e.name});di(t,e.name,{fs_ad_product:ke(e),fs_ad_optimization:Tt(e)})}_onOrientationChange(){ba(),this._shouldRecreateSlots&&this._recreateSlots()}_recreateSlots(){let e=[],t=this._freestar.config.removeRefresh||[],r=this._freestar.config.alwaysRefresh||[];this._dispensaryData.fsdata.placements.forEach(s=>{document.getElementById(s.name)&&(this._freestar.config.enabled_slots&&this._freestar.config.enabled_slots.indexOf(s.name)>-1&&!s.stickyFooter&&t.indexOf(s.name)===-1?(this._recreateSlot(s),e.push(s.name)):r.indexOf(s.name)>-1&&(this._recreateSlot(s),e.push(s.name)))}),e.length&&this._adRefresher.refresh({elementIds:e})}get _currentDeviceOrientation(){let e=this._win.innerWidth||this._win.document.documentElement.clientWidth,t=this._win.innerHeight||this._win.document.documentElement.clientHeight;return xs({width:e,height:t})}};A.class(pc,{token:l.DEVICE_ORIENTATION_TRACKER,dependencies:[l.WINDOW,l.FREESTAR,l.DISPENSARY_DATA,l.EVENT_BUS,l.AD_REFRESHER,l.GAM_MANAGER,l.AD_SLOTS_MANAGER]})});var hc=f(()=>{Ng();uc()});var mc,Mg=f(()=>{U();F();ti();hc();mc=class{constructor({logger:e,adRefresher:t,dispensaryData:r,freestar:s,win:n=window}){y(this,"keyboardIsOpen",!1);y(this,"resizeDelay",1e3);var o,a,d,c;!r.fsdata.pauseRefreshOnVirtualKeyboard||[st,Pn].indexOf(s.deviceInfo.device.type)===-1||(this._freestar=s,this._adRefresher=t,this._logger=e,this._logger.setContext(l.VIRTUAL_KEYBOARD_REFRESH_CONTROL),this._win=n,this.initialOrientation=xs({width:(a=(o=this._win)==null?void 0:o.visualViewport)==null?void 0:a.clientWidth,height:(c=(d=this._win)==null?void 0:d.visualViewport)==null?void 0:c.clientHeight}),this.maxViewportHeight=this._getMaxViewportHeight(),this._attachListeners())}_attachListeners(){this._win.visualViewport.addEventListener("resize",e=>this.onResizeDelayed(e))}_getMaxViewportHeight(){let e=document.createElement("div");e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="1px",e.style.height="100svh",e.style.visibility="hidden",document.body.appendChild(e);let t=e.offsetHeight;return e.remove(),t}onResizeDelayed(){this.keyboardIsOpen?(clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{this._onResize()},this._freestar.keyboardRefreshControlDelay||this.resizeDelay)):(clearTimeout(this.resizeTimeout),this._onResize())}_onResize(){var r,s;let e=this._win.visualViewport.height,t=xs({width:(r=document==null?void 0:document.documentElement)==null?void 0:r.clientWidth,height:(s=document==null?void 0:document.documentElement)==null?void 0:s.clientHeight});t!==this.initialOrientation?(this.initialOrientation=t,this.maxViewportHeight=this._getMaxViewportHeight()):e>this.maxViewportHeight&&(this.maxViewportHeight=e),e<.9*this.maxViewportHeight?this.keyboardIsOpen||(this.keyboardIsOpen=!0,this.onKeyboardOpen()):this.keyboardIsOpen&&(this.keyboardIsOpen=!1,this.onKeyboardClose())}onKeyboardOpen(){this._logger.log("Keyboard opened, pausing ad refresh."),this._adRefresher.pause()}onKeyboardClose(){this._logger.log("Keyboard closed, resuming ad refresh."),this._adRefresher.resume()}};A.class(mc,{token:l.VIRTUAL_KEYBOARD_REFRESH_CONTROL,dependencies:[l.LOGGER,l.AD_REFRESHER,l.DISPENSARY_DATA,l.FREESTAR,{token:"window",alias:"win"}]})});var Ds,wk,kg,gc,Lg,Bg,_c=f(()=>{Ds="rbm",wk=`fs.${Ds}`,kg=["ttd","ttdfsx","ttds2s"],gc="RENDER BID MIDWAY V1.0.0",Lg={title:gc,styles:"background: black; color: white; border-radius: 3px; padding: 3px"},Bg=1});var Ns,Fg,Ug,Gg=f(()=>{_c();Re();Qe();Ns={blockedSiteIDs:[1575,1910,1748,1841,6326,2410,1783,1675,1676,1677,1678,1679,1680,1681,1682,1683,1684,1685,1686,1687,1688,1689,1690,1691,1692,1693,1694,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1985,2095,2132,2170,2232,2244,2511,5491,1756,2372,1556,2086,2087,2192,2193,2194,2195,2196,2197,2198,2199,2200,2201,2202,2203,2204,2205,2206,2207,2208,2209,2210,2211,2212,2213,2214,2215,2216,2217,2218,2219,2351,2352,2353,2354,2355,2356,2357,2358,2359,2360,2361,2362,2363,2364,2365,2366,2367,2394,2395,2396,2397,2398,2399,2400,2401,2402,2403,2404,2405,2426,3516,5344,3107,3108,3109,3110,3111,3234,6152,6603,1556,1495,6302],default:{percentage:.4},siteSpecific:[{activeSiteIds:[6615,6125,533],percentage:.5},{activeSiteIds:[5926,5927,5928,5929,5930,5931,5932,5933,5934,5935,5936,5937,5938,5939,5940,5941,5942,5943,5944,5960],percentage:2},{activeSiteIds:[7185],percentage:.4,timeout:60*1e3*5}]},Fg=()=>{let i=JSON.parse(Q({key:`fs.${Ds}`}))||{};if(!Ns.blockedSiteIDs.includes(freestar.fsdata.siteId)&&typeof i.inTest=="undefined"){let e=Ns.siteSpecific.filter(s=>{if(s.activeSiteIds.includes(freestar.fsdata.siteId))return s}).shift(),t=(e==null?void 0:e.percentage)||Ns.default.percentage,r=Math.random();i.inTest=r<t,e!=null&&e.timeout&&(i.timeout=e==null?void 0:e.timeout,i.timestamp=Date.now()),ve({key:`fs.${Ds}`,value:i,type:K.object})}return i.inTest&&i.side===1&&freestar.log(Lg,"Session is participating in test..."),z(`fs-use-${Ds}`)||i.inTest},Ug=()=>Ns.siteSpecific.filter(e=>{if(e.activeSiteIds.includes(freestar.fsdata.siteId))return e}).shift()||Ns.default});var Ec,yc,Vg=f(()=>{U();F();qi();Ge();Ms();_c();Gg();Ec=class{constructor({placement:e,nativeRenderManager:t,prebid:r=null,logger:s,analytics:n}){this.placement=e,this.prebid=r,this._analytics=n,this._logger=s,this._nativeRenderManager=t,this.placement.rbmOptions={cap:Bg};let o=Ug();this.frequencyCapManager=new kr({placement:this.placement,product:"rbm",timeout:o==null?void 0:o.timeout,timestamp:o==null?void 0:o.timestamp})}renderAd(){if(!this.prebid||(this.frequencyCapManager.cleanUpIfTimedOut(),this._logger.log([this.prebid.code,`Can render an ad? ${this.frequencyCapManager.allowProduct()}`]),!this.frequencyCapManager.allowProduct()))return;let e=this._nativeRenderManager.getHighestBid(this.prebid.code,kg);this._logger.log([this.prebid.code,`Found an ad?? ${!!e}`]),e&&this._nativeRenderManager.renderAd(e,this.prebid.code).then(()=>{this.frequencyCapManager.incrementIteration();let{adId:t}=e;this._analytics.track(new X({eventName:"RENDER_BID_MIDWAY",eventType:"SUCCESS",data:{adId:t}}))}).catch(t=>{this._logger.log([this.prebid.code,`Error native rendering prebid ad: ${t}`])})}},yc=class{constructor({nativeRenderManager:e,logger:t,analytics:r}){this._nativeRenderManager=e,this._logger=t,this._analytics=r,this._logger.setContext(gc),this.trackers={}}renderAd({elementId:e}){if(Fg())try{if(!this._nativeRenderManager.isEnabled){this._logger.log("Native render is not enabled");return}let t=this.getAdUnit(e);if(!t){this._logger.log(`No adUnit found for elementId: ${e}`);return}let{placement:r,prebid:s}=t;if(!(r!=null&&r.name)){this._logger.log(`Invalid placement for elementId: ${e}`);return}this.ensureTracker(r,s),this.trackers[r.name].renderAd()}catch(t){this._logger.log(`Error in renderAd: ${t.message}`)}}getAdUnit(e){return this.adUnitManager||(this.adUnitManager=ne),this.adUnitManager.getAdUnitBySlotElementId(e)||this.adUnitManager.getAdUnitByPrebidCode(e)}ensureTracker(e,t){this.trackers[e.name]||(this.trackers[e.name]=new Ec({placement:e,prebid:t,nativeRenderManager:this._nativeRenderManager,logger:this._logger,analytics:this._analytics}))}};A.class(yc,{token:l.RENDER_BID_MIDWAY,dependencies:[l.NATIVE_RENDER_MANAGER,l.LOGGER,l.ANALYTICS]})});var fA,Sc,Hg=f(()=>{U();F();fA=6e3,Sc=class{constructor(){this.lastRefreshTime=0}allowed(){return Date.now()-this.lastRefreshTime>fA}updateLastRefreshTime(){this.lastRefreshTime=Date.now()}};A.class(Sc,{token:l.GLOBAL_REFRESH_USER_IDS_STATE})});var Ic,zg=f(()=>{bd();te();U();F();Ic=class extends rr{constructor({gamManager:e,logger:t,freestar:r,rebidManager:s,bidsManager:n}){super(),this._gamManager=e,this._freestar=r,this._logger=t,this._rebidManager=s,this._bidsManager=n}fetchBids({elementId:e,refreshLibraryItem:t}){let r=this.getSignal(e);t.dataRefreshId=Ae(),this._freestar.refreshSlots.push({refreshId:t.dataRefreshId});let s=this._gamManager.instance.pubads().getSlots().find(n=>n.getSlotElementId()===e);this._bidsManager.requestBids({elementIds:[e],slots:[s],sendAdserverSignal:r})}refresh({elementId:e,refreshLibraryItem:t}){var n;this._logger.log(`freestar.refresh ${e}`),this._rebidManager.reset({elementId:e}),t.setRefreshTime();let r=this._gamManager.instance.pubads().getSlots().find(o=>o.getSlotElementId()===e);this._gamManager.setSlotTargeting({slot:r,key:"fsrefresh",value:(n=t.timesRefreshed)!=null?n:0});let s=this.getPendingRequest(e);typeof s=="function"?s():(t.dataRefreshId=Ae(),this._freestar.refreshSlots.push({refreshId:t.dataRefreshId}),this._bidsManager.requestBids({elementIds:[e],slots:[r]}))}};A.class(Ic,{token:l.DEFAULT_REFRESHER,dependencies:[l.FREESTAR,l.LOGGER,l.REBID_MANAGER,l.GAM_MANAGER,l.BIDS_MANAGER]})});var qg=f(()=>{Og();xg();Mg();Vg();Hg();zg();dc()});var Ac,Yg=f(()=>{te();De();F();Yi();br();U();hr();Ne();Ac=class{constructor({bidsManager:e,analytics:t,gamManager:r,logger:s}){this._bidsManager=e,this._gamManager=r,this._analytics=t,this._logger=s,this._logger.setContext(l.REBID_MANAGER),this._idealAdStackManager=J(),this.map={}}getStatus({adUnitCode:e=null}){if(e)return this.getStatusByAdUnitCode({adUnitCode:e})}getStatusByAdUnitCode({adUnitCode:e}){return this.map[e]}isAbleToRebid({elementId:e}){return this.map[e]?this.map[e].count<1:!0}isValidPlacement({placement:e=!1}){return e&&!e.interstitialOptions.active}rebid({elementId:e,slot:t}){this._logger.log(`Rebidding for ${e}`),this._bidsManager.requestBids({elementIds:[e],slots:t})}handleAdBlocked({elementId:e}){if(!this._idealAdStackManager.isRebidAllowed()){this._logger.log(`DAS rebid rules prevent rebid for blocked ad on ${e}`);return}if(!this.isAbleToRebid({elementId:e})){this._logger.log(`Blocked ad rebid attempts exceeded for ${e}`);return}this.track({elementId:e});let t=re({name:ge({slotId:e})}),r=this._gamManager.instance.pubads().getSlots().find(s=>s.getSlotElementId()===e);r&&this.updateKeyValues({slot:r,data:{[de.REBID]:String(this.map[e].count)}}),ht().getFloorsData({placement:t,slotId:e,callback:({result:s})=>{this._logger.log(`Floors called for rebid for blocked ad on ${t.name}`),s&&this._gamManager.setSlotTargeting({slot:r,value:s}),this.rebid({elementId:e,slot:r})},isRebid:!0})}handleNoBidScenario(e,t){let{slot:r}=e,s=re({name:ge({slotId:t})});if(this._analytics.track(new X({eventName:`EVENT_IS_EMPTY_CAN_REBID=${this.isValidPlacement({placement:s})&&this.isAbleToRebid({elementId:t})}`,eventType:"REBID",data:{event:e}})),!!this.isValidPlacement({placement:s})){if(this.isAbleToRebid({elementId:t})){this.track({elementId:t}),this.updateKeyValues({slot:r,data:{[de.REBID]:String(this.map[t].count)}}),ht().getFloorsData({placement:s,slotId:t,callback:({result:n})=>{this._logger.log(`Floors called for rebid for blocked ad on ${s.name}`),n&&this._gamManager.setSlotTargeting({slot:r,value:n}),this.rebid({elementId:t,slot:r})},isRebid:!0});return}this._logger.log(`Rebid attempts exceeded ${t}`),this.reset({elementId:t})}}resetRebidStatus(e){this.map[e]&&(this.reset({elementId:e}),this._logger.log(`Rebid successful ${e}`))}reset({elementId:e}){let t=this._gamManager.getSlot({elementId:e});t&&this.updateKeyValues({slot:t,data:{[de.REBID]:"0"}}),delete this.map[e]}track({elementId:e,type:t="EMPTYRESPONSE"}){this.map[e]||(this.map[e]={count:0,type:t}),this.map[e].count+=1}updateKeyValues({slot:e,data:t}){this._gamManager.setSlotTargeting({slot:e,value:t})}};A.class(Ac,{token:l.REBID_MANAGER,dependencies:[l.BIDS_MANAGER,l.ANALYTICS,l.LOGGER,l.GAM_MANAGER]})});var $g=f(()=>{Yg()});var jg=f(()=>{Re();ni();Gi()});var Kg,Wg=f(()=>{Kg={sampleInterval:6e4,maxSnapshots:180,warningThresholdMb:200,criticalThresholdMb:500,minLeakThreshold:512e3}});var hi,Qg=f(()=>{hi=i=>{let e=["B","KB","MB","GB"],t=i,r=0;for(;t>=1024&&r<e.length-1;)t=t/1024,r++;return`${t.toFixed(2)} ${e[r]}`}});var wa,Jg=f(()=>{Wg();F();Yi();Re();ni();Qg();U();wa=class{constructor(e){this._logger=e.logger,this._logger.setContext(l.MEMORY_MONITOR),this._analytics=e.analytics,this._deviceInfo=e.deviceInfo,this._geoInfo=e.geoInfo,this._refreshLibrary=e.refreshLibrary;let r=!!Q({key:Bi}),s=window.performance&&window.performance.memory,n=r||Math.random()<=.05;if(!s||!n){this.enabled=!1,this.intervalId=null;return}this.enabled=!0,this.snapshots=[],this.intervalId=null,this.options=b({},Kg)}start(){this.enabled&&(this._takeSnapshot(),this.intervalId||(this.intervalId=setInterval(()=>this._takeSnapshot(),this.options.sampleInterval)))}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}_getDisplayedAdsCount(){var r;let e=Object.keys(((r=window==null?void 0:window.freestar)==null?void 0:r.refreshLibrary)||{}).length||0,t=this._refreshLibrary.globalRefreshCount;return e+t}_getMemoryUsage(){let{usedJSHeapSize:e=0,totalJSHeapSize:t=0,jsHeapSizeLimit:r=0}=window.performance&&window.performance.memory||{};return{usedJSHeapSize:e,totalJSHeapSize:t,jsHeapSizeLimit:r}}_takeSnapshot(){let e=this._getMemoryUsage(),t=Date.now();if(this.snapshots.length>0){let r=this.snapshots[this.snapshots.length-1],s=(t-r.timestamp)/1e3,n=e.usedJSHeapSize-r.usedJSHeapSize,o=1024*1024,a=n/s/o,d=a*60;this._trackGrowthRate({currentUsage:e.usedJSHeapSize,previousUsage:r.usedJSHeapSize,memoryDiff:n,growthRatePerSecond:a,growthRatePerMinute:d,timeDiffSeconds:s})}this.snapshots.push(b({timestamp:t},e)),this.snapshots.length>this.options.maxSnapshots&&this.snapshots.shift(),e.usedJSHeapSize>this.options.criticalThresholdMb*1024*1024?this._handleCriticalMemory(e):e.usedJSHeapSize>this.options.warningThresholdMb*1024*1024&&this._handleWarningMemory(e)}_trackGrowthRate({currentUsage:e,previousUsage:t,memoryDiff:r,growthRatePerSecond:s,growthRatePerMinute:n,timeDiffSeconds:o}){let a=this._formatDeviceInfo(),d=this._getDisplayedAdsCount(),c=new X({eventName:"MEMORY_MONITOR",eventType:"GROWTH_RATE",data:{currentUsage:e,previousUsage:t,memoryDiff:r,growthRatePerSecond:s.toFixed(2),growthRatePerMinute:n.toFixed(2),timeDiffSeconds:o,currentUsageFormatted:hi(e),deviceInfo:a,timestamp:Date.now(),adsCount:d}});this._analytics.track(c)}_detectMemoryLeak(){if(this.snapshots.length<3)return null;let e=this.snapshots.slice(-3),t=[];for(let s=1;s<e.length;s++){let n=e[s-1],o=e[s],a=(o.timestamp-n.timestamp)/1e3,c=(o.usedJSHeapSize-n.usedJSHeapSize)/a;t.push(c)}return t.every(s=>s>this.options.minLeakThreshold)?{averageGrowthRate:t.reduce((s,n)=>s+n,0)/t.length,lastSnapshot:this.snapshots[this.snapshots.length-1]}:null}getReport(){if(this.snapshots.length===0)return null;let e=this.snapshots[this.snapshots.length-1],t=this.snapshots[0],r=e.usedJSHeapSize-t.usedJSHeapSize,s=(e.timestamp-t.timestamp)/1e3;return{currentUsage:hi(e.usedJSHeapSize),totalGrowth:hi(r),growthRate:hi(r/s)+"/s",snapshots:this.snapshots,potentialLeak:this._detectMemoryLeak()}}_handleWarningMemory(e){this._logger.log(`Memory usage warning: ${hi(e.usedJSHeapSize)}`)}_handleCriticalMemory(e){this._logger.log(`Critical memory usage: ${hi(e.usedJSHeapSize)}`);let t=this._formatDeviceInfo(),r=this._getDisplayedAdsCount();this._analytics.track(new X({eventName:"MEMORY_MONITOR",eventType:"CRITICAL",data:{usedJSHeapSize:e.usedJSHeapSize,totalJSHeapSize:e.totalJSHeapSize,jsHeapSizeLimit:e.jsHeapSizeLimit,formattedUsed:hi(e.usedJSHeapSize),deviceInfo:t,timestamp:Date.now(),adsCount:r}}))}_formatDeviceInfo(){var t,r,s,n,o,a,d,c;let e=(t=this._geoInfo)==null?void 0:t.iso;return{browser:{name:(r=this._deviceInfo.browser)==null?void 0:r.name,version:(s=this._deviceInfo.browser)==null?void 0:s.version},device:{type:(n=this._deviceInfo.device)==null?void 0:n.type,os:(o=this._deviceInfo.os)==null?void 0:o.name,osVersion:(a=this._deviceInfo.os)==null?void 0:a.version},engine:{name:(d=this._deviceInfo.engine)==null?void 0:d.name,version:(c=this._deviceInfo.engine)==null?void 0:c.version},geo:{country:e}}}};A.class(wa,{token:l.MEMORY_MONITOR,defaultAlias:"memoryMonitor",dependencies:[l.LOGGER,l.FREESTAR,l.ANALYTICS,l.DEVICE_INFO,l.GEO_INFO,l.REFRESH_LIBRARY],factory:({dependencies:i})=>new wa(i)})});var Zg=f(()=>{jg();Jg()});var mi,Ta=f(()=>{mi=class{getElement(){throw new Error("Method not implemented.")}destroy(){}get enabled(){return!0}}});var uA,va,bc,wc,Xg=f(()=>{U();Ta();$e();_e();F();ot();he();vo();Rl();xi();uA="fsbranding",va=class extends mi{constructor({placement:e,dispensaryData:t,win:r=window}){super(),this._win=r,this._placement=e,this._dispensaryData=t}get enabled(){return!!this.getLogoUrl(this._placement)}getElement(){return this.enabled?B({type:"a",style:{color:"#999"},attributes:{href:this.getLink(this._placement),target:"_blank",rel:"noreferrer"},textContent:"Freestar.com"},this._win.document):null}getLogoUrl(){var s,n,o;let e=z(uA,this._win);if((s=this._placement)!=null&&s.freestarBrandingDisabled&&!e)return null;let{branding:t}=this._dispensaryData.fsdata,r=As(t);return e&&(r=As(Oe.GREEN)),(o=(n=this._placement)==null?void 0:n.stickyFooterOptions)!=null&&o.active?r:[Oe.GREEN_FOOTER_ONLY,Oe.GRAYSCALE_FOOTER_ONLY].includes(t)?null:r}getLink(e){let t=ke(e);return`https://ads.${ln}/?${new URLSearchParams({[ms]:"branding",[hs]:t,[ps]:this._dispensaryData.fsdata.domain,[gs]:e.name}).toString()}`}},bc=class extends va{getElement(){let e=this.getLogoUrl(this._placement);return e?B({type:"div",classList:["__fs-branding"],children:[B({type:"a",attributes:{href:this.getLink(this._placement),target:"_blank",rel:"noreferrer"},children:[B({type:"img",src:e,attributes:{alt:"freestar",width:"14",height:"14"}},this._win.document)]},this._win.document)]},this._win.document):null}},wc=class{constructor({dispensaryData:e,win:t}){this._dispensaryData=e,this._win=t}createLink(e){return new va(this._getParams(e))}createIcon(e){return new bc(this._getParams(e))}getGlobalBranding(){let{branding:e}=this._dispensaryData.fsdata;return!e||[Oe.NO_BRANDING,Oe.GRAYSCALE_FOOTER_ONLY,Oe.GREEN_FOOTER_ONLY].includes(e)?null:e}_getParams(e){return{placement:e,dispensaryData:this._dispensaryData,win:this._win}}};A.class(wc,{token:l.BRANDING,dependencies:[l.DISPENSARY_DATA,{token:l.WINDOW,alias:"win"}]})});var Tc,pA,Ra,vc,Rc,Oc,e_=f(()=>{U();Ta();$e();_e();F();us();Tc="Report This Ad",pA="fsreportad",Ra=class extends mi{constructor({id:t,placement:r,confiantReportThisAdEnabled:s,idealAdStackManager:n,confiant:o,win:a=window}){super();y(this,"_report",t=>{t.preventDefault(),t.stopPropagation(),this._confiant.reportSingleAd(this._id)});this.placement=r,this._confiantReportThisAdEnabled=s,this._confiant=o,this._id=t,this._win=a,this._idealAdStackManager=n,this._abortController=new AbortController,this._createElement()}getElement(){return this._element}destroy(){var t;this._abortController.abort(),(t=this._element)==null||t.remove(),this._element=null}_createElement(){throw new Error("Method not implemented.")}get enabled(){var r,s;return z(pA,this._win)?!0:(s=(r=this.placement)==null?void 0:r.adQualityOptions)!=null&&s.disabled?!1:!!(Dn()==="CONFIANT"&&this._confiantReportThisAdEnabled&&this._idealAdStackManager.allowConfiant())}},vc=class extends Ra{_createElement(){this.enabled&&(this._element=B({type:"button",classList:["fs-report-ad-button"],attributes:{"aria-label":Tc},innerHTML:Tc},this._win.document),this._element.addEventListener("click",this._report,{signal:this._abortController.signal}))}},Rc=class extends Ra{_createElement(){if(!this.enabled)return null;let e=B({type:"button",classList:["fs-report-ad-button-icon"],attributes:{"aria-label":Tc}},this._win.document);e.addEventListener("click",this._report,{signal:this._abortController.signal}),this._element=B({children:[e]},this._win.document)}},Oc=class{constructor({dispensaryData:e,win:t,idealAdStackManager:r,adQualityManager:s}){var n,o;this._confiant=s.provider,this._win=t,this._idealAdStackManager=r,this._confiantReportThisAdEnabled=(o=(n=e.fsdata)==null?void 0:n.adQualityOptions)==null?void 0:o.confiantReportThisAdEnabled}createTextButton(e,t){return new vc(this._getParams(e,t))}createIconButton(e,t){return new Rc(this._getParams(e,t))}_getParams(e,t){return{id:e,placement:t,confiant:this._confiant,confiantReportThisAdEnabled:this._confiantReportThisAdEnabled,win:this._win,idealAdStackManager:this._idealAdStackManager}}};A.class(Oc,{token:l.REPORT_AD,dependencies:[l.DISPENSARY_DATA,l.IDEAL_AD_STACK_MANAGER,{token:l.WINDOW,alias:"win"},l.AD_QUALITY_MANAGER]})});var Oa,Cc,Pc,xc,t_=f(()=>{U();Ta();De();F();ss();Wn();Ut();te();ca();Oa=class extends mi{constructor(e=window){super(),this._win=e}getElement(){return B({classList:["fs-branding-spacer"]},this._win.document)}},Cc=class{constructor(e=[]){this._element=null,this._components=e}getElement(){return this._element}hide(){this._element&&(this._element.style.visibility="hidden")}show(){this._element&&(this._element.style.visibility="visible")}destroy(){var e;this._components.forEach(t=>t.destroy()),(e=this._element)==null||e.remove(),this._element=null,this._components=[]}},Pc=class extends Cc{constructor(e=[],t=window){super(e);let r=this._components.flatMap(s=>s!=null&&s.enabled?s:[]);!r.length||r.every(s=>s instanceof Oa)||(this._element=B({classList:["__fs-ancillary"],style:{visibility:"hidden"},children:r.map(s=>s.getElement())},t.document))}},xc=class{constructor({freestar:e,gamManager:t,branding:r,reportAd:s,win:n}){this._freestar=e,this._gamManager=t,this._branding=r,this._reportAd=s,this._win=n,this._items=new Map,this._handleSlotEvents()}_handleSlotEvents(){this._gamManager.instance.pubads().addEventListener(Me,e=>{let t=e.slot.getSlotElementId(),r=this._win.document.getElementById(t),s=r==null?void 0:r.querySelector(`#${CSS.escape(t)} > div[id*="google_ads_iframe_"]`);this.create({id:t,placement:re({name:ge({slotId:t})}),container:s})}),this._gamManager.instance.pubads().addEventListener(Ft,e=>{let t=e.slot.getSlotElementId();this.hide(t)})}create({id:e,placement:t,container:r}){var u,p;if([e,t,r,this.isEnabled({id:e,placement:t})].some(m=>!m))return;let s=this._items.get(e),n=r.querySelector("__fs-ancillary");if(s&&n){s.show();return}s==null||s.hide(),s==null||s.destroy(),n==null||n.remove();let o=(u=this._branding)==null?void 0:u.createIcon(t),a=(p=this._reportAd)==null?void 0:p.createTextButton(e,t),d=new Pc([o,new Oa(this._win),a],this._win);if(n=d.getElement(),!n)return;this._items.set(e,d),r.appendChild(n);let[c]=r.getElementsByTagName("iframe")||[];c&&dg(c).then(()=>{d.show()}).catch(()=>{freestar.log(20,"Not applying ancillary, target Iframe is too small",c)})}get(e){return this._items.get(e)||null}show(e){let t=this._items.get(e);t&&t.show()}hide(e){let t=this._items.get(e);t&&t.hide()}isEnabled({id:e,placement:t}){if(t&&(Kn(t)||i_(t.sizes||[])))return!1;if(e){let r=this._win.document.getElementById(e);return(r==null?void 0:r.getAttribute(dn))!=="false"}return!0}};A.class(xc,{token:l.ANCILLARY,dependencies:[l.GAM_MANAGER,l.BRANDING,l.REPORT_AD,{token:l.WINDOW,alias:"win"}]})});function r_(i={},e={}){return!!(i.isCoppaInventory||e.isCOPPA)}var Ca,Dc=f(()=>{Ca=class{constructor(e,t,r){this.isCoppaInventory=!1,this.global=e,this.prebid=r,this._gamManager=t}init(){var e;(e=this.global.config)!=null&&e.isCOPPA&&this.global.config.isCOPPA===!0&&this.set()}set(){this.isCoppaInventory=!0,this.logMethodCall("set"),this.updatePrebidJs(),this.updateGAM()}unset(){this.isCoppaInventory=!1,this.logMethodCall("unset"),this.updatePrebidJs(),this.updateGAM()}info(){return this.global.log("COPPA status is set to "+this.isCoppaInventory),this.isCoppaInventory}logMethodCall(e){this.global.log(`COPPA method ${e} called at ${new Date().toISOString()}`)}updatePrebidJs(){this.prebid&&this.prebid.setConfig({coppa:this.isCoppaInventory})}updateGAM(){this._gamManager.setCoppa(this.isCoppaInventory)}}});function s_(i){if(i==="true")return!0;if(i==="false")return!1}function Pa(i,e,t,r){let s=t&&t.length,n=(r==null?void 0:r.asi)&&(r==null?void 0:r.sid);if(e===rt&&!s&&!n)return;let o=e===rt&&!s&&n,a=o?r.asi:ln,d=o?r.sid:`${i}`;return{ver:"1.0",complete:1,nodes:[{asi:a,sid:d,hp:1}]}}var xa=f(()=>{he()});var Da,gi,n_,o_,Nc=f(()=>{Da="amazon",gi="apstag",n_="//c.amazon-adsystem.com/aax2/apstag.js",o_="0ab198dd-b265-462a-ae36-74e163ad6159"});var Mc,a_=f(()=>{U();F();Ne();Dc();le();he();xa();Nc();Ve();te();ls();qi();Ge();ys();U();Ut();bt();_e();Mc=class{constructor({freestar:e,dispensaryData:t,win:r=window,gamManager:s,idealAdStackManager:n,analytics:o,logger:a}){this._freestar=e,this._dispensaryData=t,this._idealAdStackManager=n(),this._window=r,this._instance=null,this.isEnabled=!1,this._analytics=o,this._gamManager=s,this._bids={},this._seen=new Set,this._logger=a}get instance(){if(!this._instance)throw new Error("Amazon is disabled or haven't been initiated.");return this._instance}init(){return T(this,null,function*(){return new Promise(e=>{var t;if(this._idealAdStackManager.getBypassFirstAuction())e(this);else{let r=this._dispensaryData.fsdata.networks.find(({slug:s})=>s===Da);if(r&&!r_(this._freestar.coppa,this._freestar.config)){let{clientServer:s}=this._idealAdStackManager.getConfig();if(s[Da]!=="off"){let n=r.sizes.find(o=>o.params.publisherId);this._freestar.amazonPublisherId=Sn((t=n==null?void 0:n.params)==null?void 0:t.publisherId)?n.params.publisherId:o_,this._loadAmazonBidder(e)}else e(this)}else e(this)}})})}track(e){return T(this,null,function*(){let t=Date.now();for(let r of e){if(r.amznbid==="1"||r.amznbid==="2")continue;let s=ne.getAdUnitBySlotElementId(r.slotID);if(!s)continue;let{placement:n,slot:o}=s;if(n.dfpId.includes(wt)&&!this._bids[r.amzniid]){let a=this._gamManager.getSlotTargeting({slot:o,key:"fs-auuid"});if(!Array.isArray(a)||a.length===0||!a[0])continue;let d=a[0],u=(yield G.instance.resolve(l.AUCTION_MANAGER)).getAuctionByFsAuctionId(d);this._bids[r.amzniid]=b({responseTimestamp:t,requestTimestamp:u.timestamp||null,fsAuctionId:d},r)}}for(let[r,s]of Object.entries(this._bids))s!=null&&s.responseTimestamp&&t-s.responseTimestamp>=30*1e3&&delete this._bids[r]})}_handleBidWonEvent(e){let{amzniid:t}=e||{};if(!t)return;let r=this._bids[t];if(!r)return;let s=ne.getAdUnitBySlotElementId(r.slotID);if(!s)return;let{placement:n,slot:o}=s;if(!n||!o)return;let{name:a}=n;if(!this._dispensaryData.locData)return;let{iso:d}=this._dispensaryData.locData,{fsAuctionId:c,amznp:u,amznbid:p,slotID:m,requestTimestamp:h,responseTimestamp:_}=r,I=this._gamManager.getSlotTargeting({slot:o,key:"floors_id"}),S=Array.isArray(I)&&I.length>0?I[0]:null,g=new Yo({amzniid:t,bidder:u,adUnitCode:a,isRefresh:this._freestar.refreshLibrary&&this._freestar.refreshLibrary[a]?this._freestar.refreshLibrary[a].timesRefreshed>0:!1,countryCode:d,auctionId:c,fsuuid:ai({slotId:m,slot:s.slot,googletag:this._window.googletag}),bidFloor:S,hashedCpm:p,requestTimestamp:h,responseTimestamp:_},Be.IMMEDIATE);this._analytics.track(g)}_getRenderImp(){return new Proxy(this._window[gi].renderImp,{apply:(t,r,s)=>{try{let n=null;if(s[1]?n=s[1]:s[0]&&typeof s[0]=="object"&&"amzniid"in s[0]&&(n=s[0].amzniid),n){if(this._seen.has(n)||this._handleBidWonEvent({amzniid:n}),this._seen.size>=1e3){let o=this._seen.values().next().value;this._seen.delete(o)}this._seen.add(n)}return t.apply(r,s)}catch(n){let o=new X({eventType:"amazonRenderImpError",eventName:"amazon_render_imp_error",data:{message:n.message,stack:n.stack}},Be.IMMEDIATE);this._analytics.track(o),this._freestar.log(1,`Amazon renderImp error: ${n.message}`)}}})}_loadAmazonBidder(e){var t,r,s,n,o;if(!this._window[gi]){let a=(d,c)=>{this._window[gi]._Q.push([d,c])};this._window[gi]={init:function(){a("i",arguments)},fetchBids:function(){a("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]}}(o=this._window[gi])==null||o.init({pubID:this._freestar.amazonPublisherId,adServer:"googletag",schain:this._generateAmazonSchain(this._dispensaryData.fsdata.companyId,(r=(t=this._dispensaryData.fsdata.schain)==null?void 0:t.type)!=null?r:rt,(n=(s=this._dispensaryData.fsdata.schain)==null?void 0:s.bidderOverrides)!=null?n:[])},()=>{this.isEnabled=!0,this._window[gi].renderImp=this._getRenderImp(),this._instance=this._window[gi],e(this)}),Ee(n_,null,null,null,!0,void 0,!1,a=>{var d;(d=this._logger)==null||d.log(["Amazon script loading failed with error:",a]),e(this)})}_generateAmazonSchain(e,t,r){let s=r&&r.length&&r.includes(Fu);if(!(t===rt&&!s)&&!(t===Ri&&s))return Pa(e,t,r)}_isAmazonAd(e){var t;return(t=e.bidders)==null?void 0:t.some(({bidder:r})=>r===Da)}_formatAps(e){var d;let{name:t,dfpId:r,sizeMappings:s,selectedSize:n}=e,o=n!=null?n:s.find(c=>_t()>=c.viewport.size[0]),a=(d=o==null?void 0:o.size)!=null?d:[];return a=a.filter(c=>c[0]!==35843),kt({slotID:t,slotName:r,sizes:a})}_getPlacementByDfpId(e){return this._dispensaryData.fsdata.placements.find(({dfpId:t})=>t===e)}_getAllAmazonSlots(){return this._dispensaryData.fsdata.placements.filter(e=>this._isAmazonAd(e)&&Na(e)).map(e=>this._formatAps(e))}setupAmazonSlots(e){let t=[];return e&&!Array.isArray(e)&&(e=[e]),e?e.forEach(r=>{let s=null;try{s=this._freestar.dynamicSlotLibrary[r.getSlotElementId()],s&&(s=re({name:s})),s||(s=this._dispensaryData.fsdata.placements.find(({slotId:n})=>r.getSlotElementId()===n)),s||(s=this._getPlacementByDfpId(r.getAdUnitPath()))}catch(n){freestar.log(1,`Error: ${n}`)}if(s&&this._isAmazonAd(s)){let n=r.getSizes().filter(o=>typeof o!="string").map(({width:o,height:a})=>[o,a]);if(n.length){let o={slotID:r.getSlotElementId(),slotName:r.getAdUnitPath(),sizes:n};t.push(kt(o))}}}):t=this._getAllAmazonSlots(),t}};A.object({token:l.AMAZON_MANAGER,dependencies:[{token:l.WINDOW,alias:"win"},l.FREESTAR,l.GAM_MANAGER,l.DISPENSARY_DATA,l.ANALYTICS,l.LOGGER],factory:({dependencies:i})=>new Mc(V(b({},i),{idealAdStackManager:J})).init()})});var d_=f(()=>{a_();Nc()});function O_(i,e){if(i=i||{},jt.call(this,R_),e)jt.call(this,[[Wc,Hc(i[Ii])],[Qc,Hc(i[mA])],[Z,/\?1/.test(i[yA])],[v,Vs(i[SA])],[Ur,Vs(i[v_])],[Jc,Vs(i[IA])],[ze,Vs(i[gA])],[Ki,Hc(i[EA])],[Ua,Vs(i[_A])]]);else for(var t in i)this.hasOwnProperty(t)&&typeof i[t]!==Si&&(this[t]=i[t])}function T_(i,e,t,r){return this.get=function(s){return s?this.data.hasOwnProperty(s)?this.data[s]:void 0:this.data},this.set=function(s,n){return this.data[s]=n,this},this.setCH=function(s){return this.uaCH=s,this},this.detectFeature=function(){if(qe&&qe.userAgent==this.ua)switch(this.itemType){case He:qe.brave&&typeof qe.brave.isBrave==Ba&&this.set(R,"Brave");break;case Ot:!this.get(w)&&Ei&&Ei[Z]&&this.set(w,Z),this.get(v)=="Macintosh"&&qe&&typeof qe.standalone!==Si&&qe.maxTouchPoints&&qe.maxTouchPoints>2&&this.set(v,"iPad").set(w,pe);break;case lt:!this.get(R)&&Ei&&Ei[Ur]&&this.set(R,Ei[Ur]);break;case Fr:var s=this.data,n=function(o){return s[o].getItem().detectFeature().get()};this.set(He,n(He)).set(Yt,n(Yt)).set(Ot,n(Ot)).set(Et,n(Et)).set(lt,n(lt))}return this},this.parseUA=function(){return this.itemType!=Fr&&qc.call(this.data,this.ua,this.rgxMap),this.itemType==He&&this.set(qs,zc(this.get(C))),this},this.parseCH=function(){var s=this.uaCH,n=this.rgxMap;switch(this.itemType){case He:case Et:var o=s[Qc]||s[Wc],a;if(o)for(var d in o){var c=o[d].brand||o[d],u=o[d].version;this.itemType==He&&!/not.a.brand/i.test(c)&&(!a||/chrom/i.test(a)&&c!=y_)&&(c=yi(c,{Chrome:"Google Chrome",Edge:"Microsoft Edge","Chrome WebView":"Android WebView","Chrome Headless":"HeadlessChrome"}),this.set(R,c).set(C,u).set(qs,zc(u)),a=c),this.itemType==Et&&c==y_&&this.set(C,u)}break;case Yt:var p=s[ze];p&&(p&&s[Ua]=="64"&&(p+="64"),qc.call(this.data,p+";",n));break;case Ot:if(s[Z]&&this.set(w,Z),s[v]&&(this.set(v,s[v]),!this.get(w)||!this.get(O))){var m={};qc.call(m,"droid 9; "+s[v]+")",n),!this.get(w)&&m.type&&this.set(w,m.type),!this.get(O)&&m.vendor&&this.set(O,m.vendor)}if(s[Ki]){var h;if(typeof s[Ki]!="string")for(var _=0;!h&&_<s[Ki].length;)h=yi(s[Ki][_++],b_);else h=yi(s[Ki],b_);this.set(w,h)}break;case lt:var I=s[Ur];if(I){var S=s[Jc];I==jc&&(S=parseInt(zc(S),10)>=13?"11":"10"),this.set(R,I).set(C,S)}this.get(R)==jc&&s[v]=="Xbox"&&this.set(R,"Xbox").set(C,void 0);break;case Fr:var g=this.data,E=function(L){return g[L].getItem().setCH(s).parseCH().get()};this.set(He,E(He)).set(Yt,E(Yt)).set(Ot,E(Ot)).set(Et,E(Et)).set(lt,E(lt))}return this},jt.call(this,[["itemType",i],["ua",e],["uaCH",r],["rgxMap",t],["data",TA(this,i)]]),this}function Kt(i,e,t){if(typeof i===Vr?(Fa(i,!0)?(typeof e===Vr&&(t=e),e=i):(t=i,e=void 0),i=void 0):typeof i===$c&&!Fa(e,!0)&&(t=e,e=void 0),t&&typeof t.append===Ba){var r={};t.forEach(function(d,c){r[c]=d}),t=r}if(!(this instanceof Kt))return new Kt(i,e,t).getResult();var s=typeof i===$c?i:t&&t[l_]?t[l_]:qe&&qe.userAgent?qe.userAgent:Gr,n=new O_(t,!0),o=e?wA(w_,e):w_,a=function(d){return d==Fr?function(){return new T_(d,s,o,n).set("ua",s).set(He,this.getBrowser()).set(Yt,this.getCPU()).set(Ot,this.getDevice()).set(Et,this.getEngine()).set(lt,this.getOS()).get()}:function(){return new T_(d,s,o[d],n).parseUA().get()}};return jt.call(this,[["getBrowser",a(He)],["getCPU",a(Yt)],["getDevice",a(Ot)],["getEngine",a(Et)],["getOS",a(lt)],["getResult",a(Fr)],["getUA",function(){return s}],["setUA",function(d){return zr(d)&&(s=d.length>Yc?Ys(d,Yc):d),this}]]).setUA(s),this}var hA,Yc,l_,Gr,c_,Ba,Si,Vr,$c,He,Yt,Ot,Et,lt,Fr,R,w,O,C,ze,qs,v,Hs,Z,pe,Ce,Rt,kc,zs,ks,Wc,Ki,Qc,Ur,Jc,Ua,Ii,mA,gA,_A,EA,yA,SA,v_,IA,R_,Ma,Lr,f_,u_,ji,p_,h_,m_,ka,Lc,Bc,Fc,g_,Uc,Ls,__,Bs,Gc,Vc,E_,y_,_i,AA,Fs,Us,S_,I_,Br,Gs,jc,bA,qe,Ei,wA,Ga,Kc,Fa,zr,Hc,$t,zc,jt,Hr,Vs,Ys,qc,yi,A_,b_,w_,La,TA,C_=f(()=>{hA="2.0.2",Yc=500,l_="user-agent",Gr="",c_="?",Ba="function",Si="undefined",Vr="object",$c="string",He="browser",Yt="cpu",Ot="device",Et="engine",lt="os",Fr="result",R="name",w="type",O="vendor",C="version",ze="architecture",qs="major",v="model",Hs="console",Z="mobile",pe="tablet",Ce="smarttv",Rt="wearable",kc="xr",zs="embedded",ks="inapp",Wc="brands",Ki="formFactors",Qc="fullVersionList",Ur="platform",Jc="platformVersion",Ua="bitness",Ii="sec-ch-ua",mA=Ii+"-full-version-list",gA=Ii+"-arch",_A=Ii+"-"+Ua,EA=Ii+"-form-factors",yA=Ii+"-"+Z,SA=Ii+"-"+v,v_=Ii+"-"+Ur,IA=v_+"-version",R_=[Wc,Qc,Z,v,Ur,Jc,ze,Ki,Ua],Ma="Amazon",Lr="Apple",f_="ASUS",u_="BlackBerry",ji="Google",p_="Huawei",h_="Lenovo",m_="Honor",ka="LG",Lc="Microsoft",Bc="Motorola",Fc="Nvidia",g_="OnePlus",Uc="OPPO",Ls="Samsung",__="Sharp",Bs="Sony",Gc="Xiaomi",Vc="Zebra",E_="Chrome",y_="Chromium",_i="Chromecast",AA="Edge",Fs="Firefox",Us="Opera",S_="Facebook",I_="Sogou",Br="Mobile ",Gs=" Browser",jc="Windows",bA=typeof window!==Si,qe=bA&&window.navigator?window.navigator:void 0,Ei=qe&&qe.userAgentData?qe.userAgentData:void 0,wA=function(i,e){var t={},r=e;if(!Fa(e)){r={};for(var s in e)for(var n in e[s])r[n]=e[s][n].concat(r[n]?r[n]:[])}for(var o in i)t[o]=r[o]&&r[o].length%2===0?r[o].concat(i[o]):i[o];return t},Ga=function(i){for(var e={},t=0;t<i.length;t++)e[i[t].toUpperCase()]=i[t];return e},Kc=function(i,e){if(typeof i===Vr&&i.length>0){for(var t in i)if($t(i[t])==$t(e))return!0;return!1}return zr(i)?$t(e).indexOf($t(i))!==-1:!1},Fa=function(i,e){for(var t in i)return/^(browser|cpu|device|engine|os)$/.test(t)||(e?Fa(i[t]):!1)},zr=function(i){return typeof i===$c},Hc=function(i){if(i){for(var e=[],t=Hr(/\\?\"/g,i).split(","),r=0;r<t.length;r++)if(t[r].indexOf(";")>-1){var s=Ys(t[r]).split(";v=");e[r]={brand:s[0],version:s[1]}}else e[r]=Ys(t[r]);return e}},$t=function(i){return zr(i)?i.toLowerCase():i},zc=function(i){return zr(i)?Hr(/[^\d\.]/g,i).split(".")[0]:void 0},jt=function(i){for(var e in i){var t=i[e];typeof t==Vr&&t.length==2?this[t[0]]=t[1]:this[t]=void 0}return this},Hr=function(i,e){return zr(e)?e.replace(i,Gr):e},Vs=function(i){return Hr(/\\?\"/g,i)},Ys=function(i,e){if(zr(i))return i=Hr(/^\s\s*/,i),typeof e===Si?i:i.substring(0,Yc)},qc=function(i,e){if(!(!i||!e))for(var t=0,r,s,n,o,a,d;t<e.length&&!a;){var c=e[t],u=e[t+1];for(r=s=0;r<c.length&&!a&&c[r];)if(a=c[r++].exec(i),a)for(n=0;n<u.length;n++)d=a[++s],o=u[n],typeof o===Vr&&o.length>0?o.length===2?typeof o[1]==Ba?this[o[0]]=o[1].call(this,d):this[o[0]]=o[1]:o.length===3?typeof o[1]===Ba&&!(o[1].exec&&o[1].test)?this[o[0]]=d?o[1].call(this,d,o[2]):void 0:this[o[0]]=d?d.replace(o[1],o[2]):void 0:o.length===4&&(this[o[0]]=d?o[3].call(this,d.replace(o[1],o[2])):void 0):this[o]=d||void 0;t+=2}},yi=function(i,e){for(var t in e)if(typeof e[t]===Vr&&e[t].length>0){for(var r=0;r<e[t].length;r++)if(Kc(e[t][r],i))return t===c_?void 0:t}else if(Kc(e[t],i))return t===c_?void 0:t;return e.hasOwnProperty("*")?e["*"]:i},A_={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},b_={embedded:"Automotive",mobile:"Mobile",tablet:["Tablet","EInk"],smarttv:"TV",wearable:"Watch",xr:["VR","XR"],"?":["Desktop","Unknown"],"*":void 0},w_={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[C,[R,Br+"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[C,[R,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[R,C],[/opios[\/ ]+([\w\.]+)/i],[C,[R,Us+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[C,[R,Us+" GX"]],[/\bopr\/([\w\.]+)/i],[C,[R,Us]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[C,[R,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[C,[R,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[R,C],[/quark(?:pc)?\/([-\w\.]+)/i],[C,[R,"Quark"]],[/\bddg\/([\w\.]+)/i],[C,[R,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[C,[R,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[C,[R,"WeChat"]],[/konqueror\/([\w\.]+)/i],[C,[R,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[C,[R,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[C,[R,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[C,[R,"Smart "+h_+Gs]],[/(avast|avg)\/([\w\.]+)/i],[[R,/(.+)/,"$1 Secure"+Gs],C],[/\bfocus\/([\w\.]+)/i],[C,[R,Fs+" Focus"]],[/\bopt\/([\w\.]+)/i],[C,[R,Us+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[C,[R,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[C,[R,"Dolphin"]],[/coast\/([\w\.]+)/i],[C,[R,Us+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[C,[R,"MIUI"+Gs]],[/fxios\/([\w\.-]+)/i],[C,[R,Br+Fs]],[/\bqihoobrowser\/?([\w\.]*)/i],[C,[R,"360"]],[/\b(qq)\/([\w\.]+)/i],[[R,/(.+)/,"$1Browser"],C],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[R,/(.+)/,"$1"+Gs],C],[/samsungbrowser\/([\w\.]+)/i],[C,[R,Ls+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[C,[R,I_+" Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[R,I_+" Mobile"],C],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[R,C],[/(lbbrowser|rekonq)/i],[R],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[C,R],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[R,S_],C,[w,ks]],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/(daum)apps[\/ ]([\w\.]+)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(instagram|snapchat)[\/ ]([-\w\.]+)/i],[R,C,[w,ks]],[/\bgsa\/([\w\.]+) .*safari\//i],[C,[R,"GSA"],[w,ks]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[C,[R,"TikTok"],[w,ks]],[/\[(linkedin)app\]/i],[R,[w,ks]],[/(chromium)[\/ ]([-\w\.]+)/i],[R,C],[/headlesschrome(?:\/([\w\.]+)| )/i],[C,[R,E_+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[R,E_+" WebView"],C],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[C,[R,"Android"+Gs]],[/chrome\/([\w\.]+) mobile/i],[C,[R,Br+"Chrome"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[R,C],[/version\/([\w\.\,]+) .*mobile(?:\/\w+ | ?)safari/i],[C,[R,Br+"Safari"]],[/iphone .*mobile(?:\/\w+ | ?)safari/i],[[R,Br+"Safari"]],[/version\/([\w\.\,]+) .*(safari)/i],[C,R],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[R,[C,"1"]],[/(webkit|khtml)\/([\w\.]+)/i],[R,C],[/(?:mobile|tablet);.*(firefox)\/([\w\.-]+)/i],[[R,Br+Fs],C],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[R,"Netscape"],C],[/(wolvic|librewolf)\/([\w\.]+)/i],[R,C],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[C,[R,Fs+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(amaya|dillo|doris|icab|ladybird|lynx|mosaic|netsurf|obigo|polaris|w3m|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/\b(links) \(([\w\.]+)/i],[R,[C,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[R,[C,/[^\d\.]+./,Gr]]],cpu:[[/\b((amd|x|x86[-_]?|wow|win)64)\b/i],[[ze,"amd64"]],[/(ia32(?=;))/i,/\b((i[346]|x)86)(pc)?\b/i],[[ze,"ia32"]],[/\b(aarch64|arm(v?[89]e?l?|_?64))\b/i],[[ze,"arm64"]],[/\b(arm(v[67])?ht?n?[fl]p?)\b/i],[[ze,"armhf"]],[/( (ce|mobile); ppc;|\/[\w\.]+arm\b)/i],[[ze,"arm"]],[/((ppc|powerpc)(64)?)( mac|;|\))/i],[[ze,/ower/,Gr,$t]],[/ sun4\w[;\)]/i],[[ze,"sparc"]],[/\b(avr32|ia64(?=;)|68k(?=\))|\barm(?=v([1-7]|[5-7]1)l?|;|eabi)|(irix|mips|sparc)(64)?\b|pa-risc)/i],[[ze,$t]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[v,[O,Ls],[w,pe]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[v,[O,Ls],[w,Z]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[v,[O,Lr],[w,Z]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[v,[O,Lr],[w,pe]],[/(macintosh);/i],[v,[O,Lr]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[v,[O,__],[w,Z]],[/\b((?:brt|eln|hey2?|gdi|jdn)-a?[lnw]09|(?:ag[rm]3?|jdn2|kob2)-a?[lw]0[09]hn)(?: bui|\)|;)/i],[v,[O,m_],[w,pe]],[/honor([-\w ]+)[;\)]/i],[v,[O,m_],[w,Z]],[/\b((?:ag[rs][2356]?k?|bah[234]?|bg[2o]|bt[kv]|cmr|cpn|db[ry]2?|jdn2|got|kob2?k?|mon|pce|scm|sht?|[tw]gr|vrd)-[ad]?[lw][0125][09]b?|605hw|bg2-u03|(?:gem|fdr|m2|ple|t1)-[7a]0[1-4][lu]|t1-a2[13][lw]|mediapad[\w\. ]*(?= bui|\)))\b(?!.+d\/s)/i],[v,[O,p_],[w,pe]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[v,[O,p_],[w,Z]],[/oid[^\)]+; (2[\dbc]{4}(182|283|rp\w{2})[cgl]|m2105k81a?c)(?: bui|\))/i,/\b((?:red)?mi[-_ ]?pad[\w- ]*)(?: bui|\))/i],[[v,/_/g," "],[O,Gc],[w,pe]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i,/ ([\w ]+) miui\/v?\d/i],[[v,/_/g," "],[O,Gc],[w,Z]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[v,[O,Uc],[w,Z]],[/\b(opd2(\d{3}a?))(?: bui|\))/i],[v,[O,yi,{OnePlus:["304","403","203"],"*":Uc}],[w,pe]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[v,[O,"Vivo"],[w,Z]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[v,[O,"Realme"],[w,Z]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto(?! 360)[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[v,[O,Bc],[w,Z]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[v,[O,Bc],[w,pe]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[v,[O,ka],[w,pe]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv|watch)\w+)/i,/\blg-?([\d\w]+) bui/i],[v,[O,ka],[w,Z]],[/(ideatab[-\w ]+|602lv|d-42a|a101lv|a2109a|a3500-hv|s[56]000|pb-6505[my]|tb-?x?\d{3,4}(?:f[cu]|xu|[av])|yt\d?-[jx]?\d+[lfmx])( bui|;|\)|\/)/i,/lenovo ?(b[68]0[08]0-?[hf]?|tab(?:[\w- ]+?)|tb[\w-]{6,7})( bui|;|\)|\/)/i],[v,[O,h_],[w,pe]],[/(nokia) (t[12][01])/i],[O,v,[w,pe]],[/(?:maemo|nokia).*(n900|lumia \d+|rm-\d+)/i,/nokia[-_ ]?(([-\w\. ]*))/i],[[v,/_/g," "],[w,Z],[O,"Nokia"]],[/(pixel (c|tablet))\b/i],[v,[O,ji],[w,pe]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[v,[O,ji],[w,Z]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[v,[O,Bs],[w,Z]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[v,"Xperia Tablet"],[O,Bs],[w,pe]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[v,[O,g_],[w,Z]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[v,[O,Ma],[w,pe]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[v,/(.+)/g,"Fire Phone $1"],[O,Ma],[w,Z]],[/(playbook);[-\w\),; ]+(rim)/i],[v,O,[w,pe]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[v,[O,u_],[w,Z]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[v,[O,f_],[w,pe]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[v,[O,f_],[w,Z]],[/(nexus 9)/i],[v,[O,"HTC"],[w,pe]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[O,[v,/_/g," "],[w,Z]],[/tcl (xess p17aa)/i,/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])(_\w(\w|\w\w))?(\)| bui)/i],[v,[O,"TCL"],[w,pe]],[/droid [\w\.]+; (418(?:7d|8v)|5087z|5102l|61(?:02[dh]|25[adfh]|27[ai]|56[dh]|59k|65[ah])|a509dl|t(?:43(?:0w|1[adepqu])|50(?:6d|7[adju])|6(?:09dl|10k|12b|71[efho]|76[hjk])|7(?:66[ahju]|67[hw]|7[045][bh]|71[hk]|73o|76[ho]|79w|81[hks]?|82h|90[bhsy]|99b)|810[hs]))(_\w(\w|\w\w))?(\)| bui)/i],[v,[O,"TCL"],[w,Z]],[/(itel) ((\w+))/i],[[O,$t],v,[w,yi,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[v,[O,"Acer"],[w,pe]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[v,[O,"Meizu"],[w,Z]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[v,[O,"Ulefone"],[w,Z]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[v,[O,"Energizer"],[w,Z]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[v,[O,"Cat"],[w,Z]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[v,[O,"Smartfren"],[w,Z]],[/droid.+; (a(?:015|06[35]|142p?))/i],[v,[O,"Nothing"],[w,Z]],[/(imo) (tab \w+)/i,/(infinix) (x1101b?)/i],[O,v,[w,pe]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus(?! zenw)|dell|jolla|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (hmd|imo) ([\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w ]+?)(?: bui|\)|\/)/i,/(oppo) ?([\w ]+) bui/i],[O,v,[w,Z]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i],[O,v,[w,pe]],[/(surface duo)/i],[v,[O,Lc],[w,pe]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[v,[O,"Fairphone"],[w,Z]],[/((?:tegranote|shield t(?!.+d tv))[\w- ]*?)(?: b|\))/i],[v,[O,Fc],[w,pe]],[/(sprint) (\w+)/i],[O,v,[w,Z]],[/(kin\.[onetw]{3})/i],[[v,/\./g," "],[O,Lc],[w,Z]],[/droid.+; ([c6]+|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[v,[O,Vc],[w,pe]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[v,[O,Vc],[w,Z]],[/smart-tv.+(samsung)/i],[O,[w,Ce]],[/hbbtv.+maple;(\d+)/i],[[v,/^/,"SmartTV"],[O,Ls],[w,Ce]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[O,ka],[w,Ce]],[/(apple) ?tv/i],[O,[v,Lr+" TV"],[w,Ce]],[/crkey.*devicetype\/chromecast/i],[[v,_i+" Third Generation"],[O,ji],[w,Ce]],[/crkey.*devicetype\/([^/]*)/i],[[v,/^/,"Chromecast "],[O,ji],[w,Ce]],[/fuchsia.*crkey/i],[[v,_i+" Nest Hub"],[O,ji],[w,Ce]],[/crkey/i],[[v,_i],[O,ji],[w,Ce]],[/droid.+aft(\w+)( bui|\))/i],[v,[O,Ma],[w,Ce]],[/(shield \w+ tv)/i],[v,[O,Fc],[w,Ce]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[v,[O,__],[w,Ce]],[/(bravia[\w ]+)( bui|\))/i],[v,[O,Bs],[w,Ce]],[/(mi(tv|box)-?\w+) bui/i],[v,[O,Gc],[w,Ce]],[/Hbbtv.*(technisat) (.*);/i],[O,v,[w,Ce]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[O,Ys],[v,Ys],[w,Ce]],[/droid.+; ([\w- ]+) (?:android tv|smart[- ]?tv)/i],[v,[w,Ce]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[w,Ce]],[/(ouya)/i,/(nintendo) (\w+)/i],[O,v,[w,Hs]],[/droid.+; (shield)( bui|\))/i],[v,[O,Fc],[w,Hs]],[/(playstation \w+)/i],[v,[O,Bs],[w,Hs]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[v,[O,Lc],[w,Hs]],[/\b(sm-[lr]\d\d[0156][fnuw]?s?|gear live)\b/i],[v,[O,Ls],[w,Rt]],[/((pebble))app/i,/(asus|google|lg|oppo) ((pixel |zen)?watch[\w ]*)( bui|\))/i],[O,v,[w,Rt]],[/(ow(?:19|20)?we?[1-3]{1,3})/i],[v,[O,Uc],[w,Rt]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[v,[O,Lr],[w,Rt]],[/(opwwe\d{3})/i],[v,[O,g_],[w,Rt]],[/(moto 360)/i],[v,[O,Bc],[w,Rt]],[/(smartwatch 3)/i],[v,[O,Bs],[w,Rt]],[/(g watch r)/i],[v,[O,ka],[w,Rt]],[/droid.+; (wt63?0{2,3})\)/i],[v,[O,Vc],[w,Rt]],[/droid.+; (glass) \d/i],[v,[O,ji],[w,kc]],[/(pico) (4|neo3(?: link|pro)?)/i],[O,v,[w,kc]],[/; (quest( \d| pro)?)/i],[v,[O,S_],[w,kc]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[O,[w,zs]],[/(aeobc)\b/i],[v,[O,Ma],[w,zs]],[/(homepod).+mac os/i],[v,[O,Lr],[w,zs]],[/windows iot/i],[[w,zs]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+?(mobile|vr|\d) safari/i],[v,[w,yi,{mobile:"Mobile",xr:"VR","*":pe}]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[w,pe]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[w,Z]],[/droid .+?; ([\w\. -]+)( bui|\))/i],[v,[O,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[C,[R,AA+"HTML"]],[/(arkweb)\/([\w\.]+)/i],[R,C],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[C,[R,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[R,C],[/ladybird\//i],[[R,"LibWeb"]],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[C,R]],os:[[/microsoft (windows) (vista|xp)/i],[R,C],[/(windows (?:phone(?: os)?|mobile|iot))[\/ ]?([\d\.\w ]*)/i],[R,[C,yi,A_]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[C,yi,A_],[R,jc]],[/[adehimnop]{4,7}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[C,/_/g,"."],[R,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[R,"macOS"],[C,/_/g,"."]],[/android ([\d\.]+).*crkey/i],[C,[R,_i+" Android"]],[/fuchsia.*crkey\/([\d\.]+)/i],[C,[R,_i+" Fuchsia"]],[/crkey\/([\d\.]+).*devicetype\/smartspeaker/i],[C,[R,_i+" SmartSpeaker"]],[/linux.*crkey\/([\d\.]+)/i],[C,[R,_i+" Linux"]],[/crkey\/([\d\.]+)/i],[C,[R,_i]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[C,R],[/(ubuntu) ([\w\.]+) like android/i],[[R,/(.+)/,"$1 Touch"],C],[/(android|bada|blackberry|kaios|maemo|meego|openharmony|qnx|rim tablet os|sailfish|series40|symbian|tizen|webos)\w*[-\/; ]?([\d\.]*)/i],[R,C],[/\(bb(10);/i],[C,[R,u_]],[/(?:symbian ?os|symbos|s60(?=;)|series ?60)[-\/ ]?([\w\.]*)/i],[C,[R,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[C,[R,Fs+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[C,[R,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[C,[R,"watchOS"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[R,"Chrome OS"],C],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) (\w+)/i,/(xbox); +xbox ([^\);]+)/i,/(pico) .+os([\w\.]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux)(?: arm\w*| x86\w*| ?)([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[R,C],[/(sunos) ?([\w\.\d]*)/i],[[R,"Solaris"],C],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[R,C]]},La=function(){var i={init:{},isIgnore:{},isIgnoreRgx:{},toString:{}};return jt.call(i.init,[[He,[R,C,qs,w]],[Yt,[ze]],[Ot,[w,v,O]],[Et,[R,C]],[lt,[R,C]]]),jt.call(i.isIgnore,[[He,[C,qs]],[Et,[C]],[lt,[C]]]),jt.call(i.isIgnoreRgx,[[He,/ ?browser$/i],[lt,/ ?os$/i]]),jt.call(i.toString,[[He,[R,C]],[Yt,[ze]],[Ot,[O,v]],[Et,[R,C]],[lt,[R,C]]]),i}(),TA=function(i,e){var t=La.init[e],r=La.isIgnore[e]||0,s=La.isIgnoreRgx[e]||0,n=La.toString[e]||0;function o(){jt.call(this,t)}return o.prototype.getItem=function(){return i},o.prototype.withClientHints=function(){return Ei?Ei.getHighEntropyValues(R_).then(function(a){return i.setCH(new O_(a,!1)).parseCH().get()}):i.parseCH().get()},o.prototype.withFeatureCheck=function(){return i.detectFeature().get()},e!=Fr&&(o.prototype.is=function(a){var d=!1;for(var c in this)if(this.hasOwnProperty(c)&&!Kc(r,c)&&$t(s?Hr(s,this[c]):this[c])==$t(s?Hr(s,a):a)){if(d=!0,a!=Si)break}else if(a==Si&&d){d=!d;break}return d},o.prototype.toString=function(){var a=Gr;for(var d in n)typeof this[n[d]]!==Si&&(a+=(a?" ":Gr)+this[n[d]]);return a||Si}),Ei||(o.prototype.then=function(a){var d=this,c=function(){for(var p in d)d.hasOwnProperty(p)&&(this[p]=d[p])};c.prototype={is:o.prototype.is,toString:o.prototype.toString};var u=new c;return a(u),u}),new o};Kt.VERSION=hA;Kt.BROWSER=Ga([R,C,qs,w]);Kt.CPU=Ga([ze]);Kt.DEVICE=Ga([v,O,w,Hs,Z,Ce,pe,Rt,zs]);Kt.ENGINE=Kt.OS=Ga([R,C])});var P_=f(()=>{C_();ti();Re()});var x_=f(()=>{P_()});var Va,D_=f(()=>{U();F();Va=class{constructor({logger:e,win:t=window}){y(this,"adBlockerDetected",!1);y(this,"_imageCheck",(...t)=>T(this,[...t],function*(e=atob("aHR0cHM6Ly9hLnB1Yi5uZXR3b3JrL2NvcmUvaW1ncy8xLnBuZw")){return new Promise(r=>{let s=encodeURIComponent(new Date().toISOString().split("Z")[0]),n=this._document.createElement("img");n.src=`${e}?x=${s}`,n.onload=()=>T(this,null,function*(){yield this._redirectCheck(e),n.remove(),r()}),n.onerror=()=>{this.adBlockerDetected=!0,this._logger.log("AdBlock detected: image load error"),n.remove(),r()},this._document.body.appendChild(n)})}));e.setContext(l.AD_BLOCK),this._logger=e,this._document=t.document,this._window=t}init(){return T(this,null,function*(){try{yield Promise.all([this._hiddenElementCheck(),this._imageCheck(),this._makeTestRequest()])}catch(e){this._logger.log("AdBlock initialization error:",e)}return this})}_makeTestRequest(e=atob("aHR0cHM6Ly93d3cuZ29vZ2xldGFnc2VydmljZXMuY29tL3RhZy9qcy9ncHQuanM=")){return fetch(e,{method:"HEAD",mode:"no-cors",cache:"no-store"}).then(()=>{}).catch(()=>{this._logger.log("AdBlock detected: test request failed"),this.adBlockerDetected=!0})}_hiddenElementCheck(){return T(this,null,function*(){this._document.body||(yield new Promise(n=>this._document.addEventListener("DOMContentLoaded",n)));let e=["YWQ=","YmFubmVyLWFk","YmFubmVyX2Fk","YmFubmVyLWFkLWNvbnRhaW5lcg==","YWQtc2lkZXJhaWw=","c3RpY2t5YWRz","aW1wcnRudC1jbnQ="],t=this._document.createElement("div");t.textContent=Math.random().toString(),t.setAttribute(atob("ZGF0YS1mcmVlc3Rhci1hZA=="),Math.random().toString());for(let n=0;n<e.length;n++)t.classList.add(atob(e[n]));t.style.display="block",this._document.body.appendChild(t);let r=this._window.getComputedStyle(t),s=r==null?void 0:r.display;t.remove(),s==="none"&&(this._logger.log("AdBlock detected: hidden element"),this.adBlockerDetected=!0)})}_redirectCheck(e){return T(this,null,function*(){try{let t=yield fetch(e),r=t==null?void 0:t.redirected,s=t==null?void 0:t.url;(r||(s?s!==e:!1))&&(this._logger.log("AdBlock detected: redirect check"),this.adBlockerDetected=!0)}catch(t){this._logger.log("AdBlock detected: redirect check error",t),this.adBlockerDetected=!0}})}};A.class(Va,{token:l.AD_BLOCK,dependencies:[l.LOGGER,{token:l.WINDOW,alias:"win"}],factory:({dependencies:i})=>new Va(i).init()})});var N_=f(()=>{D_()});var qr,Zc,M_=f(()=>{U();F();Vi();te();Ve();ot();Mo();he();_e();qr=class qr{constructor({logger:e,freestar:t,gamManager:r}){this._freestar=t,this._logger=e,this._gamManager=r,this._logger.setContext(l.AD_SLOTS_MANAGER),this._logger.setLevel(ue.CORE)}createAdSlot(a){return T(this,arguments,function*({placement:e,slotId:t,targeting:r={},placementName:s=null,newElement:n={},element:o=null}){let d=e.dfpId;if(s=s!=null&&s.length?s:e.name,o){this._processElement({el:o,slotId:t,placementName:s,placement:e,targeting:r,newElement:n,originalPlacementDfpId:d});return}try{let{isFound:c,element:u}=yield vh({id:t});if(!c){this._logger.log(`[createAdSlot] Element not found for slotId: ${t}`,{level:ue.CORE});return}this._processElement({el:u,slotId:t,placementName:s,placement:e,targeting:r,newElement:n,originalPlacementDfpId:d})}catch(c){this._logger.log(`[createAdSlot] Error getting element for slotId: ${t}, error: ${c}`,{level:ue.CORE})}})}_processElement({el:e,slotId:t,placementName:r,placement:s,targeting:n,newElement:o,originalPlacementDfpId:a}){if(!e){this._logger.log(`[_processElement] Element not found for slotId: ${t}`,{level:ue.CORE});return}if(!r){this._logger.log(`[_processElement] PlacementName is empty for slotId: ${t}`,{level:ue.CORE});return}if(this._configureElement(e,t,r),s=re({name:r}),!s){this._logger.log(`[_processElement] Placement not found for placementName: ${r}, slotId: ${t}`,{level:ue.CORE});return}this._freestar.dynamicSlots.push(t),this._setVideoPlayerSize(e,s),s.sizes&&s.sizes.length||s.fluidAd?this._createGamSlot({slotId:t,placement:s,targeting:n,newElement:o,originalPlacementDfpId:a,placementName:r,el:e}):this._logger.log(`[_processElement] No valid sizes or fluidAd for placement: ${r}, slotId: ${t}`,{})}_configureElement(e,t,r){e.setAttribute("name",r),this._freestar.newAdSlotIds.push(t)}_setVideoPlayerSize(e,t){let r=this._getLargestVideoSize(t);if(r.length===0)return;let s=r[0],o=this._getPlayerSizesForWidth(s)[0];this._appendVideoAttributeToElement(e,o)}_getPlayerSizesForWidth(e){return e>=qr.AD_SIZE_WIDTH_THRESHOLD?cn:fn}_appendVideoAttributeToElement(e,[t,r]){let s=e.getAttribute("data-freestar-ad")||"";e.setAttribute("data-freestar-ad",`${s} __${t}x${r}`)}_getLargestVideoSize(e){var r,s;if((r=e.selectedSize)!=null&&r.mediaTypes.includes("video"))return this._getFilteredAndSortedSizes(e.selectedSize.size)[0]||[];let t=(s=e.sizeMappings)==null?void 0:s.find(n=>n.mediaTypes.includes("video")&&_t()>=n.viewport.size[0]);return t?this._getFilteredAndSortedSizes(t.size):[]}_getFilteredAndSortedSizes(e){return e.sort(Ar).filter(t=>!qr.INVALID_SIZE_IDS.includes(t[0]))}_createGamSlot({slotId:e,placement:t,targeting:r,newElement:s,originalPlacementDfpId:n,el:o}){let a=this._gamManager.getSlot({elementId:e}),d=this._resolveChannelAndDfpId(t,s,n);if(d!==t.dfpId&&(this._logger.log(`[_createGamSlot] DfpId changed from ${t.dfpId} to ${d} for slotId: ${e}`,{level:this._logger.constructor.VERBOSE}),a&&window.googletag.destroySlots&&(this._logger.log(`[_createGamSlot] Destroying existing slot due to dfpId change for slotId: ${e}`,{level:this._logger.constructor.VERBOSE}),a=void 0)),!a)if(a=this._gamManager.createSlot({placement:t,slotConfig:{targeting:r},sizes:t.sizes,id:o.id,specialDfpId:d}),a)this._logger.log(`[_createGamSlot] Created new GAM slot for slotId: ${e}, dfpId: ${d}`,{level:this._logger.constructor.VERBOSE});else{this._logger.log(`[_createGamSlot] Failed to create GAM slot for slotId: ${e}, dfpId: ${d}`,{level:ue.CORE});return}a&&this._applySlotTargeting(a,e,t,r)}_resolveChannelAndDfpId(e,t,r){let s=this._freestar.config.channel,n=this._freestar.config.channel,o=r||e.dfpId;return e.dfpId.indexOf("{{channel}}")>-1?s="{{channel}}":e.dfpId.indexOf(this._freestar.config.channel)>-1?s=this._freestar.config.channel:e.dfpId.indexOf(this._freestar.config.orignalChannel)>-1&&(s=this._freestar.config.orignalChannel),n&&(t.path||s)&&(o=e.dfpId.replace(n,t.path||s)),o}_applySlotTargeting(e,t,r,s){var o,a;s=V(b({},s),{fs_ad_product:ke(r),fs_ad_optimization:Tt(r),fsrefresh:(o=s==null?void 0:s.fsrefresh)!=null?o:"0",fsrebid:(a=s==null?void 0:s.fsrebid)!=null?a:"0"}),di(e,t,typeof s!="undefined"&&Object.keys(s).length?s:void 0)}};y(qr,"AD_SIZE_WIDTH_THRESHOLD",500),y(qr,"INVALID_SIZE_IDS",[35843]);Zc=qr;A.class(Zc,{token:l.AD_SLOT_SERVICE,defaultAlias:"adSlotService",dependencies:[l.FREESTAR,l.GAM_MANAGER,l.LOGGER]})});var k_=f(()=>{M_()});function vA(i){let e={},t=kt({code:i.name,sizes:i.sizes,mediaTypes:null,bids:i.bidders.filter(o=>o.bidder!=="amazon")}),r=ke(i),{battr:s=null}=window.freestar.fsdata.ortb||{};t.ortb2Imp={ext:{data:{fs_ad_product:r,fs_ad_optimization:Tt(i)}},tagid:i.name,battr:s},i.storedRequestId&&(t.ortb2Imp.ext.prebid={storedrequest:{id:i.storedRequestId}});let n=!1;if(i.sizeMappings.forEach(o=>{!n&&_t()>=o.viewport.size[0]&&(o.mediaTypes.forEach(a=>{typeof e[a]=="undefined"&&(e[a]={}),typeof e[a].sizes=="undefined"&&(e[a].sizes=[]),o.size.forEach(h=>{if(h[0]<35843){if((a==="banner"||a==="native")&&"302x170, 443x250, 554x312, 640x360".includes(`${h[0]}x${h[1]}`))return;e[a].sizes.push(h)}}),e[a].sizes=ju(e[a].sizes);let d=xu.map(h=>h.join("x")),c=[],u=Nn();i.networks&&i.networks.forEach(h=>{Mn({network:h,adQualityBlockList:u})&&h.sizes&&h.sizes.forEach(_=>{_.size.forEach(I=>{c.push(I)})})});let p=c.filter(h=>Array.isArray(h)).map(h=>h.join("x")),m=i.sizes.filter(h=>Array.isArray(h)).map(h=>h.join("x"));if(e[a].sizes=e[a].sizes.filter(h=>{if(d.indexOf(h.join("x"))!==-1||m.indexOf(h.join("x"))!==-1&&p.indexOf(h.join("x"))!==-1)return h}),e[a].sizes=e[a].sizes.sort(Ar),a==="native"&&(e[a]=Object.assign(e[a],{type:"image",sendTargetingKeys:!1})),a==="video"){let h=[1,1];e[a].sizes.forEach(I=>{h[0]<I[0]&&(h=I)});let _=h[0]>=500?cn:fn;e[a]=Object.assign({},e[a],{api:[2],context:"instream",delivery:[2],linearity:2,maxduration:window.freestar.fsdata.adRefreshRate,mimes:["video/mp4","application/javascript","video/webm"],minduration:1,placement:1,playbackmethod:[6],playerSize:_[0],plcmt:4,protocols:[2,3,5,6],size:_,skip:0,useCacheKey:!0,renderer:{render:I=>{G.instance.create(l.IN_BANNER_VIDEO_PLAYER,{provide:{params:{bid:I}}})},url:"https://a.pub.network/superflex/loader.js"}})}}),n=!0)}),t.mediaTypes=e,!!t.bids){for(let o=t.bids.length-1;o>=0;o--){if(t.bids[o].dynamicId&&(t.bids[o].params.id=++freestar.dynamicIdNum),t.bids[o].bidder){let a={minViewPort:[0,0],relevantMediaTypes:["banner","native"]},d={minViewPort:[0,0],relevantMediaTypes:["banner","native","video"]};switch(se(t.bids[o].bidder)){case"zid":t.bids[o].params.adUnitID=Number(t.bids[o].params.adUnitID),t.bids[o].sizeConfig=[a];break;case"appnexus":t.bids[o].sizeConfig=[d];break;case"onemobile":t.bids[o].params.ext=Object.assign(t.bids[o].params.ext||{},{req:location.href}),t.bids[o].sizeConfig=[a];break;case"ttd":t.bids[o].params.publisherId=freestar.fsdata.companyId,t.bids[o].sizeConfig=[a];break;case"resetdigital":RA()||t.bids.splice(o,1);break;case"fsxs2s":case"pubmatic":case"rubicon":case"ix":case"unruly":case"yieldmo":case"openx":case"yahoo":case"mediagrid":t.bids[o].sizeConfig=[d];break;default:t.bids[o].sizeConfig=[a];break}["use_pmt_rule","usePaymentRule"].forEach(c=>{let u=s_(t.bids[o].params[c]);u!==void 0&&(t.bids[o].params[c]=u)})}t.bids[o].size?L_(t.bids[o].size[0],t.mediaTypes.banner.sizes)||t.bids.splice(o,1):t.bids[o].params.size&&(L_(t.bids[o].params.size,t.mediaTypes.banner.sizes)||t.bids.splice(o,1))}return t}}function L_(i,e){for(let t=0;t<e.length;t++)if(JSON.stringify(i)===JSON.stringify(e[t]))return!0;return!1}function RA(){let i=window.freestar.locData&&window.freestar.locData.iso||null,e=window.freestar.locData&&window.freestar.locData.state||null;return i==="US"&&!["CA","CO","CT","VA","UT"].includes(e)}var Wt,$s=f(()=>{le();ls();Ve();ot();he();We();us();U();F();_e();xa();Wt=vA});var OA,Ha,Xc=f(()=>{De();te();U();F();mt();OA={},Ha=({element:i,placement:e})=>{ci({placementName:e.name,slotId:i.id});let{lazyLoadViewportHeight:t}=e.selectedSize,r=OA[t];r||(r=new IntersectionObserver((s,n)=>{s.forEach(o=>{if(B_(o)){let a=ge({slotId:o.target.id});a&&(freestar.newAdSlots([{placementName:a,slotId:o.target.id,source:"lazyAd"}]),G.instance.resolve(l.EVENT_BUS).then(d=>{d.emit(So,{elementId:o.target.id})}),n.unobserve(o.target))}})},{root:null,rootMargin:`${t}% 0px ${t}% 0px`})),r.observe(i)}});function F_(i,e){var s;if(!((s=i==null?void 0:i.sizes)!=null&&s.length))return null;let t=e.getSlot({elementId:i.code});if(!t)return null;let r=!fsprebid.adUnits.find(n=>n.code===i.code);return r&&pi({adUnits:[i]}),{elementId:i.code,slot:t,needsAdUnit:r}}var U_=f(()=>{Nr()});var ef,G_=f(()=>{U();F();Ge();Vi();zt();te();$s();Xc();U_();ot();ef=class{constructor({logger:e,freestar:t,bidsManager:r,eventBus:s,gamManager:n,adSlotService:o,win:a=window,stickyAd:d,fsdata:c,config:u,nativeRenderManager:p}){this._freestar=t,this._adSlotService=o,this._eventBus=s,this._logger=e,this._bidsManager=r,this._gamManager=n,this._win=a,this._fsdata=c,this._config=u,this._stickyAdManager=d,this._nativeRenderManager=p,this._logger.setContext(l.AD_SLOTS_MANAGER),this._logger.setLevel(ue.CORE)}newAdSlots(e,t=null,r){let s="newAdSlots";this._logger.log([`${s} invoked`,...arguments],{level:this._logger.constructor.CORE,context:s}),Fh(this._freestar);let n=Hh(e,s,this._logger);if(n.length===0)return;let{placements:o}=Gh({channel:t,logTitle:s,config:this._config,placements:this._fsdata.placements,logger:this._logger});return this._fsdata.placements=o,this._notifySlotCreation(n),this._processNewElements(n,r)}_notifySlotCreation(e){if(!Array.isArray(e)){this._logger.error("_notifySlotCreation called with invalid elements",e);return}this._eventBus.emit(_r,{elementIds:e.map(({slotId:t})=>t)})}_processNewElements(e,t){return T(this,null,function*(){let r=e.filter(s=>!this._freestar.enabledSlotsCalled.includes(s.slotId)).map(s=>this._createSingleSlot(s,t));yield Promise.all(r)})}_createSingleSlot(e,t){return T(this,null,function*(){let{placementName:r,slotId:s,targeting:n}=e,o=this._win.document.getElementById(s),a=re({name:r});a&&(yield this._adSlotService.createAdSlot({placement:a,slotId:s,targeting:n,newElement:e,element:o}),this._handleSlotCreated(o,s,a,e,t))})}_handleSlotCreated(e,t,r,s,n){let o=this._gamManager.getSlot({elementId:t});e&&o&&(this._requestBids({placement:r,element:e,newElement:s,sendAdserverSignal:n}),this._freestar.newAdSlotsCalled.push(e.id),this._handleStickyAds(s,r,t))}_handleStickyAds(e,t,r){var s,n;typeof e.skipSAU=="undefined"&&(s=this._stickyAdManager)!=null&&s.isSlidingUnit({placement:t})&&((n=this._stickyAdManager)==null||n.attachSlidingUnit({adUnit:t,slotId:r}))}_requestBids({placement:e,element:t,newElement:r,sendAdserverSignal:s}){var o;let n=Wt(e);n&&(n.code=t.id,s?this._handleDirectBidding(n,s):r.source==="lazyAd"?this._enqueueBid(n):((o=e.selectedSize)==null?void 0:o.lazyLoadViewportHeight)>0?Ha({element:t,placement:e}):this._enqueueBid(n))}_enqueueBid(e){this._bidsManager.enqueueBids({bidObjects:[e]})}_handleDirectBidding(e,t){let r=F_(e,this._gamManager);r&&this._bidsManager.requestBids({elementIds:[r.elementId],slots:[r.slot],sendAdserverSignal:t})}deleteAdSlots(e){if(e===void 0){this._logger.log("deleteAdSlots invoked and all slots will be destroyed"),this._gamManager.instance.pubads().getSlots().map(r=>r.getSlotElementId()).forEach(r=>this._nativeRenderManager.clearExistingAd(r)),this._gamManager.instance.destroySlots(),this._eventBus.emit(Er);return}Array.isArray(e)||(e=[e]),this._logger.log(`deleteAdSlots invoked and the following ID(s) will be destroyed: ${e}`),this._removeAdUnits({list:e})}_removeAdUnits({list:e}){let t=e.map(s=>ne.getAdUnitBySlotElementId(s)),r=[];t.forEach(s=>{var o;let{placement:n}=s;if((o=n==null?void 0:n.sizeMappings)!=null&&o.some(a=>a.superflex)){let a=[...this._win.document.querySelectorAll(`[name="${n.name}"]`)];r=r.concat(a.flatMap(d=>d.id.includes("fs-sf")?ne.getAdUnitBySlotElementId(d.id)||[]:[]))}}),e.forEach(s=>{this._gamManager.destroySlot({elementId:s}),this._nativeRenderManager.clearExistingAd(s)}),r.forEach(s=>{this._gamManager.destroySlot({elementId:s.slot.getSlotElementId()})})}};A.class(ef,{token:l.AD_SLOTS_MANAGER,defaultAlias:"adSlotsManager",dependencies:[l.AD_QUALITY_MANAGER,l.WINDOW,l.FREESTAR,l.BIDS_MANAGER,l.AD_SLOT_SERVICE,l.EVENT_BUS,l.GAM_MANAGER,l.LOGGER,l.FS_DATA,l.CONFIG_MANAGER,l.PREBID_MANAGER,l.NATIVE_RENDER_MANAGER,{token:l.STICKY_AD,optional:!0}]})});var V_=f(()=>{k_();G_()});var tf=Ti((UB,q_)=>{"use strict";var CA=function(e){return PA(e)&&!xA(e)};function PA(i){return!!i&&typeof i=="object"}function xA(i){var e=Object.prototype.toString.call(i);return e==="[object RegExp]"||e==="[object Date]"||MA(i)}var DA=typeof Symbol=="function"&&Symbol.for,NA=DA?Symbol.for("react.element"):60103;function MA(i){return i.$$typeof===NA}function kA(i){return Array.isArray(i)?[]:{}}function js(i,e){return e.clone!==!1&&e.isMergeableObject(i)?Yr(kA(i),i,e):i}function LA(i,e,t){return i.concat(e).map(function(r){return js(r,t)})}function BA(i,e){if(!e.customMerge)return Yr;var t=e.customMerge(i);return typeof t=="function"?t:Yr}function FA(i){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(i).filter(function(e){return Object.propertyIsEnumerable.call(i,e)}):[]}function H_(i){return Object.keys(i).concat(FA(i))}function z_(i,e){try{return e in i}catch(t){return!1}}function UA(i,e){return z_(i,e)&&!(Object.hasOwnProperty.call(i,e)&&Object.propertyIsEnumerable.call(i,e))}function GA(i,e,t){var r={};return t.isMergeableObject(i)&&H_(i).forEach(function(s){r[s]=js(i[s],t)}),H_(e).forEach(function(s){UA(i,s)||(z_(i,s)&&t.isMergeableObject(e[s])?r[s]=BA(s,t)(i[s],e[s],t):r[s]=js(e[s],t))}),r}function Yr(i,e,t){t=t||{},t.arrayMerge=t.arrayMerge||LA,t.isMergeableObject=t.isMergeableObject||CA,t.cloneUnlessOtherwiseSpecified=js;var r=Array.isArray(e),s=Array.isArray(i),n=r===s;return n?r?t.arrayMerge(i,e,t):GA(i,e,t):js(e,t)}Yr.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(r,s){return Yr(r,s,t)},{})};var VA=Yr;q_.exports=VA});var Y_,$r,rf=f(()=>{_e();Gl();Y_=Xi(tf()),$r=class{constructor({dispensaryData:e,window:t,freestar:r,logger:s,analytics:n,prebidManager:o,rebidManager:a}){this._dispensaryData=e,this._win=t,this._freestar=r,this._logger=s,this._analytics=n,this._prebidManager=o,this._rebidManager=a}init(){return T(this,null,function*(){var e;yield this._loadScript(),(e=this._logger)==null||e.log("module initialized")})}get adQualityConfig(){let{adQualityOptions:e}=this._dispensaryData.fsdata||{};return e}get url(){throw new Error("buildUrl method must be implemented by subclass")}_loadScript(e,t){return T(this,null,function*(){var r,s;if(this.adQualityConfig&&this.adQualityConfig.vendor===e&&(this.adQualityConfig.desktopEnabled||this.adQualityConfig.mobileEnabled)){try{yield Hi(this.url)}catch(n){(r=this._logger)==null||r.log(["Script loading failed with error:",n]);return}(s=this._logger)==null||s.log(`Inserted ${e} script`),t&&t()}})}_sendMessage({args:e}){this._analytics&&bs&&this._analytics.track(new bs(e))}_rebidBlockedAd({elementId:e}){this._rebidManager.handleAdBlocked({elementId:e})}_dfpBlockProcess({elementId:e,blockingVendor:t}){let r={blockingType:"dfp",isBlocked:!0,adUnitCode:e,blockingVendor:t};this._sendMessage({args:r})}_prebidSentAnalytics(e){let t=Object.keys(e).reduce((s,n)=>(n!=="adserverTargeting"&&n!=="ad"&&(s[n]=e[n]),s),{}),r=(0,Y_.default)({blockingType:"prebid",isBlocked:!0,bidCpm:t.cpm},t);this._sendMessage({args:r})}_handleEvent(){throw new Error("_handleEvent method must be implemented by subclass")}}});var jr,$_=f(()=>{Re();Hd();We();rf();qa();jr=class i extends $r{constructor(t){super(t);y(this,"prebidNameSpace","fsprebid");y(this,"_handleEvent",t=>{var s,n;let{data:r}=t;if(r.message==="CONFIANT_CALLBACK"&&r.isBlocked===1){let o=r.impressionData||{},a=((s=o.prebid)==null?void 0:s.s)||((n=o.dfp)==null?void 0:n.s);if(!a){this._logger.log("domId not found in impressionData");return}o.prebid?this._prebidBlockProcess(o):this._dfpBlockProcess({elementId:a,blockingVendor:za}),this._rebidBlockedAd({elementId:a})}});this._logger.setContext("Confiant"),this._logger.setLevel(50)}init(){return T(this,null,function*(){this._shouldInitialize()&&this._buildBasicConfiantObject(),yield rs(i.prototype,this,"init").call(this)})}_shouldInitialize(){return this.adQualityConfig&&this.adQualityConfig.vendor==="CONFIANT"&&(this.adQualityConfig.desktopEnabled||this.adQualityConfig.mobileEnabled)}get url(){return`https://cdn.confiant-integrations.net/${this.adQualityConfig.vendorId}/gpt_and_prebid/config.js`}_loadScript(){return T(this,null,function*(){yield rs(i.prototype,this,"_loadScript").call(this,"CONFIANT",()=>{this._subscribe()})})}_buildBasicConfiantObject(){this._win.confiant=this._win.confiant||{},this._win.confiant.prebidNameSpace=this.prebidNameSpace,this._win.confiant.callback=(t,r,s,n,o,a)=>{this._win.postMessage({message:"CONFIANT_CALLBACK",isBlocked:s,impressionData:a})}}_prebidBlockProcess(t){let{adId:r}=t.prebid,s=this._win.fsprebid.getAllWinningBids().find(n=>n.adId===r);s&&(this._prebidSentAnalytics(V(b({},s),{blockingVendor:za})),this._prebidBlockExcludeBidderSet({bidResponse:s}))}_prebidBlockExcludeBidderSet({bidResponse:t}){let r=Q(xn);r.includes(t.bidder)||r.push(t.bidder),ve({key:Vd,value:r,type:K.array}),this._removeBidder(t)}_removeBidder({bidder:t}){this._prebidManager.instance.adUnits.forEach(r=>{r.bids=r.bids.filter(s=>se(s.bidder)!==se(t))})}_subscribe(){this._win&&this._handleEvent&&this._win.addEventListener("message",this._handleEvent.bind(this))}reportSingleAd(t){try{this._win.confiant.services().reportSingleAd(t)}catch(r){alert("Unable to report the ad: "+r.toString())}}}});var sf=f(()=>{$_()});var j_,nf=f(()=>{j_="com.mediatrust.mediafilter"});var Kr,K_=f(()=>{rf();nf();qa();Kr=class i extends $r{constructor(e){super(e),this._logger.setContext("TheMediaTrust"),this._setMediafilterConfiguration()}get url(){return`https://scripts.mf.webcontentassessor.com/scripts/${this.adQualityConfig.vendorId}`}_loadScript(){return T(this,null,function*(){yield rs(i.prototype,this,"_loadScript").call(this,"THE_MEDIA_TRUST",this._subscribe.bind(this))})}_setMediafilterConfiguration(e={eventMessages:!0,eventLevels:[3]}){this._win.mediafilterConfiguration={setup:e}}_handleEvent(e){var t,r;if(this._isAdvertisementBlocked(e)){let s=(r=(t=e.detail.dataset.eventInstance.adObject)==null?void 0:t.getSlotElementId)==null?void 0:r.call(t),n=this._extractAdId(e);this._isNativeRenderBlock(e)?s=this._handleNativeRenderBlock(e,s):this._isPrebidThroughGoogleAdBlock(n)?this._handlePrebidThroughGoogleAdBlock(n):this._handleGoogleAdRenderBlock(s),this._rebidBlockedAd({elementId:s})}}_isAdvertisementBlocked(e){return e.detail.message==="Advertisement Blocked"}_extractAdId(e){let t=e.detail.dataset.eventInstance.securityViolationHTML.match(/ucTagData\.adId\s*=\s*["']([^"']+)["'];/);return t?t[1]:null}_isNativeRenderBlock(e){return e.detail.dataset.eventInstance.adObject.adType==="prebid"}_isPrebidThroughGoogleAdBlock(e){return!!e}_handleNativeRenderBlock(e,t){let r=e.detail.dataset.eventInstance.windowInstance.adId,s=this._prebidBlockProcess(r);return this._shouldUseAdUnitCode(t)&&(t=s.adUnitCode),t}_shouldUseAdUnitCode(e){return!e}_handlePrebidThroughGoogleAdBlock(e){this._prebidBlockProcess(e)}_handleGoogleAdRenderBlock(e){this._dfpBlockProcess({domId:e,blockingVendor:Ya})}_prebidBlockProcess(e){let t=Object.values(fsprebid.getBidResponses()).flatMap(r=>r.bids||[]).find(r=>r.adId===e);return this._prebidSentAnalytics(V(b({},t),{blockingVendor:Ya})),t}_subscribe(){this._win.addEventListener(j_,this._handleEvent.bind(this))}}});var of=f(()=>{K_();nf()});var za,Ya,W_,qa=f(()=>{sf();of();za="CONFIANT",Ya="THE_MEDIA_TRUST",W_={[za]:{factory:jr},[Ya]:{factory:Kr}}});var Ks,Q_=f(()=>{U();F();qa();Ne();Ks=class{constructor(e){this._win=e.window,this._freestar=e.freestar,this._dispensaryData=e.dispensaryData,this._logger=e.logger,this._logger.setContext("AdQualityManager"),this._logger.setLevel(50),this._analytics=e.analytics,this._prebidManager=e.prebidManager,this._rebidManager=e.rebidManager,this._isInitialized=!1}init(){return T(this,null,function*(){if(!J().allowConfiant()){this._logger.log("AdQualityManager: Confiant not allowed by IdealAdStack settings");return}if(this._isInitialized){this._logger.log("AdQualityManager already initialized");return}let e=this._getAdQualityConfig();if(!e){this._logger.log("No ad quality configuration found, skipping initialization");return}if(!e.vendor){this._logger.log("Ad quality vendor not specified in configuration");return}try{yield this._initializeProvider(e),this._isInitialized=!0,this._logger.log("AdQualityManager initialized successfully")}catch(t){this._logger.log("Failed to initialize AdQualityManager:",t)}})}_initializeProvider(e){return T(this,null,function*(){let t=W_[e.vendor];if(!(t!=null&&t.factory)){this._logger.log(`Unsupported ad quality vendor: ${e.vendor}`);return}let r={window:this._win,freestar:this._freestar,dispensaryData:this._dispensaryData,logger:this._logger,analytics:this._analytics,prebidManager:this._prebidManager,rebidManager:this._rebidManager},s=new t.factory(r);yield s.init(),this.provider=s})}_getAdQualityConfig(){var e;return((e=this._dispensaryData.fsdata)==null?void 0:e.adQualityOptions)||null}};A.class(Ks,{token:l.AD_QUALITY_MANAGER,defaultAlias:"adQualityManager",dependencies:[l.WINDOW,l.FREESTAR,l.DISPENSARY_DATA,l.LOGGER,l.ANALYTICS,l.PREBID_MANAGER,l.REBID_MANAGER],factory:e=>T(void 0,[e],function*({dependencies:i}){yield i.prebidManager.ready;let t=new Ks(b({},i));return yield t.init(),t})})});var J_=f(()=>{Q_();sf();of()});var af,Z_=f(()=>{U();F();af=class{constructor({dispensaryData:e,win:t=window}){this._dispensaryData=e,this._window=t}validate(){let{onlyAllowedDomains:e,allowedDomains:t,urlBlocklist:r}=this._dispensaryData.fsdata;if(e&&(t!=null&&t.length)&&!this._isDomainAllowed)throw new Error("The current domain is not in the allowed domains list, exiting...");if(r!=null&&r.length&&!this._isUrlAllowed)throw new Error("The current URL is in the blocked url list, exiting...")}get _isDomainAllowed(){return this._dispensaryData.fsdata.allowedDomains.some(e=>(e.indexOf("*.")===0&&(e=e.slice(2)),this._window.top.location.host.indexOf(e)!==-1))}get _isUrlAllowed(){let e=/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9](?:\.[a-zA-Z]{2,})+$/,t=p=>{try{return new URL(p),!0}catch(m){return!1}},r=p=>{let m=p.split("/");return e.test(m[0])},{href:s,pathname:n,host:o,search:a}=this._window.top.location,d=(p,m)=>p.includes("/*")?s.includes(p.replace("/*","")):m,c=p=>p.split("/")[0].includes("*"),u=p=>p[p.length-1]==="/"?p.substring(0,p.length-1):p;return!this._dispensaryData.fsdata.urlBlocklist.find(p=>{if(t(p))return d(p,u(s)===u(p));if(r(p))return d(p,u(o+n+a)===u(p));if(c(p)){let m=p.split("/"),h=m[0],_=m.slice(1).join("/"),I=_.length>0,S=o.includes(h.replace("*",""));if(!S)return!1;if(!I)return S;let g=u(o+n+a),E=u(_);return E.includes("/*")?s.includes(E.replace("/*","")):g.includes(E)}else return n.includes(p)})}};A.class(af,{token:l.URL_VALIDATOR,dependencies:[l.DISPENSARY_DATA,{token:l.WINDOW,alias:"win"}]})});var X_=f(()=>{Z_()});var eE=f(()=>{U();F();A.object({token:l.CONFIG_MANAGER,dependencies:[l.FREESTAR],defaultAlias:"config",factory:({dependencies:i})=>{var t,r,s;let e=(r=(t=i.freestar)==null?void 0:t.configManager)!=null?r:{};return(s=i.freestar)==null||delete s.configManager,e}})});var tE=f(()=>{U();F();A.object({token:l.DISPENSARY_DATA,defaultAlias:"dispensaryData",dependencies:[l.FREESTAR],factory:({dependencies:i})=>{let{freestar:e}=i,t=e.dispensaryData||{};return delete e.dispensaryData,t}})});var wr=f(()=>{Mp();Yi();ig();zt();Is();sg();ca();pg();yg();Ig();qg();$g();hc();Zg();Xg();e_();t_();Ut();d_();x_();N_();V_();J_();X_();eE();tE()});var HA,ct,Ws,J,Ne=f(()=>{Gn();Kd();Hn();zn();il();$n();_s();$e();Bt();U();wr();F();Bn();Li();HA={title:"IDEAL AD STACK v3.0"};window.freestar=window.freestar||{};ct=class ct{constructor(){this.active=!0,this.config=null,this.configByRtt=null,this.refreshCallback=()=>this.refreshData(),this.refreshingInProgress=!0,this.logs=new Un,this.debugOrTestSession=null,this.allowedBothBidders=null,this.s2sBidders=null,this.bidderSummary=null,this.productToConfig=null,this.rttValue=null,this.isRefinementValue=null}init(){return T(this,null,function*(){let e,t,r,s=Je().get({requestId:"getIdealData"});if(s)({config:e,source:t,errors:r}=this.parseRequestHandlerResult(s));else{let n=Vn({key:Ni});n?(e=n,r=[],t=Yn):(e={},r=["data not yet available"],t=Mi)}this.logs.add(`Got config from ${t}`),r.length>0&&(this.sendErrorMessage(r),this.logs.add("Config invalid!",JSON.stringify(e))),this.setConfig(e),this.setGlobalTimeout(),this.logs.show(HA),yield this.asyncInit()})}setConfig(e){this.config=e,this.debugOrTestSession=null,this.allowedBothBidders=null,this.s2sBidders=null,this.bidderSummary=null,this.productToConfig=null,this.rttValue=null,this.isRefinementValue=null}sendErrorMessage(e){G.instance.resolve(l.ANALYTICS).then(t=>{t.track(new X({eventName:"DYNAMIC_AUCTION_TIMEOUT_TEST",eventType:"ERRORS",data:{errors:e.join(", ")}}))})}sessionStoreConfig({config:e}){let t=e==null?void 0:e.floors,r=!At({siteId:freestar.fsdata.siteId}),s=e==null?void 0:e.testGroup;r&&(!t&&s!=="experiment"||t!=null&&t.error)?_p({key:Ni,value:e}):r&&(t==null?void 0:t.length)===0?Ep({key:Ni,value:e}):gp({key:Ni,value:e})}asyncInit(){return T(this,null,function*(){let e=yield Je().fetch({requestId:"getIdealData",fetchFn:lr}),{config:t,source:r,errors:s}=this.parseRequestHandlerResult(e);r===Mi&&s.length===0&&this.sessionStoreConfig({config:t}),t.knownUser||this.bindEvents(),this.refreshingInProgress=!1})}refreshData(){return T(this,null,function*(){if(this.refreshingInProgress)return;this.refreshingInProgress=!0;let e=yield Je().fetch({requestId:"getIdealData",fetchFn:lr}),r=(yield G.instance.resolve(l.USER_INFO_MANAGER)).isKnown;if(!this.parseRequestHandlerResult(e).config.knownUser&&r){Je().clearClassCachedData({requestId:"getIdealData"});let s=yield Je().fetch({requestId:"getIdealData",fetchFn:tl}),{config:n,source:o,errors:a}=this.parseRequestHandlerResult(s);o===Mi&&a.length===0&&(this.sessionStoreConfig({config:n}),window.freestar.queue.push(()=>{window.fsprebid.offEvent(Fi,this.refreshCallback)}))}this.refreshingInProgress=!1})}bindEvents(){!window.freestar||!window.freestar.queue||window.freestar.queue.push(()=>{window.fsprebid.onEvent(Fi,this.refreshCallback)})}parseRequestHandlerResult(e){let t,r,s,{data:n,error:o}=e;return o?(t={},s=[o.toString()]):({data:t,source:r}=n,r===Mi?s=this.getErrors(t):s=[]),{config:t,source:r,errors:s}}getAllowedBothBidderOverrides({clientServer:e={}}){let t=[],r=this.getAllowedBothBidders();return Object.entries(e).forEach(([s,n])=>{n===ce.BOTH&&!r.includes(s)&&t.push(s)}),t}getConfig(e){e=e||"display";let t=b({},this.getConfigForProduct(e));t.clientServer||(t.clientServer={}),t.clientServer=b({},this.applyTestSessionOverride(t.clientServer));let r=this.getAllowedBothBidderOverrides({clientServer:t.clientServer});return r.length>0&&(delete t.clientServerMask,r.forEach(s=>{delete t.clientServer[s]})),t}getAllowedBothBidders(){return this.allowedBothBidders||(this.allowedBothBidders=this._buildAllowedBothBidders()),this.allowedBothBidders}_buildAllowedBothBidders(){var e;return(((e=freestar.fsdata)==null?void 0:e.networks)||[]).filter(t=>t.allowConcurrent&&(!t.distinctParamsRequired||t.sizes.some(r=>r.serverParams))).map(t=>t.slug)}applyTestSessionOverride(e){if(!this.isDebugOrTestSession())return e;let t=b({},e);return Object.keys(t).forEach(r=>{var n,o,a;let s=((a=(o=(n=window==null?void 0:window.freestar)==null?void 0:n.fsdata)==null?void 0:o.networks)==null?void 0:a.find(d=>d.slug===r))||null;s&&t[r]!==ce.OFF&&(s.isClient?t[r]=ce.CLIENT:s.isPrebidServer?t[r]=ce.SERVER:s.isClientAndServer&&(t[r]=ce.BOTH))}),t}getServerToServerDetails(){if(!this.active)return{};let{testGroup:e}=this.config,{clientServerMask:t}=this.getConfig();return{clientServerMask:t,testGroup:e}}getDynamicAuctionTimeoutDetails(){let{maxTimeout:e=window.freestar.fsdata.timeout,roundTripTime:t=null}=this.config;return{maxTimeout:e,roundTripTime:t}}getMaxAuctionTimeout(){let{maxTimeout:e}=this.getDynamicAuctionTimeoutDetails();return e}setGlobalTimeout(){let e=this.getMaxAuctionTimeout()||3e3;window.freestar.fsdata.timeout=e,window.freestar.fsdata.mobileTimeout=e}getErrors(e){let t=[];return Object.keys(e).length===0?t.push("no params"):typeof e.maxTimeout=="undefined"&&t.push("no maxTimeout"),t}getFloorsData(){return T(this,null,function*(){let e=yield Je().fetch({requestId:"getIdealData",fetchFn:lr}),{config:t}=this.parseRequestHandlerResult(e);return t&&t.floors})}getBypassFirstAuction(){var e;return((e=this==null?void 0:this.config)==null?void 0:e.preGAMAuction)==="off"}getFeatureConfig(){return this.config&&this.config.features||{}}allowBrowsi(){return this.getFeatureConfig().browsi!=="off"}allowConfiant(){return this.getFeatureConfig().confiant!=="off"}allowBlockthrough(){return this.getFeatureConfig().blockthrough!=="off"}isRebidAllowed(){return this.getFeatureConfig().rebid!=="off"}isGAMEnabled(){return this.getFeatureConfig().gam!=="off"}getS2sBidders(e){return this.s2sBidders||(this.s2sBidders=this._buildS2sBidders(e)),this.s2sBidders}_buildS2sBidders(e=new ri){let t=this.getBidderSummary(),r=Object.keys(t).filter(s=>["server","both"].includes(t[s]));return!r.length&&(e!=null&&e.hasValidStoredRequests())&&r.push(e.getSlug()),r}static networkBidderBehaviour(e){var t,r,s;return e!=null&&e.isPrebidServer?ce.SERVER:e!=null&&e.isClientAndServer?ce.BOTH:(t=freestar.networkMap[e==null?void 0:e.id])!=null&&t.prebidServerEnabled&&(!((r=freestar.networkMap[e==null?void 0:e.id])!=null&&r.prebidClientEnabled)||(s=freestar.networkMap[e==null?void 0:e.id])!=null&&s.prebidServerDefault)?ce.SERVER:ce.CLIENT}static addBidderBehaviour(e,t){let r=ct.bitWiseBidderBehaviourMask.indexOf(e||ce.OFF),s=ct.bitWiseBidderBehaviourMask.indexOf(t||ce.OFF);return ct.bitWiseBidderBehaviourMask[r|s]}static addClientServer(e,t){let r=b({},e);return Object.entries(t).forEach(([s,n])=>{r[s]?r[s]=ct.addBidderBehaviour(r[s],n):r[s]=n}),r}getBidderSummary(){return this.bidderSummary||(this.bidderSummary=this._buildBidderSummary()),this.bidderSummary}_buildBidderSummary(){let e=this.getSiteBidderSummary();return Object.values(this.getProductToConfigMap()).map(s=>s.clientServer).reduce(ct.addClientServer,e)}getSiteBidderSummary(){return Object.fromEntries(window.freestar.fsdata.networks.map(t=>[t.slug,ct.networkBidderBehaviour(t)]))}getConfigForProduct(e){let t=this.getProductToConfigMap();return t[e]||t[nt]}getProductToConfigMap(){return this.productToConfig==null&&(this.productToConfig=this._buildProductToConfigMap()),this.productToConfig}getRtt(){if(this.rttValue==null&&(this.rttValue=1/0,this.config.roundTripTime!=null)){let e=Number(this.config.roundTripTime);!Number.isNaN(e)&&e!=null&&(this.rttValue=e)}return this.rttValue}isRefinement(){var e,t;return this.isRefinementValue==null&&(this.isRefinementValue=((t=(e=this.config)==null?void 0:e.testGroup)==null?void 0:t.startsWith(Ip))||!1),this.isRefinementValue}addRefinementTargeting(e,t,r){if(!this.isRefinement())return e;let s=ct.makeTargetingString(t,r);return V(b({},e),{targeting:s})}_buildProductToConfigMap(){if(!Array.isArray(this.config.clientServer))return this._buildProductToConfigMapExperiment();let t={};this.config.clientServer.forEach(n=>{let[[o,{config:a}]]=Object.entries(n);t[o]=this.addRefinementTargeting(a,o)});let r={},s=this.getRtt();return this.config.clientServerRTT.forEach(n=>{let[[o,a]]=Object.entries(n),d=ct.selectConfigByRtt(a,s);d&&(r[o]=this.addRefinementTargeting(d.config,o,d.rttRange))}),b(b({},t),r)}_buildProductToConfigMapExperiment(){let e=this.getRtt();if(this.config.clientServerRTT&&Array.isArray(this.config.clientServerRTT)){let r=ct.selectConfigByRtt(this.config.clientServerRTT,e);if(r){let s=this.addRefinementTargeting(r.config,nt,r.rttRange);return{[nt]:s}}}let t=this.addRefinementTargeting(this.config,nt);return{[nt]:t}}static makeTargetingString(e=nt,t=nt){let r=t===nt?nt:t[0];return`ad=${e};rttRange=${r}`}static selectConfigByRtt(e,t){let r;return e.forEach(s=>{let{rttRange:n}=s;(n===nt||t>=n[0]&&t<=n[1])&&(r==null||r.rttRange===nt)&&(r=s)}),r}isS2SDisabled(){return this.getS2sBidders().length===0}allowRefresh(){return this.getFeatureConfig().refresh!=="off"}determineAdRefreshBehavior(){var n,o;let e=!!((o=(n=window.freestar)==null?void 0:n.fsdata)!=null&&o.adRefreshDisabled),t=!this.isGAMEnabled()&&this.isS2SDisabled(),r=this.allowRefresh();return{isRefreshAllowed:!e&&(t||r)}}_getDebugOrTestSession(){let e=z(ii.fsdebug),t=z(ii.fsaltconfig);return!!(e||t)}isDebugOrTestSession(){return this.debugOrTestSession===null&&(this.debugOrTestSession=this._getDebugOrTestSession()),this.debugOrTestSession}};y(ct,"bitWiseBidderBehaviourMask",[ce.OFF,ce.CLIENT,ce.SERVER,ce.BOTH]);Ws=ct,J=si.getInstanceFn({ClassConstructor:Ws,instanceName:"idealAdstackManager"})});function $a(){return df==null&&(df=new lf),df}var lf,df,cf=f(()=>{Bt();De();lf=class i{constructor(){this.slotMaxBids={},this.slotToPlacement={},this.placementToSlots={}}initiateWatcher(e){e.que.push(()=>{e.onEvent(Ui,this.handleBidResponse.bind(this))})}handleBidResponse(e){this.addSlotPlacementAssociation(e.adUnitCode),this.addBidResponse(e)}addSlotPlacementAssociation(e){if(e&&!this.slotToPlacement[e]){let t=ge({slotId:e});t&&(this.slotToPlacement[e]=t,this.placementToSlots[t]||(this.placementToSlots[t]=[]),this.placementToSlots[t].push(e))}}addBidResponse(e){let{adUnitCode:t,cpm:r}=e;t&&r&&(!this.slotMaxBids[t]||this.slotMaxBids[t]<r)&&(this.slotMaxBids[t]=r)}getSlotMaxBid(e){return i.validateMaxBid(this.slotMaxBids[e])}getPlacementMaxBidBySlot(e){let t=this.slotToPlacement[e];return this.getPlacementMaxBid(t)}getPlacementMaxBid(e){let t=this.placementToSlots[e]||[];return i.validateMaxBid(Math.max(...t.map(r=>this.getSlotMaxBid(r))))}static validateMaxBid(e){return!Number.isNaN(e)&&e!=null&&e>0?e:null}},df=null});function Wr(o){return T(this,arguments,function*({deviceVendor:i,deviceType:e,refreshNumber:t,placement:r,maxBid:s,isFloorsActive:n}){let a=or(),d=i==="Apple"?"smartphone-ios":e,u=(yield G.instance.resolve(l.USER_INFO_MANAGER)).isKnown,p=r&&s!=null?`&mb=${s}&au=${encodeURIComponent(r)}`:"",m=freestar.locData?freestar.locData.iso:"",h=n?"0":"1",_=`d=${a}&t=${d}&k=${u}&r=${t}${p}&c=${m}`,I=`${yp}?${_}`,g=yield fetch(I,{headers:{"x-api-key":qn,"x-lm":h}});if(!g.ok)throw new Error(`Request failed with status ${g.status}`);return g.json()})}var ff=f(()=>{jn();tr();Jd();F()});var Ai,uf,ht,br=f(()=>{Ne();cf();zn();ff();_s();U();wr();F();Li();Ve();Ai=class Ai{constructor(e,t){this.idealAdStackManager=e,this.maxBidTracker=t,this.initialData=null,this.requests=[],this.maxBidRequests={},this.failedRequestCount=0,this.throttleRequests=!1,this.throttleExpiry=0}getInitialFloorsData(){return T(this,null,function*(){if(At({siteId:freestar.fsdata.siteId}))return this.initialData={timestamp:new Date,floors:[]};let e=0,{timestamp:t,floors:r}=this.getRequest(e);return this.initialData?yield r:this.initialData={timestamp:t,floors:yield r},this.initialData})}getRequest(e,t,r){if(this.shouldThrottleRequests()){let n=t&&r!=null?`, placement ${t}, maxBid ${r}`:"";return freestar.log({level:20,title:"Floors"},`Floors throttled: fetch skipped for refresh ${e}${n}`),{timestamp:new Date,floors:Promise.resolve([])}}if((li()?t==null?void 0:t.customTargetingPlacementName:t)&&r!=null){if(this.maxBidRequests[t.name]||(this.maxBidRequests[t.name]=[null]),this.maxBidRequests[t.name][e]||(this.maxBidRequests[t.name][e]={}),!this.maxBidRequests[t.name][e][r]){let n=li()?t.customTargetingPlacementName:t.dfpId;this.maxBidRequests[t.name][e][r]={timestamp:new Date,floors:this.fetchData(e,n,r)}}return this.maxBidRequests[t.name][e][r]}return this.requests[e]||(this.requests[e]={timestamp:new Date,floors:this.fetchData(e)}),this.requests[e]}reportError(e){freestar.log({level:40,title:"Floors"},"Floors error",e),G.instance.resolve(l.ANALYTICS).then(t=>{t.track(new X({eventName:"FLOORS_ERROR",eventType:"FETCH_RESPONSE",data:{message:e}}))})}fetchInitialData(){return T(this,null,function*(){let t=yield this.idealAdStackManager().getFloorsData();if(t)return!t.error&&t.length>0?t:(t!=null&&t.error&&(t!=null&&t.message)&&this.reportError(t.message),this.startThrottle(),[]);let{data:r,error:s}=yield Je().fetch({requestId:"getFloorsData",fetchFn:()=>{var n,o;return Wr({deviceVendor:window.freestar.deviceInfo.device.vendor,deviceType:window.freestar.deviceInfo.device.type,refreshNumber:0,isFloorsActive:(o=(n=window.freestar)==null?void 0:n.fsdata)==null?void 0:o.isTriple13Enabled})}});if(s)this.reportError(s.toString());else{if(r&&!r.error&&r.length>0)return r;r!=null&&r.error&&(r!=null&&r.message)&&this.reportError(r.message)}return this.startThrottle(),[]})}countRequestFailed(){this.failedRequestCount+=1,this.failedRequestCount>=Ai.MAX_FAILED_REQUESTS&&this.startThrottle()}startThrottle(){this.throttleRequests=!0,this.throttleExpiry=Date.now()+Ai.FAILED_REQUEST_TIMEOUT}countRequestSucceeded(){this.failedRequestCount=0,this.throttleRequests=!1}shouldThrottleRequests(){return this.throttleRequests&&Date.now()>this.throttleExpiry?(this.startThrottle(),!1):this.throttleRequests}fetchData(e,t,r){return T(this,null,function*(){var o,a;if(e===0)return yield this.fetchInitialData();let s,n;try{s=yield Wr({deviceVendor:window.freestar.deviceInfo.device.vendor,deviceType:window.freestar.deviceInfo.device.type,refreshNumber:e,placement:t,maxBid:r,isFloorsActive:(a=(o=window.freestar)==null?void 0:o.fsdata)==null?void 0:a.isTriple13Enabled})}catch(d){n=d}if(n)this.reportError(n.toString());else{if(s&&!s.error&&s.length>0)return this.countRequestSucceeded(),s;s!=null&&s.error&&(s!=null&&s.message)&&this.reportError(s.message)}return this.countRequestFailed(),[]})}getFloor(e,t,r){let s=li()?r.customTargetingPlacementName:r.dfpId,n=t.find(c=>s===c.adUnit),o=n?n.upr:"timeout",a=n?new Date(n.lastUpdated):e,d=String(a.getUTCHours());return{floors_id:o,floors_hour:d}}getInitialFloorKVP({placement:e,keyMap:t}){t||(t={});let s=(li()?e==null?void 0:e.customTargetingPlacementName:e)?this.getFloor(this.initialData.timestamp,this.initialData.floors,e):{};return Object.assign(t,s)}getFloorsData(n){return T(this,arguments,function*({placement:e,slotId:t,callback:r,isRebid:s=!1}){let o,a;if(ki({siteId:freestar.fsdata.siteId,placement:e})||zi(e))return o=null,a="inactive",void r({result:o,reason:a});let c=(yield G.instance.resolve(l.REFRESH_LIBRARY)).getRefreshLibraryItem({slotId:t}),u=((c==null?void 0:c.timesRefreshed)||0)+(s?1:0),p,m;if(u===0||s)({timestamp:p,floors:m}=this.getRequest(u));else{let h=this.maxBidTracker.getSlotMaxBid(t),_=Ai.formatMaxBid(h);({timestamp:p,floors:m}=this.getRequest(u,e,_))}o=this.getFloor(p,yield m,e),a=null,r&&r({result:o,reason:a})})}prefetchFloorsData({placement:e,slotId:t,timesRefreshed:r}){let s=this.maxBidTracker.getSlotMaxBid(t),n=Ai.formatMaxBid(s);this.getRequest(r,e,n)}static formatMaxBid(e){if(e!=null){let t=e.toString();if(t){if(t.includes("e-"))return"0";if(t.includes("e"))return e.toPrecision(3);let r=e.toString().match(/^-?\d*(?:\.\d{0,2})?/);if(r){let s=r[0];for(;s.includes(".")&&(s.endsWith("0")||s.endsWith("."));)s=s.slice(0,-1);return s}}}return null}};y(Ai,"MAX_FAILED_REQUESTS",2),y(Ai,"FAILED_REQUEST_TIMEOUT",1e3*60*15);uf=Ai,ht=si.getInstanceFn({ClassConstructor:uf,instanceName:"floorsManager",params:[J,$a()]})});function iE({freestar:i=window.freestar,network:e}){return!e.deviceExclusive||e.deviceExclusive.toLowerCase()===i.deviceInfo.device.type}var rE=f(()=>{});function zA(i,e){var s;if("indexExchange".indexOf(e.bidder)>-1&&e.params&&e.params.id&&e.params.id<0&&(e.dynamicId=!0),e.bidder==="conversant"){e.params.secure=freestar.isHttps;for(let n in e.params)switch(n){case"bidfloor":case"position":case"maxduration":e.params[n]=Number(e.params[n]);break}}if(e.bidder==="cox"&&(e.params.id=Number(e.params.id),e.params.siteId=Number(e.params.siteId)),e.bidder==="justpremium"&&e.params&&(e.params.allow=sE(e.params.allow),e.params.exclude=sE(e.params.exclude),e.params.allow!==void 0&&(e.params.allow===null||e.params.allow.length===0)&&delete e.params.allow,e.params.exclude!==void 0&&(e.params.exclude===null||e.params.exclude.length===0)&&delete e.params.exclude),e.bidder==="pulsepoint")for(let n in e.params)n=="cf"&&(e.params[n]=e.params[n].replace("X","x"));if(e.bidder==="connectad")for(let n in e.params)(n==="siteId"||n==="networkId")&&(e.params[n]=Number(e.params[n]));if(e.bidder==="grid"&&e.params&&e.params.uid&&(e.params.uid=Number(e.params.uid)),e.bidder==="beachfront")for(var t in e.params)(t=="video"||t=="banner")&&(e.params[t]=typeof e.params[t]=="object"?e.params[t]:JSON.parse(e.params[t]));if(e.bidder==="undertone"&&(e.params.publisherId=Number(e.params.publisherId),e.params.placementId=Number(e.params.placementId)),e.bidder==="ttd"&&(e.params.publisherId=freestar.fsdata.companyId),e.bidder==="zid"&&(e.params.adUnitID=Xt(e.params.adUnitID)),e.bidder==="mantis"&&(e.params.zone=i.name),e.bidder==="districtmDMX"&&(e.params.dmxid=Number(e.params.dmxid),e.params.memberid=Number(e.params.memberid)),e.bidder==="answermedia"&&(e.params.siteId=Xt(e.params.siteId),e.params.networkId=Xt(e.params.networkId),e.params.zoneIds&&Sn(e.params.zoneIds)&&e.params.zoneIds.split(",").length>0?e.params.zoneIds=e.params.zoneIds.split(",").map(function(n){return Xt(n)}):e.params.zoneIds=[]),e.bidder==="consumable"&&(e.params.siteId=Xt(e.params.siteId),e.params.networkId=Xt(e.params.networkId),e.params.unitId=Xt(e.params.unitId)),["appnexus","appnexusAst","brealtime","pagescience","defymedia","gourmetads","matomy","featureforward","oftmedia"].indexOf(e.bidder)>-1)for(let n in e.params)n=="placementId"&&(e.params[n]=Number(e.params[n])),["allowSmallerSizes","member","invCode"].indexOf(n)>-1&&delete e.params[n];if(["defymedia","zid"].indexOf(e.bidder)>-1)return!1;e.bidder==="sortable"&&(e.params.tagId=i.name);let r=["sharethrough","triplelift"];if(i.stickyFooter===!0&&r.indexOf(e.bidder)>-1)return!1;if(e.bidder==="criteo"&&(e.params.zoneId=Number(e.params.zoneId)),e.bidder==="taboola"&&(e.params.tagId=i.name),e.bidder==="monetixads"&&e.params&&e.params.networkId&&(e.params.networkId=Number(e.params.networkId)),e.bidder==="teads")for(let n in e.params)(n==="pageId"||n==="placementId")&&(e.params[n]=Number(e.params[n]));if((e==null?void 0:e.bidder)==="flipp"&&(e!=null&&e.params)){let{siteId:n,zoneIds:o,dwellExpand:a}=e.params;if(n&&o){let c=Number(n),u=Number(o);[c,u].every(p=>!Number.isNaN(p))&&(e.params.siteId=c,e.params.zoneIds=[u]),a==="true"&&(e.params.options={dwellExpand:!0})}let d=(s=freestar==null?void 0:freestar.msg)==null?void 0:s.fpc;d&&(e.params.userKey=d)}return kt(e)}function qA(i,e=!1){if(e===!1)return!0;let{allowedGeos:t=[],disallowedGeos:r=[]}=i,{iso:s}=e,n=freestar.networkMap[i.id];return n&&(n.allowedGeos&&n.allowedGeos.length&&(t=n.allowedGeos),n.disallowedGeos&&n.disallowedGeos.length&&(r=n.disallowedGeos)),t&&t.length&&t.indexOf(s)===-1||r&&r.length&&r.indexOf(s)!==-1?(freestar.log(1,`Users in ${freestar.locData.iso} are not allowed to use ${i.slug}!`),!1):!0}function YA({network:i}){if(freestar.networkMap===!1||Object.keys(freestar.networkMap).length===0)return!0;let e=freestar.networkMap[i.id];return!e||Ke()&&Pu.indexOf(i.slug)!==-1?(freestar.log(1,"isNetworkActive - Page Speed Optimized in effect, or network is inactive filtering out",i.slug),!1):e&&qu(e.active)?e.active:!0}function $A(i){return nE(i.size,[0,0])&&delete i.size,i}function _t(i=window){return i.innerWidth&&i.document.documentElement.clientWidth?Math.min(i.innerWidth,i.document.documentElement.clientWidth):i.innerWidth||i.document.documentElement.clientWidth||i.document.getElementsByTagName("body")[0].clientWidth}function ja(i,e){if(e.length>0&&Array.isArray(e[0])){let r=e.length;if(e[0][0]===0&&e[0][1]===0)return!0;for(;r--;)if(ja(i,e[r]))return!0}let t=i.length;for(;t--;)if(i[t][0]===e[0]&&i[t][1]===e[1])return!0;return!1}function nE(i,e){let t=i.length;for(;t--;)if(i[t][0]===e[0]&&i[t][1]===e[1])return!0;return!1}function oE(){return freestar.fsdata.placements}function Na(i){return!i.validAdSizes||!i.bidders||i.bidders.length===0||i.stickyFooter||i.dynamicAd?!1:jA(i)}function jA(i){return freestar.config!==void 0&&freestar.config.enabled_slots!==void 0?KA(freestar.config.enabled_slots,i.name):!0}function KA(i,e){for(let t=0;t<i.length;t++)if(i[t].placementName===e)if(document.readyState==="complete"){if(window.document.getElementById(e))return!0}else return!0;return!1}function sE(i){if(!i)return null;let e=null;try{e=JSON.parse(i)}catch(t){e=null}return e!==null&&e.length>0?e:null}function pf({network:i,adQualityBlockList:e}){return qA(i,window.freestar.locData)&&YA({network:i})&&Mn({network:i,adQualityBlockList:e})&&iE({network:i})}function ba(){return T(this,null,function*(){let i=Nn();function e(c,u){se(c.bidder)==="ix"?u.sizes.forEach(p=>{let m={bidder:c.bidder,params:{siteId:c.params.siteId,size:p}};u.bidders.push(m)}):c&&u.bidders.push(c)}function t(c,u){return J().getBidderSummary()[c]===ce.BOTH&&u===ce.CLIENT}function r(c){return c.deviceExclusive&&c.deviceExclusive.toLowerCase()!==freestar.deviceInfo.device.type}function s({clientOrServerBehaviour:c,size:u,parentNetwork:p,placement:m}){let h=u.params;if(c===ce.SERVER&&(p!=null&&p.useDistinctParams)){if(!u.serverParams)return;h=u.serverParams}let _={bidder:p.slug,size:u.size,params:h},I=zA(m,$A(_));if(I){let S=t(p.slug,c)?kn(p.slug):p.slug;return V(b({},I),{bidder:S})}}function n({size:c,parentNetwork:u,placement:p}){return s({clientOrServerBehaviour:ce.CLIENT,size:c,parentNetwork:u,placement:p})}function o({size:c,parentNetwork:u,placement:p}){return s({clientOrServerBehaviour:ce.SERVER,size:c,parentNetwork:u,placement:p})}function a(c,u,p,m=!1){let h=ke(p),_=J().getConfig(h),{clientServer:I}=_,S=I[c.slug],g=c;if(m){let E=freestar.fsdata.networks.find(L=>L.slug===c.slug);E&&(g=E)}if(m)S=ce.CLIENT;else{if(S===ce.OFF)return;S||(S=Ws.networkBidderBehaviour(g))}if(S===ce.CLIENT||S===ce.BOTH){let E=n({size:u,parentNetwork:g,placement:p});E&&e(E,p)}if(S===ce.SERVER||S===ce.BOTH){let E=o({size:u,parentNetwork:g,placement:p});E&&e(E,p)}}let d=freestar.config.channel||freestar.fsdata.defaultChannel;d&&(freestar.log(9," Setting the channel to:"+d),freestar.config.orignalChannel=d),freestar.fsdata.placements=freestar.fsdata.placements.filter(c=>!c.archived),freestar.fsdata.placements.forEach(c=>T(this,null,function*(){d&&(c.dfpId=c.dfpId.replace("{{channel}}",d),freestar.log(9," Setting the dfp id to:"+c.dfpId)),c.bidders=[],c.sizes=[],c.validAdSizes=!1;let u=I=>I[0]===320&&I[1]===50,p=I=>{I.size&&(I.size=[[300,250]])},m=(I,S)=>{if(Array.isArray(I.size[0]))I.size.forEach(g=>{u(g)?(I.size.push([300,250]),S(null,!0)):S(!0)});else{let g=I.size;u(I.size)?(I.size=[g,[300,250]],S(null,!0)):S(!0)}};for(let I=0;I<c.sizeMappings.length;I++){let S=c.sizeMappings[I];if(_t()>=S.viewport.size[0]){for(let g=0;g<S.size.length;g++){let E=S.size[g];c.selectedSize=S,E[0]==35843?(c.fluidAd=!0,c.validAdSizes=!0):ja(S.size,E)&&!nE(c.sizes,E)&&(freestar.forceSize&&An(freestar.forceSize.sort(),E.sort())?c.sizes.push(E):freestar.forceSize||c.sizes.push(E))}c.sizes.length>0&&(c.validAdSizes=!0);break}}let h=new Set,_=[];if(c.networks.forEach(I=>{pf({network:I,adQualityBlockList:i})&&h.add(I.slug)}),c.networks.forEach(I=>{pf({network:I,adQualityBlockList:i})&&I.sizes.forEach(S=>{if(_.push(S.size[0]),ja(c.sizes,S.size)){if(r(S))return;a(I,S,c,!0)}})}),c.ignoreSiteBidders||freestar.fsdata.networks.forEach(I=>{h.has(I.slug)||pf({network:I,adQualityBlockList:i})&&En({value:I.sizes})&&I.sizes.forEach(S=>{if(ja(c.sizes,S.size)){if(r(S))return;a(I,S,c)}})}),c.sizes=Pd(c.sizes),c.bidders=Pd(c.bidders),c.sizes.length>0){let{active:I,adhesionRemove:S}=Zt({placement:c,type:oe.STICKY_FOOTER_OPTIONS});I&&S&&document.getElementById("fs-special-remove")&&(c.bidders=c.bidders.filter(g=>!["33across","gumgum"].includes(se(g.bidder))))}})),hp()>=1&&console.groupCollapsed("freestar.fsdata.placements"),freestar.log(1," freestar.fsdata.placements : "+JSON.stringify(freestar.fsdata.placements)),console.groupEnd()})}function Or(){let i=Cu,e=i.length,t=!1;if(freestar.locData&&freestar.locData.iso)for(let r=0,s=e;r<s;r++){let n=i[r];if(freestar.fsdata.siteId===n.siteId&&n.restrictedCountries.indexOf(freestar.locData.iso)>-1){t=!0;break}}return t}function li(i=freestar.fsdata){return hf==null&&(hf=i.placements.some(e=>e.customTargetingPlacementName)),hf}function zi(i,e=freestar.fsdata){return li(e)&&!i.customTargetingPlacementName}var Eg,hf,Ve=f(()=>{ls();he();pt();fs();us();le();We();br();Ne();Jt();rE();Gn();ot();$n();Eg=({adUnitPath:i})=>window.freestar.fsdata.placements.find(e=>i===e.dfpId)});function aE(i,e=0){return(xe[i[e+0]]+xe[i[e+1]]+xe[i[e+2]]+xe[i[e+3]]+"-"+xe[i[e+4]]+xe[i[e+5]]+"-"+xe[i[e+6]]+xe[i[e+7]]+"-"+xe[i[e+8]]+xe[i[e+9]]+"-"+xe[i[e+10]]+xe[i[e+11]]+xe[i[e+12]]+xe[i[e+13]]+xe[i[e+14]]+xe[i[e+15]]).toLowerCase()}var xe,dE=f(()=>{xe=[];for(let i=0;i<256;++i)xe.push((i+256).toString(16).slice(1))});function gf(){if(!mf){if(typeof crypto=="undefined"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");mf=crypto.getRandomValues.bind(crypto)}return mf(WA)}var mf,WA,lE=f(()=>{WA=new Uint8Array(16)});var QA,_f,cE=f(()=>{QA=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),_f={randomUUID:QA}});function JA(i,e,t){var s,n,o;if(_f.randomUUID&&!e&&!i)return _f.randomUUID();i=i||{};let r=(o=(n=i.random)!=null?n:(s=i.rng)==null?void 0:s.call(i))!=null?o:gf();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){if(t=t||0,t<0||t+16>e.length)throw new RangeError(`UUID byte range ${t}:${t+15} is out of buffer bounds`);for(let a=0;a<16;++a)e[t+a]=r[a];return e}return aE(r)}var Ef,fE=f(()=>{cE();lE();dE();Ef=JA});var uE=f(()=>{fE()});function pE({cpm:i}){let e=i<=10?20:2;return(Math.round(i*e)/e).toFixed(2)}function Qr({freestar:i}){if(i!=null&&i.prebidAdserverTargetingKeys)return i.prebidAdserverTargetingKeys;let e={},t=["bidder","adid","pb","size","format","auction_id","source"],r=i.fsdata.useFsAdserverTargetingKeys||z("use-fs-adserver-targeting-keys")?"fs_":"hb_";return t.forEach(s=>{e[s]=`${r}${s}`}),i.prebidAdserverTargetingKeys=e,e}var Ka=f(()=>{$e()});function hE({event:i}){if(i.isEmpty)return;let e=i.slot.getSlotElementId();if(!e)return;let t=freestar.bidsWon[e];t&&t.time&&Date.now()-t.time>1e3*29&&delete freestar.bidsWon[e]}var mE=f(()=>{});function Jr(i=window.freestar.locData){return i?ns.includes(i.iso)||i.state==="QC":!1}var Wa=f(()=>{he()});var yf,gE=f(()=>{le();yf=({isGDPRCountry:i,isUspApplicable:e,isStateOptInApplicable:t,mspsPrivacyManagerId:r,gdprPrivacyManagerId:s,stateOptInPrivacyManagerId:n})=>{try{window._sp_queue=[],window._sp_={config:V(b({accountId:1638,baseEndpoint:"https://cdn.privacy-mgmt.com",propertyHref:`https://${document.location.host}`,usnat:{includeUspApi:e}},i||t?{gdpr:{}}:{}),{events:V(b({},["onMessageReady","onMessageChoiceError","onPMCancel","onMessageReceiveData","onSPPMObjectReady","onError"].reduce((o,a)=>(o[a]=function(){},o),{})),{onMessageChoiceSelect:function(o,a,d){t&&o==="usnat"&&(d===11||d===13)&&window._stateOptInCheckConsent&&setTimeout(()=>window._stateOptInCheckConsent(),300)},onPrivacyManagerAction:function(o,a,d){t&&o==="usnat"&&d===1&&window._stateOptInCheckConsent&&setTimeout(()=>window._stateOptInCheckConsent(),300)},onConsentReady:function(o,a,d,c){function u(){var _,I,S,g,E,L;let p=(I=(_=window.freestar)==null?void 0:_.locData)==null?void 0:I.iso,m=(g=(S=window.freestar)==null?void 0:S.locData)==null?void 0:g.state,h=(L=(E=window.freestar)==null?void 0:E.fsdata)==null?void 0:L.mspaStates;return typeof p!="string"||typeof m!="string"||!Array.isArray(h)?!1:p==="US"&&h.includes(m)}(o=="usnat"&&c.applies||o=="usnat"&&u())&&(document.getElementById("pmLink").style.visibility="visible",document.getElementById("pmLink").innerHTML="Do Not Sell or Share My Personal Information",document.getElementById("pmLink").onclick=function(){window._sp_.usnat.loadPrivacyManagerModal(String(r))}),o=="gdpr"&&c.applies&&(Oi()?(document.getElementById("pmLink").style.visibility="visible",document.getElementById("pmLink").innerHTML="Privacy Preferences",document.getElementById("pmLink").onclick=function(){window._sp_.gdpr.loadPrivacyManagerModal(String(n))}):(document.getElementById("pmLink").style.visibility="visible",document.getElementById("pmLink").innerHTML="Privacy Preferences",document.getElementById("pmLink").onclick=function(){window._sp_.gdpr.loadPrivacyManagerModal(String(s))}))}})})}}catch(o){console.error("Error in sourcepointGMPScript",o)}}});var Sf,_E=f(()=>{Sf=()=>{try{(()=>{var i=!1,e=window,t=document;function r(){if(!e.frames.__uspapiLocator)if(t.body){var o=t.body,a=t.createElement("iframe");a.style.cssText="display:none",a.name="__uspapiLocator",o.appendChild(a)}else setTimeout(r,5)}r();function s(){var o=arguments;if(__uspapi.a=__uspapi.a||[],o.length)o[0]==="ping"?o[2]({gdprAppliesGlobally:i,cmpLoaded:!1},!0):__uspapi.a.push([].slice.apply(o));else return __uspapi.a}function n(o){var a=typeof o.data=="string";try{var d=a?JSON.parse(o.data):o.data;if(d.__cmpCall){var c=d.__cmpCall;e.__uspapi(c.command,c.parameter,function(u,p){var m={__cmpReturn:{returnValue:u,success:p,callId:c.callId}};o.source.postMessage(a?JSON.stringify(m):m,"*")})}}catch(u){}}typeof __uspapi!="function"&&(e.__uspapi=s,__uspapi.msgHandler=n,e.addEventListener("message",n,!1))})()}catch(i){console.error("Error in sourcepointCCPAScript",i)}}});var Qs,EE=f(()=>{Qs=()=>{try{window.__gpp_addFrame=function(i){if(!window.frames[i])if(document.body){var e=document.createElement("iframe");e.style.cssText="display:none",e.name=i,document.body.appendChild(e)}else window.setTimeout(window.__gpp_addFrame,10,i)},window.__gpp_stub=function(){var i=arguments;if(__gpp.queue=__gpp.queue||[],__gpp.events=__gpp.events||[],!i.length||i.length==1&&i[0]=="queue")return __gpp.queue;if(i.length==1&&i[0]=="events")return __gpp.events;var e=i[0],t=i.length>1?i[1]:null,r=i.length>2?i[2]:null;if(e==="ping")t({gppVersion:"1.1",cmpStatus:"stub",cmpDisplayStatus:"hidden",signalStatus:"not ready",supportedAPIs:["2:tcfeuv2","5:tcfcav1","6:uspv1","7:usnatv1","8:uscav1","9:usvav1","10:uscov1","11:usutv1","12:usctv1"],cmpId:0,sectionList:[],applicableSections:[],gppString:"",parsedSections:{}},!0);else if(e==="addEventListener"){"lastId"in __gpp||(__gpp.lastId=0),__gpp.lastId++;var s=__gpp.lastId;__gpp.events.push({id:s,callback:t,parameter:r}),t({eventName:"listenerRegistered",listenerId:s,data:!0,pingData:{gppVersion:"1.1",cmpStatus:"stub",cmpDisplayStatus:"hidden",signalStatus:"not ready",supportedAPIs:["2:tcfeuv2","5:tcfcav1","6:uspv1","7:usnatv1","8:uscav1","9:usvav1","10:uscov1","11:usutv1","12:usctv1"],cmpId:0,sectionList:[],applicableSections:[],gppString:"",parsedSections:{}}},!0)}else if(e==="removeEventListener"){for(var n=!1,o=0;o<__gpp.events.length;o++)if(__gpp.events[o].id==r){__gpp.events.splice(o,1),n=!0;break}t({eventName:"listenerRemoved",listenerId:r,data:n,pingData:{gppVersion:"1.1",cmpStatus:"stub",cmpDisplayStatus:"hidden",signalStatus:"not ready",supportedAPIs:["2:tcfeuv2","5:tcfcav1","6:uspv1","7:usnatv1","8:uscav1","9:usvav1","10:uscov1","11:usutv1","12:usctv1"],cmpId:0,sectionList:[],applicableSections:[],gppString:"",parsedSections:{}}},!0)}else e==="hasSection"?t(!1,!0):e==="getSection"||e==="getField"?t(null,!0):__gpp.queue.push([].slice.apply(i))},window.__gpp_msghandler=function(i){var e=typeof i.data=="string";try{var t=e?JSON.parse(i.data):i.data}catch(s){t=null}if(typeof t=="object"&&t!==null&&"__gppCall"in t){var r=t.__gppCall;window.__gpp(r.command,function(s,n){var o={__gppReturn:{returnValue:s,success:n,callId:r.callId}};i.source.postMessage(e?JSON.stringify(o):o,"*")},"parameter"in r?r.parameter:null,"version"in r?r.version:"1.1")}},"__gpp"in window&&typeof window.__gpp=="function"||(window.__gpp=window.__gpp_stub,window.addEventListener("message",window.__gpp_msghandler,!1),window.__gpp_addFrame("__gppLocator"))}catch(i){console.error("Error in sourcepointGPPScript",i)}}});var Qa,yE=f(()=>{Qa=()=>{try{let i=function(e){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)};(function(){var e=function(){for(var t,r,s=[],n=window,o=n;o;){try{if(o.frames.__tcfapiLocator){t=o;break}}catch(a){}if(o===n.top)break;o=o.parent}t||(function a(){var d=n.document,c=!!n.frames.__tcfapiLocator;if(!c)if(d.body){var u=d.createElement("iframe");u.style.cssText="display:none",u.name="__tcfapiLocator",d.body.appendChild(u)}else setTimeout(a,5);return!c}(),n.__tcfapi=function(){for(var a=arguments.length,d=new Array(a),c=0;c<a;c++)d[c]=arguments[c];if(!d.length)return s;d[0]==="setGdprApplies"?d.length>3&&parseInt(d[1],10)===2&&typeof d[3]=="boolean"&&(r=d[3],typeof d[2]=="function"&&d[2]("set",!0)):d[0]==="ping"?typeof d[2]=="function"&&d[2]({gdprApplies:r,cmpLoaded:!1,cmpStatus:"stub"}):s.push(d)},n.addEventListener("message",function(a){var d=typeof a.data=="string",c={};if(d)try{c=JSON.parse(a.data)}catch(p){}else c=a.data;var u=i(c)==="object"&&c!==null?c.__tcfapiCall:null;u&&window.__tcfapi(u.command,u.version,function(p,m){var h={__tcfapiReturn:{returnValue:p,success:m,callId:u.callId}};a&&a.source&&a.source.postMessage&&a.source.postMessage(d?JSON.stringify(h):h,"*")},u.parameter)},!1))};e()})()}catch(i){console.error("Error in sourcepointGDPRScript",i)}}});var SE=f(()=>{gE();_E();EE();yE()});function IE(i,e){let t=Jr(i),r=Oi(i),s=!r&&Dt(i);freestar.log(0,`SOURCEPOINT: Loading CMP - GDPR:${t} USP:${s} StateOptIn:${r}`),yf({isGDPRCountry:t,isUspApplicable:s,isStateOptInApplicable:r,mspsPrivacyManagerId:freestar.fsdata.mspsPrivacyManagerId||gn,gdprPrivacyManagerId:freestar.fsdata.gdprPrivacyManagerId||mn,stateOptInPrivacyManagerId:freestar.fsdata.stateOptInPrivacyManagerId||Lu}),r?(Qa(),Qs()):t?(Qa(),Qs()):s&&(Sf(),Qs()),Ee(ku,e)}var AE=f(()=>{he();le();Wa();_e();SE()});var bE=f(()=>{le()});function wE(i){let e=freestar.fsdata.quantcastDomain;if(!e){freestar.log(10,"loadQuantcast","Could not get quantcastDomain from fsdata, quantcast will not be loaded!");return}var t="https://cmp.inmobi.com".concat("/choice/","wZt3yQfgdwnz-","/",e,"/choice.js?tag_version=V2"),r=0,s=3;Ee(t,i);function n(){var c="__tcfapiLocator",u=[],p=window,m;function h(){var S=p.document,g=!!p.frames[c];if(!g)if(S.body){var E=S.createElement("iframe");E.style.cssText="display:none",E.name=c,S.body.appendChild(E)}else setTimeout(h,5);return!g}function _(){var S,g=arguments;if(g.length)if(g[0]==="setGdprApplies")g.length>3&&g[2]===2&&typeof g[3]=="boolean"&&(S=g[3],typeof g[2]=="function"&&g[2]("set",!0));else if(g[0]==="ping"){var E={gdprApplies:S,cmpLoaded:!1,cmpStatus:"stub"};typeof g[2]=="function"&&g[2](E)}else g[0]==="init"&&typeof g[3]=="object"&&(g[3]=Object.assign(g[3],{tag_version:"V2"})),u.push(g);else return u}function I(S){var g=typeof S.data=="string",E={};try{g?E=JSON.parse(S.data):E=S.data}catch(k){}var L=E.__tcfapiCall;L&&window.__tcfapi(L.command,L.version,function(k,$){var H={__tcfapiReturn:{returnValue:k,success:$,callId:L.callId}};g&&(H=JSON.stringify(H)),S&&S.source&&S.source.postMessage&&S.source.postMessage(H,"*")},L.parameter)}for(;p;){try{if(p.frames[c]){m=p;break}}catch(S){}if(p===window.top)break;p=p.parent}m||(h(),p.__tcfapi=_,p.addEventListener("message",I,!1))}n();var o=function(){var c=arguments;typeof window.__uspapi!==o&&setTimeout(function(){typeof window.__uspapi!="undefined"&&window.__uspapi.apply(window.__uspapi,c)},500)},a=function(){r++,window.__uspapi===o&&r<s?console.warn("USP is not accessible"):clearInterval(d)};if(typeof window.__uspapi=="undefined"){window.__uspapi=o;var d=setInterval(a,6e3)}}function TE(i=new Date(new Date().getTime()+1e3*60*60*24*390)){var t,r;function e(s,n,o){return o.substring(0,s)+n+o.substring(s+n.length)}if(window.freestar.fsdata.cmpType==="FREESTAR"&&window.freestar.locData.iso==="US"){let s="usprivacy",n=Lt({name:s});if((((r=(t=window==null?void 0:window.freestar)==null?void 0:t.fsdata)==null?void 0:r.mspaStates)||sr).includes(window.freestar.locData.state))if(!n)Di({name:s,value:"1-N-",domain:`.${window.location.host}`,expires:i});else{let d=document.evaluate("//a[text()='Do Not Sell My Personal Information']",document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;n[1]==="N"&&(d?Di({name:s,value:e(1,"Y",n),domain:`.${window.location.host}`,expires:i}):Di({name:s,value:e(1,"-",n),domain:`.${window.location.host}`,expires:i}))}}}var If=f(()=>{_e();he();Qe()});var Ja,Af=f(()=>{le();Ja=()=>T(void 0,null,function*(){let i=Nd({queue:[]},freestar);freestar.queue={push:function(e){e()}};for(let e=0;e<i.queue.length;e++)try{yield i.queue[e]()}catch(t){freestar.log(10,`An error occurred while processing an item from the freestar queue: ${t.message}`)}i={}})});function ZA(){googletag.cmd.push(()=>{googletag.setConfig({targeting:{fspbg:"freestar"}}),googletag.pubads().setPrivacySettings({nonPersonalizedAds:!0})})}function bi(i,e){return T(this,null,function*(){var r,s;freestar.log(0,"RESTRICTED_ADS: Loading limited/non-personalized ads");let t=(s=(r=e.fsdata)==null?void 0:r.disallowedGeos)==null?void 0:s.includes(e.locData.iso);if(i){e.newAdSlots=()=>{freestar.log(1,"RESTRICTED_ADS: Invalid consent for newAdSlots")};return}if(Or())throw new Error("Ad serving is blocked in "+e.locData.iso);t||e.fsdata.placements.length&&(ZA(),e.newAdSlots=vE,e.deleteAdSlots=eb,yield Ja(),e.refresh=tb,e.trackPageview=ib,e.config.enabled_slots.length&&vE(e.config.enabled_slots))})}function XA(i){if(!i)return[];let e=Array.isArray(i)?i:[i];return In(e.filter(({placementName:t})=>!!re({name:t})),"slotId")}function vE(i,e){let t=XA(i);t.length&&(!e&&freestar.config.channel&&(e=freestar.config.channel),freestar.config.orignalChannel||(freestar.config.orignalChannel="{{channel}}"),e&&freestar.config.orignalChannel!==e&&(freestar.fsdata.placements=freestar.fsdata.placements.map(r=>(r.dfpId=r.dfpId.replace(freestar.config.orignalChannel,e),r)),freestar.config.orignalChannel=e),t.forEach(function(r){let{placementName:s,slotId:n,targeting:o}=r,a=document.getElementById(n),d=re({name:s}),c=To(d);a&&a.id&&d&&c&&googletag.cmd.push(function(){let p=googletag.pubads().getSlots().find(m=>m.getAdUnitPath()===d.dfpId&&m.getSlotElementId()===a.id);p||(p=googletag.defineSlot(d.dfpId,c,a.id).addService(googletag.pubads())),o&&Object.entries(o).forEach(([m,h])=>{p.setConfig({targeting:{[m]:h}})}),googletag.setConfig({singleRequest:!0}),googletag.enableServices(),googletag.display(a.id),googletag.pubads().refresh([p])})}))}function eb(i){if(i===void 0){googletag.cmd.push(()=>{googletag.destroySlots()});return}Array.isArray(i)||(i=[i]),googletag.cmd.push(()=>{i.forEach(e=>{let t=po({elementId:e});t&&googletag.destroySlots([t])})})}function tb(){}function ib(){}var Za=f(()=>{te();Ss();le();Ve();Af()});function RE(){let i=window,e,t={};for(;i;){try{if(i.frames.__tcfapiLocator){e=i;break}}catch(s){}if(i===window.top)break;i=i.parent}if(!e)return;window.__tcfapi=function(s,n,o,a){if(!e)o({msg:"CMP not found"},!1);else{let d=Math.random()+"",c={__tcfapiCall:{command:s,parameter:typeof a=="function"?void 0:a,version:n,callId:d}};t[d]=o,e.postMessage(c,"*")}};function r(s){let n={};try{n=typeof s.data=="string"?JSON.parse(s.data):s.data}catch(a){}let o=n.__tcfapiReturn;o&&typeof t[o.callId]=="function"&&t[o.callId](o.returnValue,o.success)}window.addEventListener("message",r,!1)}var OE=f(()=>{});function PE(){if(!window.__gpp){freestar.log(1,"STATE_OPTIN_BRIDGE: GPP API not available");return}window.__gpp("addEventListener",i=>{(i.eventName==="sectionChange"||i.eventName==="signalStatus")&&rb()}),freestar.log(0,"STATE_OPTIN_BRIDGE: Initialized successfully")}function rb(){!window.__gpp||!window.__tcfapi||window.__gpp("getGPPData",i=>{if(!i||!i.sections)return;let e=i.sections.usnat;e&&(freestar.log(0,"STATE_OPTIN_BRIDGE: Syncing USNAT consent to TCF",e),sb())})}function sb(){window.__tcfapi&&window.__tcfapi("getTCData",2,(i,e)=>{if(!e){freestar.log(1,"STATE_OPTIN_BRIDGE: Failed to get TCF data");return}let{purpose:t,vendor:r}=i,s=(t==null?void 0:t.consents)||{},n=(r==null?void 0:r.consents)||{},o=CE.every(d=>s[d]===!0),a=n[os]===!0;freestar.log(0,`STATE_OPTIN_BRIDGE: TCF Verification - All Purposes: ${o}, Vendor 850: ${a}`,{purposeConsents:s,vendorConsents:n})})}function xE(i){if(!i)return!1;let{purpose:e,vendor:t}=i,r=(e==null?void 0:e.consents)||{},s=(t==null?void 0:t.consents)||{},n=CE.every(a=>r[a]===!0),o=s[os]===!0;return n&&o}var CE,DE=f(()=>{he();CE=[1,2,3,4,7,9,10]});var nb,Wi,bf,ob,ab,wf,NE=f(()=>{DE();Za();nb=["tcloaded","useractioncomplete"],Wi=!1,bf=0,ob=function({data:i}){let{eventStatus:e}=i;if(nb.includes(e)){let t=xE(i);return freestar.log(0,`STATE_OPTIN: Consent parsed - eventStatus: ${e}, consentGiven: ${t}`),t}return!1},ab=i=>(e,t)=>{if(e.eventStatus!=="cmpuishown"&&!(e.eventStatus==="tcloaded"&&!e.purpose&&!e.vendor)&&e.eventStatus==="useractioncomplete"){let r=ob({data:e});t?!Wi&&r?(Wi=!0,freestar.log(0,"STATE_OPTIN: Full consent received, loading pubfig"),i()):!Wi&&!r&&(freestar.log(1,"STATE_OPTIN: Full consent not given, attempting restricted ads"),bi(r,globalThis.freestar)):freestar.log(1,"STATE_OPTIN: TCF Callback Failed")}},wf=function(i){if(bf++,bf===50){clearTimeout(freestar.timers.stateOptInTcfapi),freestar.timers.stateOptInTcfapi=null,freestar.log(1,"STATE_OPTIN: TCF API not found after 50 attempts, loading restricted ads as fallback"),bi(!1,globalThis.freestar);return}if(bf<50&&!window.__tcfapi){freestar.timers||(freestar.timers={}),freestar.timers.stateOptInTcfapi=setTimeout(()=>wf(i),500);return}freestar.timers&&freestar.timers.stateOptInTcfapi&&(clearTimeout(freestar.timers.stateOptInTcfapi),freestar.timers.stateOptInTcfapi=null),freestar.log(0,"STATE_OPTIN: TCF API found, initializing USNAT \u2194 TCF bridge"),PE(),window.__tcfapi("addEventListener",2,ab(i));function e(t=1){var r;try{let s=Object.keys(localStorage).find(h=>h.startsWith("_sp_user_consent_"));if(!s)return;let n=localStorage.getItem(s);if(!n)return;let o=JSON.parse(n),a=(r=o==null?void 0:o.usnat)==null?void 0:r.consentStatus;if((a==null?void 0:a.hasConsentData)!==!0){t<20?setTimeout(()=>e(t+1),100):freestar.log(1,"STATE_OPTIN: Timeout waiting for consent data");return}let c=a==null?void 0:a.granularStatus,u=(c==null?void 0:c.sellStatus)===!0,p=(c==null?void 0:c.shareStatus)===!0,m=u||p;!Wi&&m?(Wi=!0,freestar.log(0,"STATE_OPTIN: User gave consent, loading pubfig"),i()):!Wi&&!m&&(Wi=!0,freestar.log(1,"STATE_OPTIN: User rejected consent, attempting restricted ads"),bi(!1,globalThis.freestar))}catch(s){freestar.log(1,`STATE_OPTIN: Error checking localStorage: ${s.message}`)}}window._stateOptInCheckConsent=e,e()}});function cb(i){if(!window.__gpp){i(null);return}window.__gpp("getGPPData",e=>{var s,n;if(!e){i(null);return}freestar.log(0,"GPP_OPTOUT: GPP data received",e);let t=(s=e.parsedSections)==null?void 0:s.usnat;if(t){let o=t.SaleOptOut===1,a=t.SharingOptOut===1,d=t.TargetedAdvertisingOptOut===1,c=o||a||d;freestar.log(0,`GPP_OPTOUT: USNAT section - SaleOptOut: ${o}, SharingOptOut: ${a}, TargetedOptOut: ${d}`),i(c);return}let r=(n=e.parsedSections)==null?void 0:n.usca;if(r){let o=r.SaleOptOut===1,a=r.SharingOptOut===1,d=o||a;freestar.log(0,`GPP_OPTOUT: USCA section - SaleOptOut: ${o}, SharingOptOut: ${a}`),i(d);return}freestar.log(0,"GPP_OPTOUT: No US sections found in GPP data"),i(null)})}function ME(i){if(!window.__uspapi){i(null);return}window.__uspapi("getUSPData",1,(e,t)=>{if(!t||!e||!e.uspString){freestar.log(1,"GPP_OPTOUT: USP API call failed or no data"),i(null);return}let r=e.uspString;if(freestar.log(0,`GPP_OPTOUT: USP string received: ${r}`),r.length>=3){let s=r.charAt(2).toUpperCase()==="Y";freestar.log(0,`GPP_OPTOUT: USP opt-out sale: ${s}`),i(s);return}i(!1)})}function kE(i){var r,s;if(Tf++,Tf>=db){clearTimeout((r=freestar.timers)==null?void 0:r.gppOptOut),freestar.timers.gppOptOut=null,freestar.log(1,"GPP_OPTOUT: No GPP or USP API found after max attempts, proceeding with normal flow"),i(!1);return}let e=!!window.__gpp,t=!!window.__uspapi;if(!e&&!t){freestar.timers||(freestar.timers={}),freestar.timers.gppOptOut=setTimeout(()=>kE(i),lb);return}(s=freestar.timers)!=null&&s.gppOptOut&&(clearTimeout(freestar.timers.gppOptOut),freestar.timers.gppOptOut=null),freestar.log(0,`GPP_OPTOUT: APIs found - GPP: ${e}, USP: ${t}`),e?cb(n=>{if(n!==null){i(n);return}t?ME(o=>{i(o===!0)}):i(!1)}):t?ME(n=>{i(n===!0)}):i(!1)}function LE(i){Tf=0,kE(e=>{e?(freestar.log(0,"GPP_OPTOUT: User has opted out via GPP/USP, running restricted ads"),bi(!1,globalThis.freestar)):(freestar.log(0,"GPP_OPTOUT: User has NOT opted out, proceeding with normal flow"),i())})}var Tf,db,lb,BE=f(()=>{Za();Tf=0,db=50,lb=500});function pb(i,...e){return i&&e?e.every(t=>!!i[t]):!1}function hb(i,...e){return i&&e?e.every(t=>!!i[t]):!1}function _b(i,e,t){var n;let r=e||t,s={cmpType:i,tcfapi:e,uspapi:t};(n=freestar==null?void 0:freestar.analyticsQueue)==null||n.push(new X({eventName:"PRIVACY_COMPLIANCE",eventType:`SITE_HAS_CMP=${r}`,data:s})),freestar.log(0,`PRIVACY_COMPLIANCE SITE_HAS_CMP=${r} ${JSON.stringify(s)}`)}function Js(i){oh(),Oi()?(freestar.log(0,"Privacy Flow: STATE OPT-IN selected"),wf(i)):Dt()?(freestar.log(0,"Privacy Flow: MSPA selected"),ns.indexOf(freestar.locData.iso)>-1?Pf(i):i()):ns.indexOf(freestar.locData.iso)>-1?(freestar.log(0,"Privacy Flow: GDPR selected"),Pf(i)):i()}function GE(){if(!document.getElementById("pmLink"))return;let i=document.getElementById("pmLink").style.visibility,e=!!window.__tcfapi;if((!!window.__uspapi||e)&&!i)if(Dt()){document.getElementById("pmLink").style.visibility="visible",document.getElementById("pmLink").innerHTML="Do Not Sell or Share My Personal Information";let r=freestar.fsdata.mspsPrivacyManagerId||gn;document.getElementById("pmLink").onclick=function(){window._sp_.usnat.loadPrivacyManagerModal(String(r))}}else{document.getElementById("pmLink").style.visibility="visible",document.getElementById("pmLink").innerHTML="Privacy Preferences";let r=freestar.fsdata.gdprPrivacyManagerId||mn;document.getElementById("pmLink").onclick=function(){window._sp_.gdpr.loadPrivacyManagerModal(String(r))}}}var fb,Of,Cf,FE,vf,ub,mb,gb,Pf,Rf,UE,xf=f(()=>{_e();he();AE();le();Wa();bE();If();Za();mt();OE();NE();BE();fb=["tcloaded","useractioncomplete"],Of=1,Cf=10,FE=!1,vf=0,ub=function({consents:i}){freestar.consentManagement.consentData={consents:{[Of]:i?i[Of]:void 0,[Cf]:i?i[Cf]:void 0}}};mb=function({data:i}){let{eventStatus:e}=i;if(fb.includes(e)){let{purpose:t,vendor:r}=i,s=t?t.consents:void 0,n=r?r.consents:void 0;return ub({consents:s}),pb(s,Of,Cf)&&hb(n,os)}},gb=i=>(e,t)=>{if(e.eventStatus==="cmpuishown")return;let r=mb({data:e});t?!FE&&r?(FE=!0,freestar.log(0,"GDPR: Full consent received, loading pubfig"),i()):r||(freestar.log(1,"GDPR: Full consent not given, attempting restricted ads"),bi(r,globalThis.freestar)):freestar.log(1,"GDPR: TCF Callback Failed")},Pf=function(i){if(vf++,vf===50){clearTimeout(freestar.timers.tcfapi),freestar.timers.tcfapi=null,freestar.log(1,"GDPR: TCF API not found after 50 attempts");return}if(vf<50&&!window.__tcfapi){freestar.timers||(freestar.timers={}),freestar.timers.tcfapi=setTimeout(()=>Pf(i),500);return}freestar.timers&&freestar.timers.tcfapi&&(clearTimeout(freestar.timers.tcfapi),freestar.timers.tcfapi=null),freestar.log(0,"GDPR: TCF API found, setting up listener"),window.__tcfapi("addEventListener",2,gb(i))};Rf={QUANTCAST:"FREESTAR",PUBFIG:"FS_SOURCEPOINT_PUBFIG",PUBLISHER:"PUBLISHER"},UE=(i,e,t)=>{let r=i===Rf.PUBFIG,s=i===Rf.QUANTCAST,n=i===Rf.PUBLISHER,o=!!window.__tcfapi,a=!!window.__uspapi,d=Oi(e)&&!o,c=!d&&Dt(e)&&!a,u=!d&&Jr(e)&&!o,p=n&&Ku(e);r&&(d||c||u)?IE(e,t):s&&(c||u)?wE(t):p?LE(t):(n&&u&&RE(),t()),_b(i,o,a)}});function HE(i){if(i){let e=document.getElementsByTagName("head")[0],t=B({type:"style",attributes:[{type:"text/css"},{"data-owner":"freestar"}]});t.appendChild(document.createTextNode(i.replace(/(\r\n|\n|\r)/gm,""))),e.appendChild(t)}}function Df(i){if(!i.state||Object.keys(i.state).length===0)return;let e=window.location.origin,t=i.state.current?e+i.state.current:window.location.href;GE(),freestar.trackPageview({path:t})}function Xa(){var a;if(window.freestar.initialBrowserInfoSent&&!((a=window.freestar.func)!=null&&a.domloaded))return;let i=window.innerWidth,e=window.innerHeight,t=document.body,r=document.documentElement,s=Math.max(t.scrollHeight,t.offsetHeight,r.clientHeight,r.scrollHeight,r.offsetHeight),n=document.querySelector("link[rel='canonical']"),o="";n&&(o=n.getAttribute("href")),freestar.msg.loadTime===0&&(freestar.msg.loadTime=Date.now()-freestar.hitTime),window.freestar.lastHrefPushed=window.freestar.lastHrefPushed||"",window.googletag.cmd.push(function(){window.freestar.lastHrefPushed!==freestar.url&&(window.freestar.lastHrefPushed=freestar.url,G.instance.resolve(l.ANALYTICS).then(d=>{d.track(new oo({canonical:o,fpc:freestar.msg.fpc,hitTime:freestar.hitTime,loadTime:freestar.msg.loadTime,winHeight:e,winWidth:i,maxHeight:s,isServerToServer:freestar.server.diceRoll,googleVersion:window.googletag.getVersion()||""}))}))})}function YE(i){Nf(i,!0)}function Eb({eventObject:i,event:e,complete:t}){if(t?e=freestar.dfpSlotInfo[i.elementId]:freestar.dfpSlotInfo[i.elementId]=e,e&&i&&!Zd({event:e})){let{slot:r}=e,s=r.getConfig("targeting").targeting["fs-auuid"][0]||null;G.instance.resolveAll([l.ANALYTICS,l.DFP_RESPONSE_ANALYTICS_EVENT_FACTORY]).then(({analytics:n,dfpResponseAnalyticsEventFactory:o})=>{n.track(o.create({slotId:i.elementId,placementId:i.placementId,DfpId:i.adUnitPath,advertiserId:e.advertiserId,campaignId:e.campaignId,isEmpty:e.isEmpty,lineItemId:e.lineItemId,serviceName:e.serviceName,size:JSON.stringify(e.size),sourceAgnosticCreativeId:e.sourceAgnosticCreativeId,sourceAgnosticLineItemId:e.sourceAgnosticLineItemId,parentDiv:i.elementId,complete:t||!1,auctionId:i.auctionId?i.auctionId:null,fsAuctionId:s}))})}e&&Zd({event:e})&&(window.freestar.googleInterstitialPlacement||(window.freestar.googleInterstitialPlacement={}),window.freestar.googleInterstitialPlacement.event=e)}function Nf(i,e){var d;if(!i)return;let t=i.slot.getSlotElementId(),r=i.slot.getAdUnitPath(),s=ge({slotId:t,path:r}),n={elementId:t,creativeId:i.creativeId,adUnitPath:r,placementId:s,displayed:!i.isEmpty},o=Qr({freestar}),a=(d=i.slot.getConfig("targeting").targeting[o.auction_id])!=null?d:[];a.length!==0&&(n.auctionId=a[0]),s&&s!=="unknown"&&(je({name:"adServerResponse",detail:n}),freestar.pushdownControl&&freestar.pushdownControl.postGamResponse&&freestar.pushdownControl.postGamResponse({event:i}),Eb({event:i,eventObject:n,complete:e}),hE({event:i}),freestar.fsdata.customDirectAdRefresh&&wn(),Zu(i))}function jm(i,{id:e=null}={}){let t=B({type:"style",attributes:[{"data-owner":"freestar"}],id:e});t.textContent=i,document.head.append(t)}function $E(){let i={video:[],script:[],iframe:[]};function e(t){let r=t.src;return r!==""&&r!==void 0&&r!==null&&r!=="about:blank"}Object.keys(i).forEach(t=>{let r=document.querySelectorAll(t);i[t]=Array.from(r).filter(e).map(({src:s})=>s)}),G.instance.resolve(l.ANALYTICS).then(t=>{t.track(new qo({scripts:i.script,videos:i.video,iframes:i.iframe}))})}function To(i,e=window){let t=null;return i.sizeMappings.some(r=>{if(_t(e)>=r.viewport.size[0])return t=r.size.sort(Ar).filter(s=>s[0]!==35843),!0}),t}function Mf({placement:i,slotId:e,slotConfig:t,targeting:r={},gamManager:s}){if(!i)return;ci({placementName:i.name,slotId:e||i.name});let n=s.getSlot({elementId:[e||i.name]});n||(n=s.createSlot({placement:i,id:e,slotConfig:t})),n&&di(n,i.name,Object.assign(r,{fs_ad_product:ke(i),fs_ad_optimization:Tt(i)}));let o=Wt(i);return e&&(o.code=e),{slot:n,bidObject:o,placement:i}}var i_,kh,VE,zE,Ae,qE,re,B_,Km,te=f(()=>{le();Tn();Ci();Ve();$s();ot();Wn();De();uE();_e();Ka();mE();U();wr();F();xf();i_=i=>i.length===1&&i[0][0]===1&&i[0][1]===1,kh=({placement:i})=>{let e="";if(!i)return e;let t=i.sizes.filter(s=>Array.isArray(s)),r={w:as(t,s=>s[0]),h:as(t,s=>s[1])};return r.w&&r.w.length&&(e+=`__${r.w.join("x")}`),r.h&&r.h.length&&(e+=` __${r.h.join("x")}`),e},VE=i=>{let e=document.getElementsByTagName("body")[0];e.className.indexOf(`${i}`)==-1&&(e.className+=e.className.length?` ${i}`:i)};zE=()=>["v2ContentCategory","v2ContentSource","v2ContentMediaFormat","v2ContentChannel","v2ContentType","v2ContentLanguage","v2ContentSourceGeo"].reduce((e,t)=>window.freestar.fsdata[t]?[...e,...window.freestar.fsdata[t]]:e,[]),Ae=()=>Ef(),qE=({id:i})=>document.querySelector(`#${i}`)!==null;re=({name:i})=>window.freestar.fsdata.placements.find(e=>e.name===i);B_=i=>i.intersectionRatio>0&&i.isIntersecting&&$u(i,"target.id.length",0)>1,Km=({email:i})=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(i)});function jE({placementName:i,slotId:e}){!i||!e||(freestar.dynamicSlotLibrary||(freestar.dynamicSlotLibrary={}),freestar.dynamicSlotLibrary[e]=i)}function ho({slotId:i}){function e(){let t=re({name:i});return t&&t.name?t.name:"unknown"}return i?freestar.dynamicSlotLibrary&&freestar.dynamicSlotLibrary[i]?freestar.dynamicSlotLibrary[i]:(freestar.dynamicSlotLibrary&&!freestar.dynamicSlotLibrary[i],e()):"unknown"}var kf=f(()=>{te()});function KE({placementName:i,path:e}){!i||!e||(window.freestar.dynamicPathLibrary||(freestar.dynamicPathLibrary=[]),window.freestar.dynamicPathLibrary.push({placementName:i,path:e}))}function mo({path:i}){return i?window.freestar.dynamicPathLibrary.find(e=>e.path===i):"unknown"}var Lf=f(()=>{});function ci({placementName:i,slotId:e,path:t}){e&&jE({placementName:i,slotId:e}),t&&KE({placementName:i,path:t})}function ge({slotId:i=null,path:e=null}){return i?ho({slotId:i}):e?mo({path:e}):!1}var WE=f(()=>{kf();Lf()});var De=f(()=>{WE();kf();Lf()});function kr({placement:i,product:e=void 0,callback:t=void 0,timeout:r=!1,timestamp:s=!1}){this.placement=i,this.product=e,this.productKey=e+"Options",this.timeout=r,this.timestamp=s,this.resetIteration=()=>{this.iteration=0,sessionStorage.setItem(this.key,this.iteration.toString()),freestar.log(1,"Frequency Cap : reset iteration")},this.cleanUpIfTimedOut=()=>{this.timeout&&Date.now()-this.timestamp>=this.timeout&&(this.resetIteration(),this.timestamp=Date.now())},this.incrementIteration=()=>{this.iteration++,sessionStorage.setItem(this.key,this.iteration.toString())},this.subtractIteration=()=>{freestar.log(1,"Frequency Cap : iteration will remove this attempt as an iteration. Setting new sessionStorage item value."),this.iteration--,sessionStorage.setItem(this.key,this.iteration.toString())},this.fetchCap=()=>this.placement[this.productKey]&&i[this.productKey].cap>0?i[this.productKey].cap:-1,this.fetchIteration=()=>{let n=sessionStorage.getItem(this.key);return Number(n)?Number(n):0},this.allowProduct=()=>this.cap>0?this.iteration>=this.cap?(freestar.log(1,`Frequency Cap: iteration of ${this.iteration} is higher than cap of ${this.cap}. ${this.product} will not run again until the ${this.timeout?"timeout":"session"} ends.`),!1):(freestar.log(1,`Frequency Cap: iteration of ${this.iteration+1} is lower than or equal to the cap of ${this.cap}. Continue with ${this.product}.`),!0):!1,this.cap=this.fetchCap(),this.key=`fs.${this.product}.${this.placement.name}.frequencycap`,this.iteration=this.fetchIteration(),this.callback=t}function QE(i){let e=ge({slotId:i.slot.getSlotElementId()});e&&freestar.frequencyLibrary[e]&&freestar.frequencyLibrary[e].cap&&(i.isEmpty?i.isEmpty&&freestar.frequencyLibrary[e].callback&&freestar.frequencyLibrary[e].callback(!0):freestar.frequencyLibrary[e].incrementIteration())}var Ms=f(()=>{De()});function JE({classList:i=[]}={}){return B({type:"button",classList:i,attributes:[{"aria-label":"Close Ad"},{tabindex:0}]})}var ZE=f(()=>{te()});function Zr({placement:i,videoInstance:e={},refreshLibrary:t,adSlotsManager:r}){this.body=document.body,this.placement=i,this._refreshLibrary=t,this._adSlotsManager=r,this.iteration=0,this.FOOTER_CORDIAL_KEY="fs.stickyfooter.cordial",this.stickyFooterId="fs-sticky-footer",this.stickyElement=void 0,this.stickySlotElement=void 0,this.slotWrapper=void 0,this.closeButton=void 0,this.brandingElement=void 0,this.reportAdIconElement=void 0,this.error=!1,this.disabled=!1,this.options=Zt({placement:this.placement,type:oe.STICKY_FOOTER_OPTIONS}),this.errorSet=()=>{this.error=!0},this.disabledSet=()=>{this.disabled=!0},this.cordial={set:()=>{if(this.cordial.isCordial()){freestar.log({title:Le},"Cordial is being set in local storage with the following time : "+this.options.session);let s=this.options.session&&this.options.session>0?this.options.session:180,n=Date.now()+1e3*60*s;localStorage.setItem(this.FOOTER_CORDIAL_KEY,n.toString())}},isCordial:()=>(this.options.cordial?freestar.log({title:Le},"Cordial is active."):freestar.log({title:Le},"Cordial is not active."),this.options.cordial),isActivated:()=>{let s=localStorage.getItem(this.FOOTER_CORDIAL_KEY);if(s){if(s&&Date.now()>s)return freestar.log({title:Le},"Cordial storage item found, but time has lapsed and storage item will be removed."),localStorage.removeItem(this.FOOTER_CORDIAL_KEY),!1}else return freestar.log({title:Le},"Cordial storage item not found. Cordial not activated."),!1;return freestar.log({title:Le},"Cordial is activated. Exiting process"),!0}},this.isAdhesionDisabled=()=>{if(!this.placement||!this.options||!this.placement.sizes.length||!this.body)return freestar.log({title:Le},"No document body, placement, options, or sizes found! Exiting process."),this.errorSet(),!0;if(Pe({name:"stickyFooter"}))return this.disabledSet(),!0;if(this.options.remove){if(freestar.log({title:Le},"Option to remove is true."),document.querySelector("fs-select-footer-remove")||document.querySelector(this.options.remove))return freestar.log({title:Le},"Option to remove is on DOM! Exiting process."),this.disabledSet(),!0;freestar.log({title:Le},"Option to remove is not on DOM sticky footer will continue.")}return freestar.frequencyLibrary[this.placement.name].cap>-1&&!freestar.frequencyLibrary[this.placement.name].allowProduct()?(freestar.log({title:Le},"Frequency Cap has been met. Exiting process."),this.disabledSet(),!0):this.cordial.isCordial()&&this.cordial.isActivated()?(this.disabledSet(),!0):(freestar.log({title:Le},"Placement, options, and sizes found. No rules to disable have been accepted. Process will continue."),!1)},this.gumgumBidderRemoval=function(){this.options.gumgumSelect&&!document.getElementById("adhesion-select-one")&&(Cd(this.placement.bidders,s=>s.bidder==="gumgum"),window.fsprebid.adUnits=window.fsprebid.adUnits.map(s=>(s.code===this.placement.name&&Cd(s.bids,function(n){return se(n.bidder)==="gumgum"}),s)),freestar.log({title:Le},"Gumgum has been removed as a bidder"))},this.createStickyElement=function(){this.stickyElement=B({type:"div",id:this.stickyFooterId,classList:[this.stickyFooterId]}),this.stickyElement.style.zIndex=this.options.zindex&&`${this.options.zindex}`||"",this.body.appendChild(this.stickyElement)},this.setSlotMinHeight=function(){let{selectedSize:s}=freestar.fsdata.placements.find(c=>c.name===this.placement.name),n=s.size.map(c=>c[1]),o=Math.max.apply(Math,n),d=freestar.deviceInfo.device.type===st&&Dn()==="CONFIANT"&&freestar.fsdata.adQualityOptions&&freestar.fsdata.adQualityOptions.confiantReportThisAdEnabled&&J().allowConfiant()?o+20:o;this.stickyElement.style.minHeight=`${d}px`},this.createSlotElement=function(){this.stickySlotElement=B({type:"div",id:this.placement.name,classList:["fs-sticky-slot-element"],attributes:{name:this.placement.name,[dn]:"false"}}),this.stickySlotElement.style.visibility="inherit",this.slotWrapper=B({type:"div",id:"fs-slot-footer-wrapper",classList:["fs-sticky-parent","fs-sticky-wrapper"]}),this.slotWrapper.style.visibility="inherit",this.slotWrapper.style.zIndex="inherit",this.slotWrapper.appendChild(this.stickySlotElement),this.stickyElement.appendChild(this.slotWrapper);let s=()=>this.options.backgroundRgba&&this.options.backgroundRgba.length?this.options.backgroundRgba:freestar.fsdata.stickyFooterBackgroundRgba&&freestar.fsdata.stickyFooterBackgroundRgba.length?freestar.fsdata.stickyFooterBackgroundRgba:"rgba(247,247,247,.9)";this.backgroundColor=s(),this.setSlotMinHeight(),this.stickySlotElement.style.backgroundColor=this.backgroundColor,this.stickyElement.style.backgroundColor=this.backgroundColor;let n=()=>{this.stickyElement.style.minHeight=`${this.slotWrapper.offsetHeight}px`},o=()=>{let d=document.getElementsByClassName("fs-sticky-slot-element")[0]||{},{offsetHeight:c,offsetWidth:u}=d;this.brandingElement&&(c>50&&u<468?this.brandingElement.classList.add("fs-mobile-tall"):this.brandingElement.classList.remove("fs-mobile-tall"))};googletag.pubads().addEventListener(fo,d=>{d.slot.getSlotElementId()===this.placement.name&&(this.elementToggle("visible"),o(),n())}),googletag.pubads().addEventListener(Me,d=>{this.onSlotRenderEnded(d)}),fsprebid.que.push(()=>{fsprebid.onEvent(cr,d=>{d.adUnitCode===this.placement.name&&this.onBidWon(d.bidderCode)})});function a(d){let c=document.getElementById(d),u=c==null?void 0:c.querySelector("div[id*='google_ads_iframe']");u&&u.setAttribute("style","display: none;")}G.instance.resolve(l.EVENT_BUS).then(d=>{d.subscribe(mr,({payload:{elementId:c,bid:u}})=>{c===this.placement.name&&(a(c),typeof u.height=="number"&&(this.stickyElement.style.minHeight=`${u.height+4}px`),o(),freestar.log({title:Le},"Sticky footer rendered natively."))}),d.subscribe(yo,({payload:{elementId:c}})=>{c===this.placement.name&&this.removeSpecialAdhesion()})})},this.removeSpecialAdhesion=()=>{var s,n;(n=(s=this.specialAdhesionElement)==null?void 0:s.parentNode)==null||n.removeChild(this.specialAdhesionElement),delete this.specialAdhesionElement},this.buttonEvents={onPage:!1,clicked:!1},this.closeButtonCreate=()=>{this.closeButton=JE(),this.closeButton.setAttribute("class","fs-close-button fs-close-button-sticky"),this.closeButton.style.visibility="inherit",this.buttonEvents.onPage||(this.buttonEvents.onPage=!0,G.instance.resolve(l.ANALYTICS).then(s=>{s.track(new X({eventName:"STICKY_BUTTON_SHOWED",eventType:"STICKY_FOOTER",data:{value:!0}}))})),this.slotWrapper.appendChild(this.closeButton),this.closeButton.addEventListener("click",this.closeButtonMethod)},this.closeButtonMethod=()=>{this.cordial.set(),this.removeStickyElements(),this.buttonEvents.clicked||(this.buttonEvents.clicked=!0,G.instance.resolve(l.ANALYTICS).then(s=>{s.track(new X({eventName:"STICKY_CLOSE_CLICKED",eventType:"STICKY_FOOTER",data:{value:!0}}))}))},this.createReportThisAd=function(s,n){let o=document.createElement("a");o.textContent="Report This Ad",o.style.color="#999",G.instance.resolve(l.CONFIANT).then(a=>{o.addEventListener("click",function(){a.reportSingleAd(s)})}),n.appendChild(o)},this.createBranding=()=>T(this,null,function*(){let[s,n]=yield Promise.all([l.BRANDING,l.REPORT_AD].map(c=>G.instance.resolve(c,!0))),o;s&&(o=s.createLink(this.placement));let a=this.placement.name,d=n==null?void 0:n.createTextButton(a,this.placement);if(o!=null&&o.enabled||d!=null&&d.enabled){let c=B({classList:["fs-sticky-popup-container"],style:{display:"none"}}),u=document.createElement("div");if(u.style.position="relative",o!=null&&o.enabled){this.brandingElement=B({type:"div",classList:["__fs-branding"]});let p=B({type:"a",attributes:[{target:"_blank"}]});this.brandingElement.style.visibility="inherit";let m=B({type:"img",src:o.getLogoUrl(),attributes:[{alt:"Freestar"}]});p.style.cursor.pointer,p.appendChild(m),this.brandingElement.appendChild(p),this.slotWrapper.appendChild(this.brandingElement),c.appendChild(o.getElement()),d.enabled&&c.appendChild(d.getElement()),u.appendChild(c),document.body.appendChild(u),this.brandingElement.addEventListener("click",function(h){var I,S;h.stopPropagation(),c.style.display=c.style.display==="none"?"grid":"none";var _=this.getBoundingClientRect();wl(c,{position:"fixed",top:`${_.top-70}px`,left:`${_.left-70}px`,backgroundColor:((I=this.options)==null?void 0:I.backgroundRgba)||((S=freestar.fsdata)==null?void 0:S.stickyFooterBackgroundRgba)||"rgba(247,247,247,.9)"})})}else{this.reportAdIconElement=B({type:"div",classList:["__fs-branding"]});let p=n.createIconButton(a,this.placement);this.reportAdIconElement.style.visibility="inherit",this.reportAdIconElement.appendChild(p.getElement()),this.slotWrapper.appendChild(this.reportAdIconElement)}document.addEventListener("click",function(){c.style.display="none"})}}),this.closeButtonMethod.bind(this),this.frequencyCapInit=()=>{freestar.frequencyLibrary[this.placement.name]=new kr({placement:this.placement,product:"stickyFooter"})},this.videoAdRequest=function(s){var a;let n=Date.now(),o=(d,c)=>{var _;if(this.stickyFooterDeleted)return;if(c&&c.userEnded){freestar.log(1,"Sticky Footer Video: User ended video. Will not refresh sticky footer."),this.cordial.set();return}let u=((_=this._refreshLibrary[this.placement.name])==null?void 0:_.refreshTime)||30,p=(Date.now()-n)/1e3,m=u-p;function h(){m>=10?freestar.currentStickyFooter.fillSlot(m):freestar.currentStickyFooter.fillSlot()}document.hasFocus()?h():freestar.focusQueue.push(h)};this.hideAdhesion(),(a=e.footerVideoInit)==null||a.call(e,{videoAd:s,callback:o,placement:this.placement})},this.fillSlot=function(s=void 0,n){var d,c,u;s||this.iteration++;let o=(d=e.videoFetch)==null?void 0:d.call(e,{iteration:this.iteration,placement:this.placement}),a=this._refreshLibrary.getRefreshLibraryItem({slotId:this.placement.name});if(o&&!s)this.isVideo=!0,this.hideAdhesion(),a!=null&&a.refreshTime&&a.setRefreshTime(-1),this.videoAdRequest(o);else{this.isVideo=!1,(c=a==null?void 0:a.setRefreshTime)==null||c.call(a,s);let p={fsrefresh:String((u=a==null?void 0:a.timesRefreshed)!=null?u:0)};this._adSlotsManager.newAdSlots([{slotId:this.placement.name,placementName:this.placement.name,targeting:p}],null,n)}},this.elementToggle=s=>{this.stickyElement&&(this.stickyElement.style.setProperty("display","block"),this.stickyElement.style.setProperty("visibility",s),this.stickyElement.style.setProperty("background-color",this.backgroundColor))},this.hideAdhesion=()=>{this.elementToggle("hidden")},this.showAdhesion=()=>{this.elementToggle("visible")},this.fetchCLSElement=()=>document.getElementById(this.placement.name+"-sticky-footer-cls"),this.init=function(){if(this.frequencyCapInit(),!this.isAdhesionDisabled()){if(ci({slotId:this.placement.name,placementName:this.placement.name}),this.gumgumBidderRemoval(),this.options.clsEnabled?(this.stickyElement=this.fetchCLSElement(),this.stickyElement&&(this.stickyElement.className+=` ${this.stickyFooterId}`)):this.createStickyElement(),!this.stickyElement){freestar.log({title:Le},"There is no sticky element! Exiting!");return}this.createSlotElement(),this.closeButtonCreate(),this.createBranding(),this.fillSlot()}},this.init(),this.onSlotRenderEnded=({isEmpty:s,slot:n})=>{n.getSlotElementId()===this.placement.name&&(s?this.hideAdhesion():(this.showAdhesion(),Rr({elementSelector:un.ogury,callback:(o,a)=>{o&&(this.hideAdhesion(),this.specialAdhesionElement=a)}})),freestar.performanceLogger.logMark({markerName:be.pubfigStickyFooterSlotRenderEnded,compareTo:[be.pubfigStickyFooterSlotRequested]}))},this.onBidWon=function(s){s=se(s),this.showAdhesion(),un[s]&&Rr({elementSelector:un[s],callback:(n,o)=>{n&&(this.hideAdhesion(),this.specialAdhesionElement=o)},timeout:10*1e3})},this.getIsNextVideo=()=>{var n;return!!((n=e.videoFetch)==null?void 0:n.call(e,{iteration:this.iteration+1,placement:this.placement}))},this.stickyFooterRefresh=s=>{s instanceof Promise?s.then(()=>{this.removeSpecialAdhesion()}):this.removeSpecialAdhesion();let n=this._refreshLibrary.getRefreshLibraryItem({slotId:this.placement.name});n.refreshTime=-1;let o=this.placement.name;s instanceof Promise&&s.then(()=>{window.freestar.superflex&&window.freestar.superflex.removeCSS({elementId:o})}),this.fillSlot(null,s)},this.removeStickyElements=()=>{[this.stickySlotElement,this.stickyElement,this.slotWrapper].forEach(s=>{try{s&&s.parentNode&&s.parentNode.removeChild(s)}catch(n){freestar.log(1,`Error: ${n}`)}})},this.deleteStickyFooter=()=>{this.stickyFooterDeleted=!0,this.isVideo&&window.AdPlayerPro&&window.AdPlayerPro().remove(),this.cordial.set(),r.deleteAdSlots([{elementId:this.placement.name}]),this.removeSpecialAdhesion(),this.removeStickyElements()},this.isSticky=s=>this.placement.name===s.slot.getSlotElementId()}var ed=f(()=>{le();Nt();pt();Ms();te();ZE();Dr();he();De();us();Ne();We();Bt();Ut();Jt();ti();$i();U();wr();F();Mo();_e();ss()});var Xr,es,Bf=f(()=>{ed();te();Nt();$i();U();F();mt();Xr={},es=class{constructor({placement:e,videoInstance:t,refreshLibrary:r,adSlotsManager:s}){this.placement=JSON.parse(JSON.stringify(e)),this.videoCount=0,this.timer=null,this._videoInstance=t||{},this._adSlotsManager=s||{},this._refreshLibrary=r,this.init()}init(){var t,r;if(this.videoAd=(r=(t=this._videoInstance).getEnabledVideo)==null?void 0:r.call(t,{placement:this.placement}),this.placement.stickyFooterOptions.videoPattern="NO_STICKY_FOOTER_OUTSTREAM_VIDEO_PATTERN",this.placement.stickyFooterOptions.video=!1,this.footer=new Zr({placement:this.placement,videoInstance:this._videoInstance,refreshLibrary:this._refreshLibrary,adSlotsManager:this._adSlotsManager}),this._appendCSS(),Pe({name:"videoAdhesion"}))return;let{delayTime:e=0}=this.videoAd||{};e<1&&(e=1),freestar.log({title:qt},`${e}s before video loads...`),Xr.delay=setTimeout(()=>{clearTimeout(Xr.delay),this.initVendor()},e*1e3),this._attachStickyFooterResizeListener()}initVendor(){var e,t,r;!freestar.currentStickyFooter||!this.videoAd||(this.videoCount+=1,(r=(t=(e=this._videoInstance)==null?void 0:e.videoVendors)==null?void 0:t[this.videoAd.vendor])==null||r.call(t,{callback:(s=null,n=null)=>{this.handleCallback(s,n)},placement:this.placement,videoAd:this.videoAd}))}_appendCSS(){let e=B({type:"style",id:this._getStyleId()}),{offsetHeight:t}=this.footer.slotWrapper;e.textContent=this._getCustomStyles(t),document.head.appendChild(e)}handleCallback(e=null,t=null){if(!freestar.currentStickyFooter)return;if(e){freestar.log({title:qt},"ERROR",e);return}let{frequencyCap:r=0}=this.videoAd;if(t.userEnded){freestar.log({title:qt},"User exited, no longer loading videos...");return}if(r>0&&this.videoCount>=r){freestar.log({title:qt},`Frequency cap set to ${r}, no longer loading videos...`);return}document.hasFocus()?this.callNextVideo():freestar.focusQueue.push(()=>{this.callNextVideo()})}callNextVideo(){if(!freestar.currentStickyFooter)return;let{timeToWaitBetweenVideos:e=0}=this.videoAd;freestar.log({title:qt},`${e}s before next video loads...`),Xr.delay=setTimeout(()=>{clearTimeout(Xr.delay),freestar.currentStickyFooter.initVendor()},e*1e3)}stickyFooterRefresh(e){this.footer.stickyFooterRefresh(e)}hideAdhesion(e){this.footer.hideAdhesion(e)}deleteStickyFooter(){if(Object.keys(Xr).forEach(e=>{clearTimeout(Xr[e])}),freestar.currentStickyFooter.footer.deleteStickyFooter(),window.AdPlayerPro){let e=window.AdPlayerPro();e&&e.remove()}if(freestar.currentOutstreamPlayer){freestar.currentOutstreamPlayer.videoPlayer.dispose();let e=document.getElementById("fs-player-container");e==null||e.parentNode.removeChild(e)}delete freestar.currentStickyFooter}_adjustVideoPosition({payload:{stickyFooterHeight:e}}){let t=document.querySelector(`#${CSS.escape(this._getStyleId())}`);t&&(t.textContent=this._getCustomStyles(e))}_attachStickyFooterResizeListener(){G.instance.resolve(l.EVENT_BUS).then(e=>{e.subscribe(Eo,t=>this._adjustVideoPosition(t))})}_getCustomStyles(e=0){return` .orp-player-wrapper { margin-bottom: ${e+10}px !important; bottom: 0px !important; }`}_getStyleId(){return`${this.placement.name}-stylesheet`}isVisible(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}}});function ey(i,e,t,r,s){let n=freestar.fsdata.placements.filter(a=>it({placement:a,type:oe.STICKY_FOOTER_OPTIONS})&&a[oe.STICKY_FOOTER_OPTIONS].isOnCall);if(Ke()&&n.length&&!XE){XE=!0,freestar.log("Sticky Footer: Sticky is on Call and PSO enabled next pub needs to call newStickyFooter");return}if(Ke()&&!freestar.fsdata.psoDisableInteraction&&!Ff){On({name:"stickyFooter",callback:yb.bind(null,{})});return}let o;if(i&&i.length?(freestar.log(1,`Sticky Footer: newStickyFooter method invoked and requesting placement with the name ${i}.`),o=re({name:i})):(o=window.freestar.fsdata.placements.filter(a=>a.stickyFooterOptions&&a.stickyFooterOptions.active)[0],o&&freestar.log(1,`Sticky Footer: newStickyFooter method invoked without a name for a placement. The default Sticky Footer ${o.name} was found and will be used.`)),o){freestar.log(1,`Sticky Footer: newStickyFooter method - attempting a new sticky footer using placement ${o.name}.`),freestar.currentStickyFooter&&freestar.currentStickyFooter.placement&&(freestar.log(1,`Sticky Footer: newStickyFooter method - the current sticky footer will be removed ${freestar.currentStickyFooter.placement.name}.`),freestar.currentStickyFooter=void 0),freestar.currentStickyFooter&&freestar.currentStickyFooter.deleteStickyFooter&&freestar.currentStickyFooter.deleteStickyFooter();let{stickyFooterOutstreamVideoPattern:a}=Uf(o);a==="VIDEO_DISPLAY_CONCURRENT"?freestar.currentStickyFooter=new es({placement:o,videoInstance:e,refreshLibrary:r,adSlotsManager:s}):freestar.currentStickyFooter=new Zr({placement:o,videoInstance:e,refreshLibrary:r,adSlotsManager:s}),freestar.deleteStickyFooter=freestar.currentStickyFooter.deleteStickyFooter}else freestar.log(1,"Sticky Footer: newStickyFooter method - no placement found for the sticky footer!");t&&t()}var Ff,XE,yb,Uf,ty=f(()=>{te();ed();Bf();pt();fs();Ve();Jt();Ff=!1,XE=!1,yb=function(i){Ff||(Ff=!0,freestar.newStickyFooter()),freestar.log(1,`${i}`)},Uf=i=>{let e=!1;return i.sizeMappings.some(t=>{if(_t()>=t.viewport.size[0]){let{stickyFooterOutstreamVideoPattern:r,delayTime:s,playerSize:n,timeToWaitBetweenVideos:o,videoAdhesionPosition:a,videoEnabled:d,videoAdId:c,videoId:u,frequencyCap:p}=t;return e={stickyFooterOutstreamVideoPattern:r,delayTime:s,playerSize:n,timeToWaitBetweenVideos:o,videoAdhesionPosition:a,videoEnabled:d,videoAdId:c,videoId:u,frequencyCap:p},!0}}),e}});var Gf,iy=f(()=>{U();pt();vu();Ou();ed();Bf();ty();Jt();F();mt();ec();Gf=class{constructor({freestar:e,video:t={},eventBus:r,refreshLibrary:s,adSlotsManager:n}){y(this,"newStickyFooter",e=>{ey(e,this._videoInstance,this._attachStickyFooterResizeListener.bind(this),this._refreshLibrary,this._adSlotsManager)});y(this,"setVideoAdhesionEnabled",e=>{var t,r;return(r=(t=this._videoInstance).setVideoAdhesionEnabled)==null?void 0:r.call(t,e)});y(this,"_attachStickyFooterResizeListener",()=>{this._resizeObserver&&this._resizeObserver.disconnect(),this._resizeObserver=new ResizeObserver(()=>{let t=ng();this._eventBus.emit(Eo,{stickyFooterHeight:t})});let e=Xl();e&&this._resizeObserver.observe(e)});y(this,"init",()=>{var e;try{performance.mark("stickyFooter-initialization-start");let t="Sticky Footer: initStickyFooter method - ";this._freestar.log(1,t+" invoked looking for sticky placements!");let r=this._freestar.fsdata.placements.filter(s=>s.validAdSizes&&it({placement:s,type:oe.STICKY_FOOTER_OPTIONS})&&s[oe.STICKY_FOOTER_OPTIONS].isOnCall);if(r.length)this._freestar.log(1,`${t} there are ${r.length} on call sticky footer placements. There will be no standard sticky footer invoked by Pubfig.js!`);else{this._freestar.log(1,t+" there are no on call sticky footer placements. Attempting to find a default sticky footer placement");let s=this._freestar.fsdata.placements.filter(n=>n.validAdSizes&&it({placement:n,type:oe.STICKY_FOOTER_OPTIONS})&&!n[oe.STICKY_FOOTER_OPTIONS].isOnCall)[0];if(s&&!Ru({placement:s})){this._freestar.log(1,`${t} ${s.name} is not blocked invoking AddStickyFooter.`);let{stickyFooterOutstreamVideoPattern:n}=Uf(s);n==="VIDEO_DISPLAY_CONCURRENT"&&((e=s.stickyFooterOptions)!=null&&e.video)?this._freestar.currentStickyFooter=new es({placement:s,videoInstance:this._videoInstance,refreshLibrary:this._refreshLibrary,adSlotsManager:this._adSlotsManager}):this._freestar.currentStickyFooter=new Zr({placement:s,videoInstance:this._videoInstance,refreshLibrary:this._refreshLibrary,adSlotsManager:this._adSlotsManager}),this._attachStickyFooterResizeListener(),this._freestar.deleteStickyFooter=this._freestar.currentStickyFooter.deleteStickyFooter||this._freestar.currentStickyFooter.footer.deleteStickyFooter}else this._freestar.log(1,t+"no default sticky placement found or it is blocked due to rules found in the footerIsBlocked method. There will be no standard sticky footer invoked by Pubfig.js!")}performance.mark("stickyFooter-initialization-end")}catch(t){this._freestar.log({title:"STICKY FOOTER",styles:"background: red; color: white; border-radius: 3px; padding: 3px"},t.message)}});this._freestar=e,this._eventBus=r,this._adSlotsManager=n,this._videoInstance=t.stickyFooterVideoInstance||{},this._refreshLibrary=s}};A.class(Gf,{token:"StickyFooter",dependencies:[l.FREESTAR,{token:"Video",optional:!0},l.EVENT_BUS,l.REFRESH_LIBRARY,l.AD_SLOTS_MANAGER],defaultAlias:"stickyFooter"})});var Zs,ts,Vf,Xs=f(()=>{Zs="FREESTAR VIDEO v1.0.0",ts={title:Zs,styles:"background: black; color: white; border-radius: 3px; padding: 3px"},Vf="FVP - PBJS IBV"});function sy({bidder:i,cpm:e=null,requestTimestamp:t,videoAd:r,playerType:s=null,hb_partner:n=null}){let o=Date.now(),a={bidder:se(i),cpm:e,playerType:s,placementId:r.name||r.id,requestTimestamp:t,responseTimestamp:o,timeToRespond:o-t,bidCpm:e,hb_partner:n};freestar.log({title:qt},ry+`bid won for bidder ${i} and placement id ${r.name}. VIDEO MSG OBJECT: ${JSON.stringify(a)}`),G.instance.resolve(l.ANALYTICS).then(d=>{d.track(new Ho(a))})}function td({bidder:i,placementId:e,tagUrl:t}){let r={bidder:se(i),placementId:e,tagUrl:t};freestar.log({title:qt},ry+`tag loaded for bidder ${i} and placement id ${e}. VIDEO MSG OBJECT: ${JSON.stringify(r)}`),G.instance.resolve(l.ANALYTICS).then(s=>{s.track(new zo(r))})}var ry,Hf=f(()=>{$i();U();F();qi();We();ry="Video Messaging: "});var id,ny=f(()=>{U();F();_e();Xs();Hf();id=class{load(){return T(this,null,function*(){["https://vjs.zencdn.net/7.20.2/video-js.css","https://cdnjs.cloudflare.com/ajax/libs/videojs-contrib-ads/6.9.0/videojs-contrib-ads.css","https://cdnjs.cloudflare.com/ajax/libs/videojs-ima/1.11.0/videojs.ima.css"].forEach(e=>{document.head.appendChild(B({type:"link",attributes:{rel:"stylesheet",href:e}}))}),yield Hi("https://vjs.zencdn.net/7.20.2/video.min.js"),yield Promise.all([Hi("https://imasdk.googleapis.com/js/sdkloader/ima3.js"),Hi("https://cdnjs.cloudflare.com/ajax/libs/videojs-contrib-ads/6.9.0/videojs-contrib-ads.js"),Hi("https://cdnjs.cloudflare.com/ajax/libs/videojs-ima/1.11.0/videojs.ima.js")]),td({bidder:Zs,placementId:"",tagUrl:""})})}};A.class(id,{token:l.FOP_VIDEO_SCRIPTS,factory:()=>T(void 0,null,function*(){let i=new id;return yield i.load(),i})})});function en(i){let{width:e,height:t}=i.reduce((r,[s=0,n=0]=[])=>(s>r.width&&(r.width=s),n>r.height&&(r.height=n),r),{width:0,height:0});return[e,t]}var zf=f(()=>{});var oy,rd,qf=f(()=>{F();mt();te();U();Xs();zf();oy=["adsready","adRequest","adserror","loadstart","adImpression","adComplete","impression","progress","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","play","pause","ratechange","resize","volumechange"],rd=class{constructor({params:e}){y(this,"handlePlayerEvent",e=>{let{type:t}=e;switch(t){case"impression":this.handleImpressionEvent({event:e});break;case"volumechange":case"volumeChange":this.handleVolumeChangeEvent({event:e});break;case"allAdsCompleted":this.handleAllAdsCompleteEvent({event:e});break;case"adsready":this.handleAdsReadyEvent({event:e});break;case"ended":this.handleEndedEvent({event:e});break;case"adserror":this.handleAdsErrorEvent({event:e});break}});this.uuid=Ae(),this.params=e,this._playerId=`fsPlayer_${this.uuid}`}init(){}updateBottomSpacing(e){this.params.bottomSpacing=e,this.addCSS()}bindEvents(){this.player.on(oy,this.handlePlayerEvent),this.player.on("ads-manager",e=>{let{adsManager:t}=e;Object.keys(window.google.ima.AdEvent.Type).forEach(r=>{t.addEventListener(window.google.ima.AdEvent.Type[r],this.handlePlayerEvent)})})}addPlayer(){this.player=window.videojs(this._playerId,{controls:!1,disablePictureInPicture:!0,enableDocumentPictureInPicture:!1})}addHTML(){}addCSS(){}getLargestPossibleDimensions({placement:e}){let{sizes:t}=e;return t=t.filter(r=>Array.isArray(r)),en(t)}renderAd(){}handleEndedEvent({event:e}){freestar.log(ts,"handleEnded",e)}handleAdsReadyEvent({event:e}){freestar.log(ts,"handleAdsReadyEvent",e)}handleAdsErrorEvent({event:e}){freestar.log(ts,"handleAdsErrorEvent",e)}handleVolumeChangeEvent(){this.player.ima.getAdsManager()&&this.player.ima.getAdsManager().getVolume()!==0&&this.player.ima.getAdsManager().setVolume(0)}handleImpressionEvent({event:e}){freestar.log(ts,"handleImpressionEvent",e)}handleAllAdsCompleteEvent({event:e}){freestar.log(ts,"handleAllAdsCompleteEvent",e)}remove(){var s,n,o,a,d,c,u,p;(s=this.player)==null||s.off(oy,this.handlePlayerEvent);let e=(o=(n=this.player)==null?void 0:n.ima)==null?void 0:o.getAdsManager();e&&(Object.keys(window.google.ima.AdEvent.Type).forEach(m=>{e.removeEventListener(window.google.ima.AdEvent.Type[m],this.handlePlayerEvent)}),e.destroy());let{controller:t}=((a=this.player)==null?void 0:a.ima)||{},r=(d=t==null?void 0:t.sdkImpl)==null?void 0:d.adsLoader;r&&((c=r.contentComplete)==null||c.call(r),(u=r.destroy)==null||u.call(r)),t.sdkImpl.adDisplayContainer.destroy(),(p=this.player)==null||p.dispose(),this.player=null,this.renderer=null,this.callback=null,this.request&&(this.request.cb=null,this.request._prebid=null,this.request._apstag=null,this.request=null)}sendEvent({name:e=Zs,type:t,value:r}){G.instance.resolve(l.ANALYTICS).then(s=>{s.track(new X({eventName:e,eventType:t,data:b({name:this.placement.name,uuid:this.uuid},r)}))})}}});var sd,Yf=f(()=>{he();sd=class{constructor({player:e,adTagUrl:t="DEFAULT",uuid:r,placement:s}){this.player=e,this.adTagUrl=t,this.placement=s,this.uuid=r}renderAd(){typeof this.player.ima=="function"?(this.player.ima({adTagUrl:this.adTagUrl}),this.player.loadMedia({id:"XVXVXVXV",src:`${vi}/videos/blank1s-20231016.mp4`,type:"video/mp4"})):(this.player.ima.changeAdTag(this.adTagUrl),this.player.ima.requestAds())}}});var nd,ay=f(()=>{Yf();nd=class extends sd{constructor({player:e,adTagUrl:t,uuid:r,placement:s}){super({player:e,adTagUrl:t,uuid:r,placement:s}),this.init(),this.adTagUrl=t}init(){this.renderAd()}}});var $f=f(()=>{ay();Yf()});var jf,dy=f(()=>{Ge();U();F();_e();Xs();$f();qf();zf();jf=class extends rd{constructor({params:e}){super({params:e}),this.init()}init(){let{bid:e}=this.params,{adUnitCode:t,vastUrl:r,adId:s}=e;this.adId=s,this.adUnit=ne.getAdUnitByPrebidCode(t);let{placement:n}=this.adUnit;this.placement=n,this.addCSS(),this.addHTML({targetElm:document.getElementById(t)}),this.addPlayer(),this.bindEvents(),this.renderAd({vastUrl:r,adId:s})}addHTML({targetElm:e=document.body}){e.id&&ir(e.id),this.videoPlayer=B({type:"div",id:`fs-player-container_${this.uuid}`}),this.videoPlayer.innerHTML=`<div class='fs-player-container-shim'><video id='fsPlayer_${this.uuid}' muted playsinline disablePictureInPicture class='video-js vjs-16-9 vjs-default-skin'></video></div>`,e.appendChild(this.videoPlayer)}addCSS(){let e=B({type:"style",id:`fs-player_${this.uuid}`}),t=this.getLargestPossibleDimensions({placement:this.adUnit.placement}),r=this.getPlayer16x9Dimensions({width:t[0]*.95,height:t[1]*.95});e.textContent=` #fs-player-container_${this.uuid} { width: ${t[0]}px; height: ${t[1]}px; display: flex; align-items: center; justify-content: center; background-color: #d3d3d3; } #fs-player-container_${this.uuid}>.fs-player-container-shim { width: ${r.width}px; height: ${r.height}px; border-radius: 10px; border: 0px; overflow: hidden; } `,document.head.appendChild(e)}getPlayer16x9Dimensions({width:e,height:t}){let r=Math.min(e,Math.round(1.7777777777777777*t)),s=Math.round(9/16*r);return{width:r,height:s}}getLargestPossibleDimensions({placement:e}){let{sizes:t}=e;return t=t.filter(r=>Array.isArray(r)),en(t)}renderAd({vastUrl:e,adId:t}){let{prebid:r}=this.adUnit;freestar.refreshLibrary[r.code]&&(freestar.refreshLibrary[r.code].disableRefresh=!0),this.renderer=new nd({player:this.player,adTagUrl:e}),fsprebid.markWinningBidAsUsed({adId:t})}handleAdsReadyEvent(){let e={type:"videoBidAttemptedToPlay",value:{player:Vf,placementId:this.placement.name,adId:this.adId}};this.sendEvent(e),this.player.play()}handleAdsErrorEvent(){this.remove()}handleImpressionEvent({event:e}){let{adSystem:t,creativeAdId:r,creativeId:s,duration:n,universalAdIds:o,vastMediaHeight:a,vastMediaWidth:d}=e.ad.data,c={type:"videoBidImpression",value:{player:Vf,placementId:this.placement.name,adSystem:t,creativeAdId:r,creativeId:s,duration:n,universalAdIds:o,vastMediaHeight:a,vastMediaWidth:d,adId:this.adId}};this.sendEvent(c)}handleAllAdsCompleteEvent(){this.remove()}remove(){var r,s;let{prebid:e,slot:t}=this.adUnit;e&&freestar.refreshLibrary[e.code]&&(freestar.refreshLibrary[e.code].disableRefresh=!1),freestar.refresh([t.getSlotElementId()]),(s=(r=this.videoPlayer)==null?void 0:r.parentNode)==null||s.removeChild(this.videoPlayer),this.videoPlayer=null,super.remove()}};A.class(jf,{token:l.IN_BANNER_VIDEO_PLAYER,dependencies:[l.FOP_VIDEO_SCRIPTS]})});var ly=f(()=>{qf();dy();$f()});var cy=f(()=>{ly()});var fy=f(()=>{ny();Xs();cy()});var Kf,uy=f(()=>{Nt();Ol();U();F();Kf=class{constructor({dispensaryData:e,gamManager:t,win:r=window,adSlotsManager:s}){y(this,"_instances",new Map);y(this,"init",()=>{if(Pe({name:"flyingCarpet"}))return;let{placements:e=[]}=this._dispensaryData.fsdata||{};e.forEach(t=>{let r=this._win.document.getElementById(t.name);if(this._isFlyingCarpetPlacement(t)&&r){let s=this._getFCConfig(t);this._createInstance({placementName:t.name,element:r,config:s})}})});y(this,"_getFCConfig",e=>{var t,r;return(r=(t=e.selectedSize)==null?void 0:t.flyingCarpetOptions)!=null?r:{}});y(this,"_getIAIConfig",e=>{var t,r;return(r=(t=e.selectedSize)==null?void 0:t.intelligentAdInsertConfig)!=null?r:{}});this._dispensaryData=e,this._gamManager=t,this._adSlotsManager=s,this._win=r}create(e){if(Pe({name:"flyingCarpet"})){console.warn("Flying Carpet is disabled.");return}let{placements:t=[]}=this._dispensaryData.fsdata||{},r=t.find(n=>n.name===e&&this._isFlyingCarpetPlacement(n)),s=this._win.document.getElementById(e);!r||!s||this._createInstance({placementName:e,element:s,config:this._getFCConfig(r)})}destroy(e){let t=this._instances.get(e);t&&(t.element.innerHTML="",this._gamManager.destroySlot({elementId:t.slotId}),this._win.fsprebid.removeAdUnit([t.slotId]),this._instances.delete(e))}_createInstance({placementName:e,element:t,config:r}){if(this._instances.has(e))return console.warn(`Flying Carpet: ${e} is already running.`),null;let s=`${e}_fc`,{branding:n,height:o,background:a}=r,d=new vr({branding:n||"NONE",background:a||"linear-gradient(to bottom, #00c389 10%, black 100%)",height:o||"175vh",slotId:s});t.appendChild(d.generateHTML()),this._instances.set(e,{element:t,slotId:s}),this._registerSlot({placementName:e,slotId:s})}_registerSlot({placementName:e,slotId:t,skipSAU:r=!0}){let s={placementName:e,slotId:t,skipSAU:r};this._adSlotsManager.newAdSlots([s])}_isFlyingCarpetPlacement(e){let{active:t}=this._getFCConfig(e)||{},{active:r}=this._getIAIConfig(e)||{};return!!t&&!r}};A.class(Kf,{token:"FlyingCarpetManager",dependencies:[{token:l.WINDOW,alias:"win"},l.AD_SLOTS_MANAGER,l.DISPENSARY_DATA,l.GAM_MANAGER]})});var Qi,Z5,Wf,py,Qf=f(()=>{Qi="wakelock",Z5=`fs.${Qi}`,Wf="WAKELOCK V1.3.1",py={title:Wf,styles:"background: black; color: white; border-radius: 3px; padding: 3px"}});var Jf,hy,my,gy,_y=f(()=>{Qf();Re();Qe();Jf={percentage:1,testPercentage:.02,blockedSiteIDs:[1575,1910,1748,1841,6326,2410,1783,1675,1676,1677,1678,1679,1680,1681,1682,1683,1684,1685,1686,1687,1688,1689,1690,1691,1692,1693,1694,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1985,2095,2132,2170,2232,2244,2511,5491,1756,2372,1556,2086,2087,2192,2193,2194,2195,2196,2197,2198,2199,2200,2201,2202,2203,2204,2205,2206,2207,2208,2209,2210,2211,2212,2213,2214,2215,2216,2217,2218,2219,2351,2352,2353,2354,2355,2356,2357,2358,2359,2360,2361,2362,2363,2364,2365,2366,2367,2394,2395,2396,2397,2398,2399,2400,2401,2402,2403,2404,2405,2426,3516,5344,3107,3108,3109,3110,3111,3234,6152,6603,1556,1495,5438,6507,6508,6497,6496,6498,6503,6500,6501,6499,6505,6502,6506,5836,5837,6592,5466,1560,3695,6249,108,112,7225,2125,7264,1794,38,7211,5632,3185,5693,2604,523,5839,6073,7250,2175,5941,3498,305,6615,5421,7270,5932,5935,7249,624,1725,5943,5931,3095,3037,856,241,285,2513,839,2147,7204,729,5894,1764,5472,2495,6589,6253,6949,2495,6256,2605,2301,507,6589,6153,2495,6949,6061,6256,2605,2301,6048,1823,1819,7234,6515,3184,1709,6516,1808,714,1781,608,6941,6509,1770,1758,6228,1994,5940,3163,5937,6358,1801,6324,7327]},hy=()=>{let i=JSON.parse(Q({key:`fs.${Qi}`}))||{};return!Jf.blockedSiteIDs.includes(freestar.fsdata.siteId)&&typeof i.inTest=="undefined"&&(Math.random()<Jf.percentage?Math.random()<Jf.testPercentage?(i.inTest=!0,i.control=Math.random()<=.5):(i.inTest=!1,i.hasFeature=!0):(i.inTest=!1,i.hasFeature=!1),ve({key:`fs.${Qi}`,value:i,type:K.object})),i.inTest&&freestar.log(py,`Session is participating in test as ${i.control?"CONTROL":"TEST"}...`),z(`fs-use-${Qi}`)||i.inTest||i.hasFeature},my=()=>{let i=JSON.parse(Q({key:`fs.${Qi}`}))||{};return(i==null?void 0:i.inTest)&&(i==null?void 0:i.control)},gy=()=>{let i=JSON.parse(Q({key:`fs.${Qi}`}))||{};return(i==null?void 0:i.inTest)===!0}});var Ey,yy=f(()=>{Ey=({freestar:i})=>{var e,t;return((t=(e=i==null?void 0:i.deviceInfo)==null?void 0:e.device)==null?void 0:t.type)!=="desktop"}});var Zf,Sy=f(()=>{tr();F();zt();Ge();_y();Qf();yy();Gi();Zf=class{constructor({freestar:e,window:t,eventBus:r,analytics:s}){y(this,"init",()=>{!Ey({freestar:this._freestar})||!navigator.wakeLock||!this._win.requestAnimationFrame||hy()&&(gy()&&(this.control=my(),this._sendEvent({type:this.control?"CONTROL_SESSION":"TEST_SESSION",value:{}}),this.control)||(this._bindEvents(),this._startPolling()))});this._freestar=e,this._win=t,this._eventBus=r,this._analytics=s,this._adsInView=new Set,this._wakeLock=null,this._lastPollTime=0,this._pollInterval=500}_bindEvents(){this._eventBus.subscribe(yr,this._handleAdIntersection.bind(this))}_handleAdIntersection(e){let{id:t,isIntersecting:r}=e.payload,s=ne.getAdUnitBySlotElementId(t);s&&(r?this._adsInView.add(s.placement.name):this._adsInView.delete(s.placement.name))}_requestWakeLock(){return T(this,null,function*(){if(navigator.wakeLock)try{yield this._releaseWakeLock(),this._adsInView.size>0&&(this._wakeLock=yield navigator.wakeLock.request("screen"),this._wakeLock.addEventListener("release",()=>{this._wakeLock=null}))}catch(e){console.error(`Failed to get Wake Lock: ${e.message}`)}})}_releaseWakeLock(){return T(this,null,function*(){this._wakeLock&&(yield this._wakeLock.release(),this._wakeLock=null)})}_startPolling(){let e=Date.now();e-this._lastPollTime>=this._pollInterval&&(this._lastPollTime=e,this._adsInView.size>0&&!this._wakeLock?this._requestWakeLock():this._adsInView.size===0&&this._wakeLock&&this._releaseWakeLock()),this._win.requestAnimationFrame(this._startPolling.bind(this))}_sendEvent({name:e=Wf,type:t,value:r}){this._analytics.track(new X({eventName:e,eventType:t,data:b({},r)}))}};A.class(Zf,{token:"WakeLock",dependencies:[l.FREESTAR,l.WINDOW,l.EVENT_BUS,l.ANALYTICS],defaultAlias:"wakelock"})});var ad,od,Iy=f(()=>{tt();Ie();ad=class ad extends W{constructor(){super(...arguments);y(this,"type","viewabilityMeasured")}_buildPayload(t){return ye(t,ad.payloadProperties)}};y(ad,"payloadProperties",["sessionId","pageviewId","accountId","siteId","placementId","dfpId","minRatio","testName","testGroup","fsAuctionId"]);od=ad});var ld,dd,Ay=f(()=>{tt();Ie();ld=class ld extends W{constructor(){super(...arguments);y(this,"type","viewabilityMet")}_buildPayload(t){return ye(t,ld.payloadProperties)}};y(ld,"payloadProperties",["sessionId","pageviewId","accountId","siteId","placementId","dfpId","minRatio","timeInView","testName","testGroup","fsAuctionId"]);dd=ld});var Xf,by=f(()=>{tr();F();zt();Iy();Ay();Ge();Xf=class{constructor({freestar:e,window:t,analytics:r,eventBus:s,gamManager:n}){y(this,"init",()=>{let e=Math.random()<.5;this._isInitialized||!e||(this._bindEvents(),this._startPolling(),this._gamManager.instance.setConfig({targeting:{fs_viewability:"active"}}),this._isInitialized=!0)});y(this,"_handleAuctionStart",({payload:e})=>{var o,a;let t=(e==null?void 0:e.elementId)||(e==null?void 0:e.slotId);if(!t)return;let r=ne.getAdUnitBySlotElementId(t)||ne.getAdUnitByPrebidCode(t),s=((a=(o=r==null?void 0:r.slot)==null?void 0:o.getSlotElementId)==null?void 0:a.call(o))||t;this._auctionReadySlots.add(s);let n=this._pendingIntersections.get(s);n&&(this._pendingIntersections.delete(s),this._processIntersection(n))});y(this,"_handleIntersection",e=>{let{id:t,isIntersecting:r,intersectionRatio:s=0}=(e==null?void 0:e.payload)||{};if(t){if(!this._auctionReadySlots.has(t)){this._pendingIntersections.set(t,{id:t,isIntersecting:r,intersectionRatio:s});return}this._pendingIntersections.delete(t),this._processIntersection({id:t,isIntersecting:r,intersectionRatio:s})}});this._freestar=e,this._win=t,this._analytics=r,this._eventBus=s,this._isInitialized=!1,this._gamManager=n,this._viewabilityMap=new Map,this._auctionReadySlots=new Set,this._pendingIntersections=new Map,this._thresholdMs=1e3,this._pollInterval=100,this._lastPollTime=0,this._minRatio=.5}_bindEvents(){this._eventBus.subscribe(Ao,this._handleAuctionStart),this._eventBus.subscribe(yr,this._handleIntersection),this._eventBus.subscribe(Io,({payload:{elementId:e}})=>{e&&this._resetForRefresh(e)}),this._eventBus.subscribe(gr,({payload:{elementId:e}})=>{e&&(this._viewabilityMap.delete(e),this._auctionReadySlots.delete(e),this._pendingIntersections.delete(e))}),this._eventBus.subscribe(Er,()=>{this._viewabilityMap.clear(),this._auctionReadySlots.clear(),this._pendingIntersections.clear()})}_processIntersection({id:e,isIntersecting:t,intersectionRatio:r=0}){let s=this._viewabilityMap.get(e)||{isMeetingRatio:!1,visibleSince:null,hasMetThreshold:!1,accumulatedMs:0,lastRatio:0},n=Date.now(),o=!!t&&r>=this._minRatio;o&&!s.isMeetingRatio?(s.visibleSince=n,s.hasMetThreshold||this._onViewabilityStart({id:e})):!o&&s.isMeetingRatio&&(s.visibleSince&&(s.accumulatedMs+=n-s.visibleSince),s.visibleSince=null),s.isMeetingRatio=o,s.lastRatio=r,this._viewabilityMap.set(e,s)}_startPolling(){let e=Date.now();e-this._lastPollTime>=this._pollInterval&&(this._lastPollTime=e,this._viewabilityMap.forEach((t,r)=>{if(!t.isMeetingRatio||t.hasMetThreshold||!t.visibleSince)return;let s=e-t.visibleSince;s>=this._thresholdMs&&(t.hasMetThreshold=!0,this._onViewabilityMet({id:r,timeInView:s}))})),this._win.requestAnimationFrame(this._startPolling.bind(this))}_resetForRefresh(e){let t=Date.now(),r=this._viewabilityMap.get(e)||{isMeetingRatio:!1,visibleSince:null,hasMetThreshold:!1,accumulatedMs:0,lastRatio:0};r.accumulatedMs=0,r.hasMetThreshold=!1,r.isMeetingRatio&&r.lastRatio>=this._minRatio?(r.visibleSince=t,this._onViewabilityStart({id:e})):r.visibleSince=null,this._viewabilityMap.set(e,r)}_onViewabilityStart({id:e}){var n,o,a,d;let t=ne.getAdUnitBySlotElementId(e);if(!t)return;let r=((n=t==null?void 0:t.placement)==null?void 0:n.name)||null,{fsAuctionId:s=null}=((a=t==null?void 0:t.states)==null?void 0:a[((o=t==null?void 0:t.states)==null?void 0:o.length)-1])||{};this._analytics.track(new od({minRatio:this._minRatio,placementId:r,dfpId:((d=t==null?void 0:t.slot)==null?void 0:d.getAdUnitPath())||null,fsAuctionId:s}))}_onViewabilityMet({id:e,timeInView:t}){var o,a,d,c;let r=ne.getAdUnitBySlotElementId(e);if(!r)return;let s=((o=r==null?void 0:r.placement)==null?void 0:o.name)||null,{fsAuctionId:n=null}=((d=r==null?void 0:r.states)==null?void 0:d[((a=r==null?void 0:r.states)==null?void 0:a.length)-1])||{};this._analytics.track(new dd({minRatio:this._minRatio,timeInView:t,placementId:s,dfpId:((c=r==null?void 0:r.slot)==null?void 0:c.getAdUnitPath())||null,fsAuctionId:n}))}};A.class(Xf,{token:"ViewableImpressions",dependencies:[l.FREESTAR,l.WINDOW,l.EVENT_BUS,l.ANALYTICS,l.GAM_MANAGER],defaultAlias:"viewableImpressions"})});function Sb(i){return{bidder:se(i.bidder),creativeId:i.creativeId,cpm:i.cpm,mediaType:i.mediaType,evaluated:!1,ad:i.ad,time:Date.now()}}function Ib(i){let{adUnitCode:e}=i;e&&(freestar.bidsWon[e]=Sb(i))}function wy(){fsprebid.que.push(function(){fsprebid.onEvent(cr,i=>Ib(i))})}var Ty=f(()=>{Bt();We()});function vy({bidder:i,cpm:e,siteAdjustment:t,networkAdjustment:r}){(t||r&&freestar.adjustments.isLogged)&&(freestar.log(tn,"bidder : ",i),freestar.log(tn,"cpm : ",JSON.stringify(e)),t&&freestar.log(tn,"siteAdjustment : ",t),r&&freestar.log(tn,"networkAdjustment : ",r))}function Ry({cpm:i,siteAdjustment:e,networkAdjustment:t,bid:r}){(i&&e||t)&&(freestar.adjustments.isLogged&&freestar.log(tn,"final cpm value : ",i),r.rawCpm=r.cpm,r.adjustedCpm=i,freestar.adjustments.bids.push(kt(r)))}function Oy(){freestar.adjustments.isLogged&&fsprebid.onEvent(Ui,function(i){let e=freestar.adjustments.bids.find(t=>t.requestId===i.requestId);e&&(freestar.log("Bid Adjustment Log: bid response after adjustment",i),freestar.log("Bid Adjustment Log: original bid",e))})}var tn,Cy=f(()=>{ls();Bt();tn="Bid Adjustment Log : "});var cd,Py=f(()=>{cd=class{constructor(){this.ext={fs_company:window.freestar.fsdata&&window.freestar.fsdata.companyId||"unknown"}}}});var eu,tu,iu,fd,xy=f(()=>{ti();te();Py();jn();eu=class{constructor(){this.data=[{name:or(),ext:{taxonomyname:"iab_content_taxonomy"},segment:zE()}]}},tu=class{constructor(){this.fs_optimized=this.getIsOptimized(window.freestar),this.fs_site=window.freestar.fsdata&&window.freestar.fsdata.siteId||"unknown"}getIsOptimized({config:e={}}){return e&&e.pageSpeedOptimized?e.pageSpeedOptimized:!1}},iu=class{constructor(){this.data=new tu}},fd=class{constructor(e=""){this.name=window.freestar.fsdata.path||"",this.domain=window.freestar.fsdata.domain||"",this.cat=window.freestar.fsdata.categories||[],this.sectioncat=window.freestar.fsdata.categories||[],this.pagecat=window.freestar.fsdata.categories||[],this.page=window.location.href||"",this.mobile=e===st?1:0,this.ref=document.referrer||"",this.content=new eu,this.ext=new iu,this.publisher=new cd}}});var ud,Dy=f(()=>{he();ud=class{constructor(){this.id=window.freestar.msg.fpc||""}isValid(){return this.id&&this.id.length&&this.id!==hn}}});var pd,Ny=f(()=>{pd=class{clean(){for(let e in this)typeof this[e]=="string"&&this[e].length===0&&delete this[e]}}});var is,ru=f(()=>{Ny();is=class extends pd{constructor(){super(),this.region=this.getRegion(),this.city=this.getCity(),this.country=this.getCountry(),this.ext={},this.clean()}getLocObj(){return window.freestar.locData?window.freestar.locData:!1}getRegion(){return this.region!==void 0?this.region:this.getLocObj().state||""}getCity(){return this.city!==void 0?this.city:this.getLocObj().city||""}validateCountryISO(e){return e.length===2?e:!1}getCountry(){return this.country!==void 0&&this.validateCountryISO(this.country)?this.country:this.getLocObj().iso&&this.validateCountryISO(this.getLocObj().iso)?this.getLocObj().iso:""}}});var su,hd,My=f(()=>{he();ru();su=class{constructor(){this.types={unknown:0,mobile:1,desktop:2,ctv:3,phone:4,tablet:5,connectedDevice:6,"set-top-box":7}}getType(){if(window.freestar.deviceInfo&&window.freestar.deviceInfo.device){if(window.freestar.fsdata.siteId===6324||window.freestar.fsdata.siteId===7327)return this.types.ctv;let{type:e="unknown"}=window.freestar.deviceInfo.device;if(e&&this.types[e])return this.types[e]}return this.types.unknown}},hd=class{constructor(){this.ua=this.fetchFromDeviceInfo("ua"),this.geo=new is({}),this.dnt=this.getUserDNTStatus(),this.devicetype=new su().getType(),this.make=this.getMobileDeviceInfo("vendor"),this.model=this.getMobileDeviceInfo("model"),this.os=this.getOSInfo("name"),this.osv=this.getOSInfo("version")}getUserDNTStatus(){return window.freestar.msg.fpc===hn?1:0}getOSInfo(e){return this.fetchFromDeviceInfo("os")[e]||""}fetchFromDeviceInfo(e){return window.freestar&&window.freestar.deviceInfo&&window.freestar.deviceInfo[e]?window.freestar.deviceInfo[e]:""}getMobileDeviceInfo(e){return this.fetchFromDeviceInfo("device")[e]||""}}});var nu,md,ky=f(()=>{nu=class{constructor(){window.freestar.fsdata.topLevelStoredRequestId&&(this.storedrequest={id:window.freestar.fsdata.topLevelStoredRequestId})}},md=class{constructor(){this.prebid=new nu}}});var Ly,gd,By=f(()=>{xy();Dy();My();ru();ky();Ly=Xi(tf()),gd=class{constructor(e=""){let t=window.freestar.config.ortb2||{};this.site=this.merge(t.site,new fd(e)),this.user=this.merge(t.user,new ud),this.device=this.merge(t.device,new hd),this.geo=this.merge(t.geo,new is),this.ext=this.merge(t.ext,new md);let{enableClientBlocking:r,enableClientCategoryBlocking:s,badv:n,bcat:o}=window.freestar.fsdata.ortb||{};r&&(this.badv=n),s&&(this.bcat=o)}merge(e={},t){return(0,Ly.default)(t,e)}}});var Fy,Uy=f(()=>{Fy={maxTopicCaller:3,bidders:[{bidder:"pubmatic",iframeURL:"https://ads.pubmatic.com/AdServer/js/topics/topics_frame.html",expiry:7},{bidder:"openx",iframeURL:"https://pa.openx.net/topics_frame.html",expiry:7}]}});function Gy(i){var e,t;if(i!=null&&i.adUnitCode){let r=null,s=!1;try{r=(t=(e=freestar.refreshLibrary)==null?void 0:e[i.adUnitCode])==null?void 0:t.dataRefreshId}catch(n){freestar.log(1,`Error: ${n}`)}if(r){let n=0,o=RegExp(r,"g");return freestar.refreshSlots.forEach((a,d)=>{o.test(a.refreshId)&&(n=d,s=!0)}),freestar.refreshSlots.splice(n,1),s}return s}else return!1}function Ab({bidder:i,cpm:e,siteAdjustment:t,networkAdjustment:r,placement:s,bid:n}){vy({bidder:i,cpm:e,siteAdjustment:t,networkAdjustment:r,placement:s,bid:n});let o=e,a=z("manipulate-cpm"),d=z("manipulate-bidder");if(a&&d&&i===d||a)return a;function c({adj:p,value:m}){let h=(100-p)/100,_=Number(m*h).toFixed(8);return parseFloat(_)}function u({bidder:p,placement:m}){let h=m.networks.filter(function(_){if(p===_.slug&&_.placementLevelBidAdjustment&&_.placementLevelBidAdjustment>0)return _})[0];return h?h.placementLevelBidAdjustment:0}if(r&&r>0&&(o=c({adj:r,value:o})),t&&t>0&&(o=c({adj:t,value:o})),i&&s&&s.networks&&s.networks.length){let p=u({bidder:i,placement:s});p&&p>0&&(o=c({adj:p,value:o}))}return Ry({cpm:o,siteAdjustment:t,networkAdjustment:r,bid:n}),o}function bb({network:i}){let{id:e}=i,t=i.networkBidAdjustment||0;if(freestar.networkMap&&e){let r=freestar.networkMap[e];t=r&&r.bidAdjustment&&Number(r.bidAdjustment)&&r.bidAdjustment>0?r.bidAdjustment:i.networkBidAdjustment||0}return t}function Vy(i){yt[i.slug]||(yt[i.slug]={bidCpmAdjustment:function(e,t){let r=re({name:ge({slotId:t.adUnitCode})}),s=Ab({bidder:i.slug,cpm:e,siteAdjustment:i.bidAdjustment,networkAdjustment:bb({network:i}),placement:r,bid:t});return s||e}})}function Tb({enableSendAllBids:i,useTargetingKeys:e}){let t={};return e&&(t.allowTargetingKeys=["key1"]),i||(t.alwaysIncludeDeals=!0),t}var ft,rn,ou,yt,wb,Ct,Hy=f(()=>{Ty();Dr();he();Ka();Qe();te();De();Cy();Nr();Hn();By();le();Wa();xa();We();Uy();Bt();U();F();Tn();mt();ft={},rn=[],ou=null;ft.initiate=()=>{var i=window.fsprebid||{};return i.que=i.que||[],i.retries=0,i};yt={};ft.setNetworks=()=>{ou=new ri,wy(),freestar.fsdata.networks.forEach(e=>{nc(e),Vy(e)}),freestar.fsdata.placements.filter(e=>e.networks.length).forEach(function(e){e.networks.forEach(t=>{nc(t),Vy(t)})})};ft.getBidderSettings=()=>{let i=Qr({freestar});yt.standard={alwaysUseBid:!1,adserverTargeting:[{key:i.bidder,val:function(e){return se(e.bidderCode)}},{key:i.adid,val:function(e){return e.adId}},{key:i.pb,val:function(e){return freestar.fsdata.priceGranularity==="medium"?e.pbMg:freestar.fsdata.priceGranularity==="high"?e.pbHg:freestar.fsdata.priceGranularity==="auto"?e.pbAg:freestar.fsdata.priceGranularity==="dense"?e.pbDg:e.adUnitCode&&e.cpm&&e.cpm>2&&freestar.gamMap[e.adUnitCode]&&freestar.gamMap[e.adUnitCode]===!0?pE({cpm:e.cpm}):e.pbCg}},{key:i.size,val:function(e){return e.size}},{key:i.format,val:function(e){return e.mediaType}},{key:"custom_bidder_size",val:function(e){return[se(e.bidder),e.size].join("_")}},{key:"freestar_domain",val:function(){return freestar.fsdata.domain||location.domain}},{key:"freestar_path",val:function(){return location.pathname}},{key:i.auction_id,val:function(e){return`${e.auctionId}`}},{key:i.source,val:function(e){return e.source}}]},(freestar.fsDfpId||freestar.fsDevDfpId||freestar.fsdata.useFsAdserverTargetingKeys)&&yt.standard.adserverTargeting.push({key:"fspbg",val:"fs_universal"}),yt.concert&&(yt.concert.storageAllowed=!0),yt.criteo&&(yt.criteo.storageAllowed=!0),yt.taboola&&(yt.taboola.storageAllowed=!0)};ft.setBidderSettings=()=>{fsprebid.bidderSettings=yt};wb=()=>{if(window.freestar.fsdata.priceGranularity)if(window.freestar.fsdata.priceGranularity.length>6)try{return JSON.parse(freestar.fsdata.priceGranularity)}catch(e){window.freestar.log(10,`Error parsing priceGranularity ${e}`)}else return window.freestar.fsdata.priceGranularity;return{buckets:window.freestar.fsDfpId||window.freestar.fsDevDfpId||window.freestar.fsdata.useFsAdserverTargetingKeys?Rd.v2:Rd.v1}};ft.setEventListeners=()=>{Oy(),fsprebid.onEvent(Qn,function(e){freestar.performanceLogger.logMark({markerName:be.pubfigPrebidAuctionInit}),e.adUnitCodes.forEach(t=>{freestar.bidsWon[t]&&delete freestar.bidsWon[t]})}),fsprebid.onEvent(Ui,function(e){var r;let t=freestar.adjustments.bids.find(s=>s.requestId===e.requestId);e.rawCpm=(r=t==null?void 0:t.cpm)!=null?r:e.cpm});let i=[l.ANALYTICS,l.BID_WON_ANALYTICS_EVENT_FACTORY];if(freestar.allowBidResponseCollection&&i.push(l.BID_RESPONSE_ANALYTICS_EVENT_FACTORY),Promise.all(i.map(e=>G.instance.resolve(e))).then(([e,t,r])=>{fsprebid.onEvent(Ui,s=>{s.adUnitCode&&kd({bidder:se(s.bidderCode),adUnitCode:s.adUnitCode}),Gy(s),r&&e.track(r.create(s))}),fsprebid.onEvent(cr,s=>{s.adUnitCode&&kd({bidder:se(s.bidderCode),adUnitCode:s.adUnitCode});let n=Gy(s);s.bidderRefresh=n,e.track(t.create(s))})}),G.instance.resolve(l.ANALYTICS).then(e=>{var t;fsprebid.onEvent(Op,r=>{setTimeout(()=>{r.forEach(s=>{e.track(new Fo(V(b({},s),{src:s.src==="client"?s.src:freestar.thirdPartyVendorTest?"3rd party":s.source})))})},50)}),(t=window.freestar.fsdata.ortb)!=null&&t.enableClientBlockingLogs&&window.fsprebid.onEvent(Cp,r=>{e.track(new X({eventName:r.rejectionReason?r.rejectionReason.toUpperCase().replace(/ /g,"_"):"UNKNOWN",eventType:"BID_REJECTED",data:r}))})}),freestar.allowBidRequestedCollection){let e=[l.ANALYTICS,l.BID_REQUESTED_ANALYTICS_EVENT_FACTORY];Promise.all(e.map(t=>G.instance.resolve(t))).then(([t,r])=>{fsprebid.onEvent(Rp,s=>{t.track(r.create(s))})})}};ft.setSChain=()=>{let{companyId:i="",schain:e}=window.freestar.fsdata,t=Pa(i,e==null?void 0:e.type,e==null?void 0:e.bidderOverrides,e==null?void 0:e.defaultNode);t&&window.fsprebid.setBidderConfig({bidders:gg(ou),config:{schain:{validation:"strict",config:t}}},!0)};ft.settingConfig=(i,e,t)=>{var p,m,h,_,I,S,g,E;let r=wb(),s=freestar.fsdata.useFsAdserverTargetingKeys||z("use-fs-adserver-targeting-keys"),n=window.freestar.deviceInfo&&window.freestar.deviceInfo.device.type||"",o=!!((m=(p=window.freestar)==null?void 0:p.fsdata)!=null&&m.enableSendAllBidsToAdServer),a={performanceMetrics:!1,targetingControls:Tb({enableSendAllBids:o,useTargetingKeys:s}),ortb2:new gd(n),rubicon:{singleRequest:!0},bidderTimeout:window.freestar.fsdata.timeout||1500,userSync:{aliasSyncEnabled:!0,auctionDelay:100,enableOverride:!1,filterSettings:{all:{bidders:"*",filter:"include"}},userIds:[],syncDelay:100,syncEnabled:!0,syncsPerBidder:8,topics:Fy},enableTIDs:!0,consitentTIDs:!0,enableSendAllBids:o,priceGranularity:r,bidderSequence:"random",pageUrl:`${window.location.protocol}//${window.location.host}`,useBidCache:!0,minBidCacheTTL:60,eventHistoryTTL:60,gptPreAuction:{enabled:!0,customPbAdSlot:function(L,k=`/${wt}`){let{appendDivIdToGpid:$=!0}=freestar.fsdata,H=k;return $&&(H+="/"+L),freestar.log({title:"GPID"},"Payload is:",H),H},mcmEnabled:!0},firstPartyData:{skipEnrichments:!0},cache:{url:"https://prebid.adnxs.com/pbc/v1/cache",ignoreBidderCacheKey:!0}};a.userSync.userIds=t.prebidNonRealTimeProvidersConfig,e.getBypassFirstAuction()||(e.getS2sBidders(ou).forEach(k=>{rn.includes(k)||rn.push(k)}),rn.length&&(window.freestar.log(49,"Setting s2sconfig..."),a.s2sConfig={accountId:"d0cd3243-716f-4f9c-b074-f72637de26f3",enabled:!0,bidders:rn,timeout:window.freestar.fsdata.timeout,adapter:"prebidServer",endpoint:"https://s2s.t13.io/openrtb2/auction",syncEndpoint:"https://s2s.t13.io/cookie_sync",cookieSet:!1,cookiesetUrl:"",allowUnknownBidderCodes:!0},freestar.thirdPartyVendorTest&&(delete a.s2sConfig.timeout,a.s2sConfig.maxTimeout=2400,a.s2sConfig.endpoint="https://pbs-freestar-us.ay.delivery/openrtb2/auction",a.s2sConfig.syncEndpoint="https://pbs-freestar-us.ay.delivery/cookie_sync",a.s2sConfig.accountId="org_dP6gnwNxcbgfC653x"))),t.realtimeProviders.prebidAnalyticProviders.forEach(L=>{i.enableAnalytics(L)}),Jr(window.freestar.locData)&&(a.consentManagement=a.consentManagement||{},a.consentManagement.gdpr={cmpApi:"iab",timeout:1200,allowAuctionWithoutConsent:!1},(_=(h=window.freestar)==null?void 0:h.consentLibrary)!=null&&_.gpp&&(a.consentManagement=a.consentManagement||{},a.consentManagement.gpp={cmpApi:"iab",timeout:1200})),Dt(window.freestar.locData)&&((S=(I=window.freestar)==null?void 0:I.consentLibrary)!=null&&S.gpp?(a.consentManagement=a.consentManagement||{},a.consentManagement.gpp={cmpApi:"iab",timeout:1200}):(E=(g=window.freestar)==null?void 0:g.consentLibrary)!=null&&E.usp&&(a.consentManagement=a.consentManagement||{},a.consentManagement.usp={cmpApi:"iab",timeout:1200}));let{enableClientBlocking:d,enableClientCategoryBlocking:c,enableClientBlockingUnknown:u}=window.freestar.fsdata.ortb||{};(d||c)&&(a.bidResponseFilter={cat:{enforce:c,blockUnknown:!!u},adv:{enforce:d,blockUnknown:!!u},attr:{enforce:!1,blockUnknown:!1},mediaTypes:{enforce:!1,blockUnknown:!1}}),i.setConfig(a)};ft.analytics=i=>{i.enableAnalytics([{provider:"freestar",options:{}}])};ft.enableTIDs=()=>{window.fsprebid.setConfig({enableTIDs:!0})};ft.enableRTDProviders=i=>{fsprebid.mergeConfig({realTimeData:{auctionDelay:50,dataProviders:i.realtimeProviders.getRtdProvidersConfig()}})};ft.updateTimeouts=({bidderTimeout:i,s2sTimeout:e})=>{let t={bidderTimeout:i};rn.length&&(t.s2sConfig={timeout:e||i*.75}),window.fsprebid.mergeConfig(t),window.freestar.fsdata.timeout=i};Ct=ft});function vb(){return freestar.fsdata.placements.filter(i=>i.interstitialOptions&&i.interstitialOptions.active&&i.interstitialOptions.type==="UNDERTONE_GRABBER")[0]}function zy(i,e){if(Pe({name:"pageGrabber"})){i(!0);return}freestar.log(1,"Page Grabber: Init");let t=vb();if(t){performance.mark("pageGrabber-initialization-start"),freestar.log(1,"Page Grabber: placement ",t),freestar.frequencyLibrary[t.name]=new kr({placement:t,product:"interstitial",callback:i});let r=Number(sessionStorage.getItem("pageviews")||1),{interstitialPageViewsBefore:s}=Zt({placement:t,type:"interstitialOptions"});if(freestar.frequencyLibrary[t.name].cap>-1&&!freestar.frequencyLibrary[t.name].allowProduct()){i(!0);return}if(s&&r<s){i(!0);return}let n=e.createSlot({placement:t}),o=Wt(t);if(o&&pi({adUnits:o}),n&&t.name&&document.body){let a=function(m){if(m&&m.data)try{let h=m.data&&typeof m.data=="string"?JSON.parse(m.data):!1;h.method&&h.method==="close"&&d({slot:n,callback:i,name:t.name})}catch(h){freestar.log(1,`Error: ${h}`)}},d=function({slot:m,callback:h}){freestar.log(1,"Page Grabber: destroying page grabber div!"),freestar.newAdSlotsAllowed=!0,document.removeEventListener("click",a,!1),googletag.destroySlots([m]),h(null,!0)};freestar.newAdSlotsAllowed=!1;let c=B({type:"div",id:t.name});document.body.appendChild(c),googletag.cmd.push(function(){googletag.display(c.id)}),G.instance.resolve(l.BIDS_MANAGER).then(m=>{m.requestBids({elementIds:[t.name],slots:[n]})});let u=0,p=setInterval(function(){if(u++,u>50)clearInterval(p);else{let m=document.querySelectorAll('[title="Close"]')[0];m&&(clearInterval(p),m.addEventListener("click",function(){d({slot:n,callback:i})}))}},50);window.addEventListener("message",a)}else freestar.log(1,"Page Grabber: define slot error or document.body not available skipping page grabber!"),freestar.frequencyLibrary[t.name].cap&&freestar.frequencyLibrary[t.name].subtractIteration(),i(!0);performance.mark("pageGrabber-initialization-end")}else freestar.log(1,"Page Grabber: no placement aligned skipping page grabber!"),i(!0)}var qy=f(()=>{$s();Nr();te();Ms();Nt();pt();U();F()});function au(){let i=document.createElement("script");i.src="https://btloader.com/tag?o=5714937848528896&upapi=true",document.head.insertBefore(i,document.head.firstElementChild),freestar.log("inserted blockthrough script")}var Yy=f(()=>{});function $y({placementName:i=void 0,callback:e=void 0}){freestar.log(1,"Stand Alone Player: Invoked",arguments);let t=!0,r=freestar.fsdata.placements.filter(s=>s.name===i)[0];if(r){freestar.log(1,"Stand Alone Player: Placement",r);let s=document.getElementById(r.name),n=document.createElement("div");if(n.style=s.style,n.style.width="100%",n.style.height="100%",n.id="_"+s.id,n.className="_wrapper",s.appendChild(n),freestar.log(1,"Stand Alone Player: Div",s),s){let{width:o}=s.getBoundingClientRect();if(o>=300){freestar.log(1,"Stand Alone Player: eligible width!");let a=freestar.fsdata.placementVideos.filter(d=>d.id===r.standAloneVideoOptions.videoId)[0];a&&(freestar.log(1,"Stand Alone Player: videoAd",a),t=!1,G.instance.resolve(l.AD_SLOTS_MANAGER).then(d=>{Rb({videoAd:a,placement:r,width:o,callback:e,adSlotsManager:d})}))}else freestar.log(1,"Stand Alone Player: width is not equal to or greater than 400px!")}}t&&e&&(freestar.log(1,"Stand Alone Player: Failure!"),e(!0))}function Rb({videoAd:i,placement:e,width:t,callback:r=void 0},s){performance.mark("springServe-initialization-start"),window._ssPlayer=window._ssPlayer||{spIdi:i.supplyId,widthi:`${t}`,aspecti:"16:9",divi:"_"+e.name};let n="https://cdn.springserve.com/assets/0/playerJS/frstrIN_2.js",o=Date.now();td({bidder:"springserve",placementId:i.id?i.id:"",tagUrl:n});function a(){r&&(r(null,{completed:!0}),r=void 0)}load_script(n,function(){window.AdPlayerPro().on("AdStarted",function(){sy({bidder:"springserve",videoAd:i,requestTimestamp:o}),r&&r(null,{videoAdStarted:!0}),["AdStopped","AdClosed"].forEach(d=>{window.AdPlayerPro().on(d,()=>{a()})}),window.AdPlayerPro().on("AdSkipped",()=>{r&&(r(null,{videoAdSkipped:!0,completed:!0}),r=void 0)})}),window.AdPlayerPro().on("AdError",function(){freestar.log(1,"Stand Alone Player: Error loading video requesting bids via new ad slots method"),r&&(r(null,{videoAdStarted:!1}),freestar.standAlonePlayer.callback=r,freestar.standAlonePlayer.slotId=e.name),e.standAloneVideoOptions.backfillDisplayAd?(freestar.log(1,"Stand Alone Player: Backfill display ad requesting."),s.newAdSlots([{placementName:e.name,slotId:e.name}])):(freestar.log(1,"Stand Alone Player: Backfill display not selected. Process terminating"),r(null,{completed:!0}))}),performance.mark("springServe-initialization-end")})}function jy({event:i}){let e=i.slot.getSlotElementId(),t=freestar.fsdata.placements.filter(r=>r.name===e)[0];if(t){let{standAloneVideoOptions:r}=t;if(r&&r.videoId&&r.videoId.length&&freestar.fsdata.placementVideos.filter(n=>n.id===t.standAloneVideoOptions.videoId)[0]){freestar.standAlonePlayer&&freestar.standAlonePlayer.callback&&typeof freestar.standAlonePlayer.callback=="function"&&(freestar.standAlonePlayer.callback(null,{displayAdServed:!i.isEmpty,completed:!0}),freestar.standAlonePlayer.callback=void 0);let n=document.getElementById(t.name);if(n){let o=n.querySelector("div[id^=google_ads_iframe_]");o&&(o.className+="center-ad")}}}}function Ky({placementName:i=void 0,callback:e=void 0}){let t=freestar.fsdata.placements.filter(r=>r.name===i)[0];t&&(freestar.log(1,"Stand Alone Player: Placement",t),document.getElementById(t.name).innerHTML="",delete window.AdPlayerPro),e&&e(!0)}var Wy=f(()=>{Hf();U();F()});var Qy,du,Ob,Jy,Zy=f(()=>{te();Qe();Re();xi();Qy="fs.session",du=class{constructor(){this.session=null,this.init()}init(){let e=Q({key:Qy});this.session=e?JSON.parse(e):{},this.session.id||(this.session.id=Ae());let t=Pi.map(r=>({key:r,value:z(r)})).filter(r=>r.value!=="");if(t.length!==0){let r={};t.forEach(s=>{r[s.key]=s.value}),this.session.utm=r}ve({key:Qy,type:K.object,value:this.session})}getSessionId(){return this.session.id}getUTMValue(e){return this.session.utm?this.session.utm[e]:null}},Ob=new du,Jy=()=>Ob.getSessionId()});function lu(){function i(){let t=new Date().getTime();return window.performance&&typeof window.performance.now=="function"&&(t+=performance.now()),"xxxxxxxxxx".replace(/[x]/g,function(){let r=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),r.toString(16)})}function e(){let t=i();return Di({name:"fs.identifier.hash",value:t,expires:365*5,path:"/"}),t}if(freestar.fsdata&&freestar.fsdata.hashEnabled){let t=Lt({name:"fs.identifier.hash"});return window.location.hash=t&&t.length?t:e(),window.location.hash}return""}function Xy(){freestar.msg=freestar.msg||{},freestar.msg.loadTime=freestar.msg.loadTime||0,freestar.msg.hash=lu(),freestar.msg.sessionId=Jy()}var eS=f(()=>{Qe();Zy()});var Cb,Pb,xb,tS,iS=f(()=>{he();te();_e();Nt();mt();F();U();Cb=({placements:i})=>{i.forEach(e=>{let{name:t,contextId:r}=e;G.instance.resolve(l.ANALYTICS).then(s=>{s.track(new io({partnerName:"DIANOMI",placementName:t,contextId:r}))})}),performance.mark("dianomi-initialization-end")},Pb=({placement:i})=>{let{name:e,contextId:t}=i,r=document.querySelector(`#${e}`);if(!r)return window.freestar.log(1,`Dianomi Target Node with ID "${e}" Does Not Exist`),!1;r.appendChild(B({classList:["dianomi_context"],attributes:[{"data-dianomi-context-id":t}]}))},xb=()=>{let i=window.freestar.fsdata.placements.filter(e=>e.partnerName==="DIANOMI");if(Pe({name:"dianomiContentRec"})||i.length<1)return!1;performance.mark("dianomi-initialization-start"),i.forEach(e=>{Pb({placement:e})}),qE({id:Od})?performance.mark("dianomi-initialization-end"):Ee(Nu,Cb.bind(null,{placements:i}),Od)},tS=xb});function sS(){window.addEventListener("focus",()=>{let i=[...freestar.focusQueue];freestar.focusQueue=[],i.forEach(e=>e.apply())})}function nS(){rS||(rS=!0,document.addEventListener("visibilitychange",function(){return!document.hidden&&freestar.visibilityRefresh.timeLeft&&Date.now()-freestar.visibilityRefresh.timeLeft>freestar.visibilityRefresh.refreshTimeMinimum*1e3&&(freestar.visibilityRefresh.timeLeft=null,freestar.refreshActiveSlots()),freestar.visibilityRefresh.timeLeft=Date.now(),!0}))}var rS,oS=f(()=>{rS=!1});function aS(i){var t;let e=(t=i.selectedSize)==null?void 0:t.elementTargetedConfig;return e&&e.active?V(b({},e),{source:"viewport"}):{active:!1}}var dS=f(()=>{});var lS,cS=f(()=>{lS=document.createElement("style");lS.textContent='.fs-sticky-footer{bottom:0;display:block;display:-webkit-box;display:-ms-flexbox;display:flex;position:fixed;right:0;width:100vw;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;z-index:2147483647}.fs-sticky-slot-element>div>iframe{margin:0!important}.fs-sticky-slot-element>div{position:relative}.fs-sticky-parent{bottom:0;left:0;padding-top:0;position:fixed;right:0;text-align:center;z-index:2147483647}.fs-sticky-wrapper{margin:auto}.fs-dynamic{clear:both;text-align:center}.fs-iai{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;clear:both}.fs-iai-sticky{-webkit-box-align:top;-ms-flex-align:top;align-items:top}.fs-iai-sticky>div{position:sticky;-ms-flex-item-align:start;align-self:flex-start}.fs-close-button{all:unset;-moz-appearance:none!important;-webkit-appearance:none!important;appearance:none!important;background-color:#fff!important;background-image:url(https://a.pub.network/core/imgs/freestar_close_button.svg)!important;background-position:50%!important;background-repeat:no-repeat!important;border:none!important;border-radius:50%!important;-webkit-box-shadow:0 0 0 1px #888,0 0 0 1px #f7f7f7bf!important;box-shadow:0 0 0 1px #888,0 0 0 1px #f7f7f7bf!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important;cursor:pointer!important;display:block!important;height:20px!important;outline:none!important;padding:0!important;position:absolute!important;right:25px!important;top:25px!important;-webkit-transition:all .3s ease-in-out!important;transition:all .3s ease-in-out!important;width:20px!important}.fs-close-button:focus,.fs-close-button:hover{background-color:#000!important}.fs-sticky-popup-container{-webkit-filter:drop-shadow(2px 2px 2px grey);filter:drop-shadow(2px 2px 2px grey);font-family:arial;font-size:.8em;height:auto;padding:7px;text-align:center;white-space:nowrap;width:auto;z-index:2147483647!important}.fs-sticky-popup-container a:nth-child(2){border-top:1px solid #999}.fs-sticky-popup-container .fs-report-ad-button{color:#999}.fs-close-button:hover{-webkit-box-shadow:0 0 0 1px #888,0 0 0 8px #f7f7f7bf;box-shadow:0 0 0 1px #888,0 0 0 8px #f7f7f7bf}.fs-close-button-pushdown{right:12px!important;top:12px!important}@media screen and (min-width:820px){.fs-close-button-sticky{right:10px!important;top:9.3%!important}}@media screen and (max-width:820px){.fs-close-button-sticky{right:10px!important;top:3px!important}.fs-close-button-pushdown{right:0!important;top:0!important}}.fs-branding-spacer{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.fs-report-ad-button{background:none;color:#000;font-size:12px;-webkit-text-decoration:none;text-decoration:none}.fs-report-ad-button,.fs-report-ad-button-icon{border:none;cursor:pointer;display:block;padding:0}.fs-report-ad-button-icon{background-color:initial;background-image:url(https://a.pub.network/core/imgs/freestar_report_ad_icon.png);background-size:18px;content:"";moz-appearance:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#fff;background-position:50%;background-repeat:no-repeat;border-radius:50%;-webkit-box-sizing:border-box;box-sizing:border-box;height:16px;outline:none;width:16px}.fs-pushdown{width:100%}.fs-pushdown,.fs-pushdown-sticky{background-color:#f7f7f7e6;display:-webkit-box;display:-ms-flexbox;display:flex;text-align:center;top:0;z-index:2147483647;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.fs-pushdown-sticky{left:0!important;position:sticky!important}.__fs-ancillary{--childHeight:16px;display:-webkit-box;display:-ms-flexbox;width:var(--childWidth,100%);-webkit-box-align:center;-ms-flex-align:center;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;margin:0 auto;position:relative;-webkit-box-ordinal-group:1000;-ms-flex-order:999;align-items:center;display:flex;height:16px;height:var(--childHeight,16px);order:999;width:100%;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.__fs-ancillary>div>.__fs-branding{-webkit-box-flex:20;-ms-flex-positive:20;flex-grow:20}.fs-sticky-wrapper .__fs-ancillary{display:none!important}.__fs-branding{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.__fs-branding>a{display:block;height:var(--childHeight);max-width:var(--childWidth);width:100%}.__fs-branding>a>img{-webkit-box-shadow:none;box-shadow:none;display:block;height:calc(var(--childHeight) - 2px)!important;margin:0 auto 0 0!important;width:auto!important}.fs-sticky-wrapper .__fs-branding{border:none;border-radius:50%;height:30px;position:absolute;right:6px;top:0;top:50%;width:30px}.fs-mobile-tall{top:30%!important}.fs-sticky-wrapper .__fs-branding>a{display:-webkit-box;display:-ms-flexbox;display:flex;height:100%;width:100%;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.fs-sticky-wrapper .__fs-branding>a>img{height:100%!important;opacity:1;width:100%!important}@media screen and (max-width:820px){.fs-sticky-wrapper .__fs-branding>a>img{height:70%!important;opacity:1;width:70%!important}}.fs-sticky-wrapper .__fs-branding{background-color:#f7f7f7bf;background-size:58%}.fs-sticky-wrapper .__fs-branding>a>img{height:90%;width:90%}.fs-sticky-wrapper{background-color:#f6f3f3;display:inline-block;padding-right:38px;visibility:inherit;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;z-index:inherit}.center-ad{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}._wrapper .orp-player-wrapper{height:100%!important;width:100%!important}';document.head.appendChild(lS)});var fS,uS=f(()=>{fS=document.createElement("style");fS.textContent=".fs-flying-carpet{background:-webkit-gradient(linear,left top,left bottom,color-stop(10%,#00c389),to(#000));background:linear-gradient(180deg,#00c389 10%,#000);-webkit-box-shadow:0 4px 8px #0000001a;box-shadow:0 4px 8px #0000001a;height:175vh;margin:0 -1.1rem .5rem;position:relative}.fs-flying-carpet-ad-container{margin:0 auto;position:sticky;top:0;-ms-flex-item-align:center;align-self:center;bottom:10vh;padding-bottom:10vh;padding-top:10vh}.fs-flying-carpet-ad-container,.fs-powered-by{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.fs-powered-by{background-color:#000;bottom:0;color:#00c389;font-size:18px;height:6vh;padding:10px 0;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.fs-flying-carpet-header,.fs-powered-by{-webkit-box-shadow:0 -2px 4px #0000001a;box-shadow:0 -2px 4px #0000001a;position:absolute;text-align:center;width:100%}.fs-flying-carpet-header{background-color:#34495e;color:#fff;font-family:Arial,Helvetica,sans-serif!important;font-size:11px;padding:5px 0;top:0}.fs-flying-carpet-v2{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.fs-flying-carpet-v2,.fs-flying-carpet-v2-ad-container{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.fs-flying-carpet-v2-ad-container{-webkit-box-pack:center;-ms-flex-pack:center;background-color:#fff;-webkit-box-sizing:border-box;box-sizing:border-box;height:65vh;justify-content:center;margin-left:auto;margin-right:auto;overflow-x:hidden;overflow-y:scroll;width:300px}.fs-flying-carpet-v2-text-border{background-color:#333;color:#fff;font-family:Arial,sans-serif;font-size:.8em;letter-spacing:1px;padding:5px 0;text-align:center;text-transform:uppercase;width:100%}.fs-flying-carpet-v3{display:-webkit-box;display:-ms-flexbox;display:flex;margin:0 auto;position:relative;width:300px;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding:5px 0}.fs-flying-carpet-v3-text-border{background-color:#333;color:#fff;font-family:Arial,sans-serif;font-size:.8em;left:50%;letter-spacing:1px;margin-left:-50vw;padding:5px 0;position:relative;text-align:center;text-transform:uppercase;width:100vw}.fs-flying-carpet-v3-container{position:sticky;top:0;-webkit-transition:opacity .3s ease;transition:opacity .3s ease;z-index:0}.fs-flying-carpet-v3-content{height:500px;position:relative;width:300px}.fs-flying-carpet-v3-slot-wrapper{clip-path:inset(0);-webkit-clip-path:inset(0);height:500px;overflow:hidden;position:absolute;width:300px}.fs-flying-carpet-v3-slot{-webkit-backface-visibility:hidden;backface-visibility:hidden;left:50%;-o-object-fit:contain;object-fit:contain;-o-object-position:top;object-position:top;position:fixed;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:300px;z-index:-9999}";document.head.appendChild(fS)});var _d,pS=f(()=>{_d=class{constructor(){this.modifications={emxdigital:{modification:"emx_digital"},synacor:{modification:"synacormedia"}}}slugModification(e=""){return this.modifications[e]?this.modifications[e].modification:e}reassignNetworkSlug(e=[]){return e.map(t=>(t.slug=this.slugModification(t.slug),t))}init(){window.freestar.fsdata.networks=this.reassignNetworkSlug(window.freestar.fsdata.networks),window.freestar.fsdata.placements=window.freestar.fsdata.placements.map(e=>(e.networks=this.reassignNetworkSlug(e.networks),e))}}});function hS(){return cu==null&&(cu=new fu),cu}var fu,cu,mS=f(()=>{U();F();qi();fu=class{initiateWatcher(e){e.que.push(()=>{e.onEvent("adRenderFailed",this.handleAdRenderFailed.bind(this))})}handleAdRenderFailed({message:e,adId:t,reason:r,bid:s}){freestar.log({title:"Pubfig",styles:"background: red; color: white; border-radius: 3px; padding: 3px"},`Prebid adRenderFailed. Reason: ${r} - ${e} - ${s.adUnitCode}`),G.instance.resolve(l.ANALYTICS).then(n=>{n.track(new X({eventName:"AD_RENDER_FAILED",eventType:e,data:{adId:t,reason:r,bid:s}}))})}},cu=null});var Ed,uu=f(()=>{Ed={session:"session",page:"page"}});var gS,_S=f(()=>{uu();gS=({win:i=window,level:e=Ed.page}={})=>{var r;let t=(r=i==null?void 0:i.freestar)==null?void 0:r.frequencyLibraryV2;t&&Object.values(t).forEach(s=>{s&&typeof s.resetIteration=="function"&&s.resetIteration({level:e})})}});function ES({isActive:i=!1}){let e=i||Db()?99:!1;Object.defineProperty(window.freestar,"debug",{get(){return e},set(t){let r=ue.SILENT;t===!0&&(r=ue.VERBOSE),Number.isInteger(t)&&(r=t),t===!1&&(r=ue.SILENT),Sr.setMaxLogsLevel(r),e=t}})}var Db,yS=f(()=>{Vi();Is();Db=()=>window.location.search.includes("fslog")});var SS,IS=f(()=>{SS=(i,e,t=document)=>{t.readyState==="loading"?t.addEventListener("DOMContentLoaded",()=>{t.body.appendChild(i),e==null||e()}):(t.body.appendChild(i),e==null||e())}});var AS,bS=f(()=>{AS=document.createElement("style");AS.textContent=".fs-test-mode-label{background-color:#000000a6;border-radius:5px 0 0 5px;bottom:40%;color:#fff;display:-webkit-box;display:-ms-flexbox;display:flex;font-family:monospace;position:fixed;right:0;-webkit-transform:translateX(calc(100% - 25px));transform:translateX(calc(100% - 25px));-webkit-transform-origin:left top;transform-origin:left top;-webkit-transition:background-color .3s ease-in,-webkit-transform .3s ease-in;transition:background-color .3s ease-in,-webkit-transform .3s ease-in;transition:transform .3s ease-in,background-color .3s ease-in;transition:transform .3s ease-in,background-color .3s ease-in,-webkit-transform .3s ease-in;z-index:2147483647}.fs-test-mode-label>span:first-of-type{border-right:1px solid #03c38b;cursor:pointer;display:-webkit-box;display:-ms-flexbox;display:flex;padding:5px;-webkit-writing-mode:tb-rl;-ms-writing-mode:tb-rl;writing-mode:tb-rl}.fs-test-mode-label>span:first-of-type>img{margin-top:5px;width:17px}.fs-test-mode-label>div>button{background-color:#03c38b;border:none;border-radius:5px;color:#fff;cursor:pointer;font-family:monospace;padding:5px 10px}.fs-test-mode-label>div{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:10px;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:0 5px}.fs-test-mode-label>input[type=checkbox]{height:0;visibility:hidden;width:0}.fs-test-mode-label:has(input[type=checkbox]:checked){background-color:#000c;-webkit-transform:translateX(0);transform:translateX(0)}@media only screen and (max-width:450px){.fs-test-mode-label{-webkit-transform:translateX(calc(100% - 30px));transform:translateX(calc(100% - 30px))}.fs-test-mode-label>span:first-of-type{font-size:18px;padding:7px 5px}.fs-test-mode-label>span:first-of-type>img{width:20px}}";document.head.appendChild(AS)});var wS,TS=f(()=>{Re();Bn();_e();$e();IS();bS();he();Xd();wS=()=>{let i=Q({key:ar}),e=z(ii.fsaltconfig);if(!i&&!e)return;let t=i;e&&i!==e&&(ve({key:ar,value:e}),t=e);let r=B({type:"input",attributes:[{type:"checkbox"}]}),s=B({type:"img"});s.src=`${vi}/imgs/fslogo-green.svg`;let n=B({type:"span"});n.textContent="Test Session",n.appendChild(s);let o=B({type:"span"});o.textContent=`Config v.${t}`;let a=B({type:"span"});a.textContent=`Pubfig v.${freestar.version}`;let d=B({type:"button"});d.textContent="End session",d.onclick=()=>{nr({key:ar}),Hu(ii.fsaltconfig)};let c=B({children:[o,a,d]}),u=B({type:"label",id:Ap,classList:[bp],children:[r,n,c]});SS(u)}});function RS(){if(window.BrowsiScriptLoaded)return;let i=B({type:"script",id:"browsi-tag",src:"https://cdn.browsiprod.com/bootstrap/bootstrap.js",attributes:[{"data-pubKey":"freestar"},{"data-siteKey":"d_mapping"}]});i.type="text/javascript",i.async=!0,i.onload=function(){window.BrowsiScriptLoaded=!0},document.getElementsByTagName("head")[0].appendChild(i)}function OS({gamManager:i,dispensaryData:e}){i.instance.pubads().addEventListener(Me,()=>{vS||(vS=!0,e.fsdata.browsiEnabled&&J().allowBrowsi()&&(RS(),freestar.log({title:"Browsi"},"Script loaded")))})}var vS,CS=f(()=>{mt();Ne();_e();vS=!1});function Nb(){let i={gpp:typeof window.__gpp=="function",tcf:typeof window.__tcfapi=="function",usp:typeof window.__uspapi=="function"};return Object.fromEntries(Object.entries(i).filter(([e,t])=>t))}function PS(){var a,d,c,u,p,m;window.freestar=window.freestar||{};let i=sr,e=["AT","BE","BG","CY","CZ","DE","DK","EE","ES","FI","FR","GB","GR","HR","HU","IE","IS","IT","LI","LT","LU","LV","MT","NL","NO","PL","PT","RO","SE","SI","SK","UK"],t=(d=(a=window==null?void 0:window.freestar)==null?void 0:a.locData)==null?void 0:d.iso,r=(u=(c=window==null?void 0:window.freestar)==null?void 0:c.locData)==null?void 0:u.state,s=((m=(p=window==null?void 0:window.freestar)==null?void 0:p.fsdata)==null?void 0:m.mspaStates)||i,n=t==="US"&&s.includes(r),o=e.includes(t);return new Promise(h=>{if(!n&&!o)return h();function _(){let g=Nb(),E=n&&(g.gpp||g.usp),L=o&&g.tcf;return E||L?(window.freestar.consentLibrary=g,!0):!1}if(_())return h();let I=0,S=setInterval(()=>{if(_())return clearInterval(S),h();I++,I>=100&&(clearInterval(S),console.warn("consent libraries not detected within timeout."),h())},50)})}var xS=f(()=>{he()});function DS(i){var s,n;let e=o=>(o||[]).map(a=>a==null?void 0:a.slug).filter(Boolean),t=new Set(e((s=i==null?void 0:i.fsdata)==null?void 0:s.networks)),r=new Set((((n=i==null?void 0:i.fsdata)==null?void 0:n.placements)||[]).flatMap(o=>e(o==null?void 0:o.networks)));return new Set([...t,...r])}var NS=f(()=>{});var MS=f(()=>{NS()});var Fb=Ti(pu=>{iy();mt();fy();uy();Sy();by();Nr();vl();he();Md();te();_e();Hy();$s();ot();Tn();Ve();Qe();Ci();Ss();qy();Xc();Yy();pt();Wy();eS();Ms();iS();fs();oS();De();dS();cS();uS();br();pS();Ne();If();cf();mS();Ka();Dc();_S();uu();xf();Nt();zn();il();ff();yS();U();Ut();F();Li();Dr();TS();CS();xS();MS();Af();var kS=({callback:i})=>{if(freestar.fsdata.footerBiddingEnabled&&!Pe({name:"footerBidding"})){let{psoDisableInteraction:e=!1}=freestar.fsdata;(!Ke()||Ke()&&e)&&(document.readyState==="complete"?Js(i):window.addEventListener("load",()=>Js(i))),Ke()&&!e&&On({name:"engine",callback:()=>Js(i)})}else Js(i)},Mb=function(i){window.googlefc=window.googlefc||{},window.googlefc.callbackQueue=window.googlefc.callbackQueue||[],window.googlefc.callbackQueue.push({CONSENT_DATA_READY:i})},kb=()=>T(pu,null,function*(){yield Je().fetch({fetchFn:lr,requestId:"getIdealData",onError:()=>{At({siteId:freestar.fsdata.siteId})||Je().fetch({requestId:"getFloorsData",fetchFn:()=>{var i,e;return Wr({deviceVendor:window.freestar.deviceInfo.device.vendor,deviceType:window.freestar.deviceInfo.device.type,refreshNumber:0,isFloorsActive:(e=(i=window.freestar)==null?void 0:i.fsdata)==null?void 0:e.isTriple13Enabled})}})},onSuccess:({data:i})=>{At({siteId:freestar.fsdata.siteId})||i&&i.floors||Je().fetch({requestId:"getFloorsData",fetchFn:()=>{var e,t;return Wr({deviceVendor:window.freestar.deviceInfo.device.vendor,deviceType:window.freestar.deviceInfo.device.type,refreshNumber:0,isFloorsActive:(t=(e=window.freestar)==null?void 0:e.fsdata)==null?void 0:t.isTriple13Enabled})}})}})});function Lb(Ji){return T(this,arguments,function*({freestar:i,stickyFooter:e={},sideWall:t={},stickyRail:r={},initDynamicAds:s,newDynamicContent:n,DynamicAds:o,pushdown:a={},video:d={},analytics:c,performanceLogger:u,identityManager:p,slidingUnit:m={},stickyAd:h={},interstitial:_,superflex:I,carousel:S={},wakelock:g={},viewableImpressions:E={},joke:L={},adRefresher:k,logger:$,adSlotsManager:H,memoryMonitor:we,bidsManager:Te,gamManager:ee,dispensaryData:et,adSlotService:Ye,page:Pt,intelligentAdInsertManager:St,flyingCarpetManager:It,urlValidator:xt}){var mu;if(i.url=window.location.href,$p(et.fsdata.placements),wS(),ES({}),xt.validate(),Xy(),ee.setGlobalTargeting("fs_version",i.version),$a().initiateWatcher(fsprebid),hS().initiateWatcher(fsprebid),u.setAnalytics(c),Object.defineProperty(i,"googletagCorrelatorUpdate",{get:function(){return ee.googletagCorrelatorUpdate},set:function(M){ee.googletagCorrelatorUpdate=M}}),(mu=i.analyticsQueue)!=null&&mu.length&&i.analyticsQueue.forEach(M=>c.track(M)),delete i.analyticsQueue,u.pushAllPendingMarksToMsgQue(),u.logMark({markerName:be.pubfigEngineLoad,compareTo:[be.pubfigEngineLoadInit]}),i.queue=i.queue||[],i.config=i.config||{},i.identity=p,i.isHttps=window.location.protocol==="https:"?1:0,i.dynamicIdNum=i.dynamicIdNum||1,i.rebidSlots=[],i.tools={},i.requests={},i.requests.que=[],i.requests.process=[],i.requests.timestamp=void 0,i.bidRequestNum=0,i.sideWallUnitControl=[],i.dfpSlotInfo={},i.func={},i.pushdownControl={},i.visibilityRefresh={},i.newAdSlotIds=[],i.server={},i.bidsWon={},i.networkFloor={},i.blockedRanges={},i.requestReference={},i.dynamicSlots=[],i.dynamicSlotLibrary={},i.gamMap=ee.gamMap,i.reportLibrary={},i.fsDfpId=ee.isFsGam,i.fsDevDfpId=ee.isFsDevGam,i.gamImpressionCallbacks=[],i.googleInterstitialPlacement,i.allowBidResponseCollection=!1,i.allowBidRequestedCollection=!1,i.viewableImpression={},i.newAdSlotsAllowed=!0,i.frequencyLibrary={},i.frequencyLibraryV2={},i.newAdSlotsQueue=[],i.focusQueue=[],i.initRequested=!1,i.adjustments={isLogged:z("adjustment-log"),bids:[]},i.logPerformanceMarks=i.performanceLogger.logPerformanceMarkers,i.newAdSlotsCalled=[],i.enabledSlotsCalled=[],i.standAlonePlayer={callback:void 0,slotId:void 0},i.currentStickyFooter=void 0,window.load_script=Ee,i.setVideoAdhesionEnabled=ae(e.setVideoAdhesionEnabled,{name:"setVideoAdhesionEnabled",warn:!0}),i.slotTargeting=di,i.newDynamicContent=ae(n,{name:"newDynamicContent",warn:!0}),i.newAdSlots=H.newAdSlots.bind(H),i.createAdSlot=Ye.createAdSlot.bind(Ye),i.newStickyFooter=ae(e.newStickyFooter,{name:"newStickyFooter",warn:!0}),i.deleteAdSlots=H.deleteAdSlots.bind(H),i.format_pbjs=Wt,i.func.browserInfo=Xa,i.newPushdown=ae(a.add,{name:"newPushdown",warn:!0}),i.deletePushdown=ae(a.delete,{name:"deletePushdown",warn:!0}),i.newSidewall=ae(t.add,{name:"newSidewall",warn:!0}),i.deleteSidewall=ae(t.delete,{name:"deleteSidewall",warn:!0}),i.newVideo=ae(d.add,{name:"newVideo",warn:!0}),i.deleteVideo=M=>ae(d.remove,{name:"deleteVideo",warn:!0})({name:M}),i.logRandomJoke=ae(L.logRandomJoke,{name:"logRandomJoke",warn:!0}),i.newStandAlonePlayer=$y,i.newStickyRail=ae(r.create,{name:"newStickyRail",warn:!0}),i.deleteStickyRail=ae(r.destroy,{name:"deleteStickyRail",warn:!0}),i.newFlyingCarpet=M=>It.create(M),i.deleteFlyingCarpet=M=>It.destroy(M),i.deleteStandAlonePlayer=Ky,i.reportingAdInfo=()=>{console.warn("freestar.reportingAdInfo() has been deprecated")},i.getActiveModulesFromConfig=Tu(i.fsdata.placements,i.fsdata.videoAds),i.deleteStickyFooter=()=>{console.warn("The deleteStickyFooter method is not available!")},i.modulesLoaded.engine=!0,i.disableAutoTrackPageviews||function(M){var Y=M.pushState,ie=M.replaceState;M.pushState=function(Se){let j=new CustomEvent("pushState");return j.state=Se,window.dispatchEvent(j),Y.apply(M,arguments)},M.replaceState=function(Se){let j=new CustomEvent("replaceState");return j.state=Se,window.dispatchEvent(j),ie.apply(M,arguments)}}(window.history),i.trackPageview=({path:M=window.location.href}={})=>{M!==i.url&&(i.log(1,"TrackPageview invoked."),gS({level:Ed.page}),i.url=M,i.hitTime=Date.now(),lu(document.cookie),Pt.refreshId(),Pt.pageViewCount++,Xa(),n==null||n(),k.resetCapCounter())},i.Browsi={pushAd:(M,Y,ie)=>{i.newAdSlots({placementName:Y,slotId:M,targeting:{browsiId:ie}})}},i.func.domloaded=!1,i.visibilityRefresh.runRefresh=!0,i.visibilityRefresh.enacted=!1,i.visibilityRefresh.timeLeft=null,i.visibilityRefresh.refreshTimeMinimum=30,i.videoAdsRan=!1,(i.fsdata.adRefreshRate==0||(i.fsdata.visibilityRefreshDisabled&&!!i.fsdata.visibilityRefreshDisabled)===!0)&&(i.visibilityRefresh.runRefresh=!1),i.fsdata.visibilityRefreshTime&&Number(i.fsdata.visibilityRefreshTime)>1&&(i.visibilityRefresh.refreshTimeMinimum=i.fsdata.visibilityRefreshTime),!J().getBypassFirstAuction()&&i.fsdata.networks.some(M=>M.slug==="consumable")&&Ee("https://sync.serverbid.com/ss/2000462.js"),sS(),HE(window.freestar.fsdata.customCss),je({name:"pubfigLoaded",detail:!0}),(z("blockthrough")||i.fsdata.blockthroughEnabled&&i.fsdata.blockthroughVersion===2)&&J().allowBlockthrough()&&au(),Ct.setNetworks(),Ct.getBidderSettings(),Ct.setBidderSettings(),mg(),window.freestar.fsdata.identityProviders&&window.freestar.fsdata.identityProviders.findIndex(M=>M.slug==="merkleId")!==-1){let M=document.createElement("script");M.src="//js-sec.indexww.com/ht/p/184310-82987131453484.js",document.head.insertBefore(M,document.head.firstElementChild),i.log("inserted IX Identity Library script")}let wi=GS();Du.indexOf(i.fsdata.siteId)===-1&&(i.allowBidResponseCollection=wi,(Math.floor(Math.random()*99)===50||window.location.search.indexOf("fssniffer")>-1)&&i.queue.push(function(){$E()})),i.allowBidRequestedCollection=wi,hh(),i.debug>=99&&(console.clear=function(){}),i.log(1,"Freestar Version: "+i.version),Ke()&&(i.log(1,"Page Speed Optimized in effect, filtering out the following products:",vd.join(",")),vd.forEach(M=>{i.config.products[M]||(i.config.products[M]={}),i.config.products[M]=Object.assign(i.config.products[M],{disabled:!0})})),window.setTimeout(window.freestar.func.browserInfo,3e4);let Zi=i.fsdata.retries,D=Lt({name:"fs.direct.traffic"});i.fsdirect=D,new _d().init(),ae(S.manipulatePlacements)(),ba();let P=()=>{u.logMark({markerName:be.pubfigEngineSetupStart,compareTo:[be.pubfigEngineLoad]}),z("block")==="fsdirect"&&(i.fsdirect=!0);let Y=!1;function ie(){Y||(Y=!0,N())}p.init(),ie();let Se=null;ee.instance.pubads().addEventListener(ml,function(me){var ut;let Ue=me.slot.getSlotElementId();i.log(1,`GAM ${ml} ${Ue}`),Ue&&i.gamImpressionCallbacks[Ue]&&i.gamImpressionCallbacks[Ue]({event:me}),(ut=_==null?void 0:_.postRender)==null||ut.call(_,{event:me,elementId:Ue})}),ee.instance.pubads().addEventListener(Ft,function(me){i.log(1,`GAM ${Ft} ${me.slot.getSlotElementId()}`),Se===null&&(Se=me.slot.getSlotElementId(),u.logMark({markerName:be.pubfigSlotRequested})),i.currentStickyFooter&&typeof i.currentStickyFooter.isSticky=="function"&&i.currentStickyFooter.isSticky(me)&&u.logMark({markerName:be.pubfigStickyFooterSlotRequested})}),OS({gamManager:ee,dispensaryData:et}),ee.instance.pubads().addEventListener(Me,function(me){QE(me),jy({event:me});let Ue=me.slot.getSlotElementId();i.log(1,`GAM ${Me} ${Ue}`),me.slot.getSlotElementId()===Se&&u.logMark({markerName:be.pubfigSlotRenderEnded,compareTo:[be.pubfigSlotRequested]}),i.reportLibrary[Ue]=me,Nf(me,!1)}),ee.instance.pubads().addEventListener(fo,YE);let j=Qr({freestar:i}),fe=[j.format,j.size,j.pb,j.adid,j.bidder];ee.instance.pubads().addEventListener(Me,me=>{let{slot:Ue}=me;fe.forEach(ut=>{var gu;((gu=ee.getSlotTargeting({slot:Ue,key:ut}))==null?void 0:gu.length)!==0&&ee.instance.setConfig({targeting:{[ut]:null}})})}),i.fsdata.customDirectAdRefresh&&setInterval(wn,5e3),u.logMark({markerName:be.pubfigEngineSetupEnd,compareTo:[be.pubfigEngineSetupStart]})};if(Or())throw new Error("Ad serving is blocked in "+i.locData.iso);if(performance.mark("pubfig-init"),googletag.cmd.unshift?ht().getInitialFloorsData().then(P):(i.log({title:"WARNING!",styles:"background: red; color: white; border-radius: 3px; padding: 3px"}," googletag.cmd.unshift not found skipping"),ht().getInitialFloorsData().then(PS).then(P).catch(P)),document.readyState==="complete")ae(d.init)({isAfterLoadingPage:!0}),yd();else{let M=setInterval(function(){document.readyState==="complete"&&(clearInterval(M),ae(d.init)({isAfterLoadingPage:!0}),yd())},100)}window.addEventListener("load",function(M){ae(d.init)({isAfterLoadingPage:!0}),yd(M)}),i.reloadAllAdSlots=()=>k.refreshAll(),i.refreshAllSlots=()=>k.refreshAll(),i.refreshActiveSlots=()=>k.refreshAllVisible(),i.refresh=M=>{let Y=typeof M=="string"?[M]:M;k.refresh({elementIds:Y})},i.disableRefresh=()=>k.disable(),i.disableRefreshOn=(M={})=>k.disableForItem(M),i.enableRefresh=()=>k.enable(),i.enableRefreshOn=(M={})=>k.enableForItem(M),i.freestarReloadAdSlot=M=>($.warning(["freestar.freestarReloadAdSlot() is deprecated. Use freestar.refresh() instead."]),k.refresh({elementIds:typeof M=="string"?[M]:M})),i.freestarReloadAllAdSlots=({slotIds:M}={slotIds:null})=>($.warning(["freestar.freestarReloadAllAdSlots() has been deprecated and will be"," removed in the future use freestar.refreshAllSlots()"]),M?k.refresh({elementIds:M}):k.refreshAll()),i.DynamicAds=o;function N(){fsprebid.que.push(function(){var Y;i.log(1,"fspbjs.que.push - init");try{let ie=DS(i);ie instanceof Set&&ie.size>0&&Object.entries(((Y=i==null?void 0:i.fsdata)==null?void 0:Y.aliases)||{}).forEach(([Se,j])=>{ie.has(Se)&&j&&fsprebid.aliasBidder(j,Se,{useBaseGvlid:!0})})}catch(ie){console.warn(ie)}Ct.setEventListeners(),Ct.settingConfig(fsprebid,J(),p),Ct.setSChain(),Ct.enableTIDs(),p.realtimeProviders.waitForUserSync||Ct.enableRTDProviders(p),fsprebid.refreshUserIds().then(()=>{p.realtimeProviders.waitForUserSync&&Ct.enableRTDProviders(p)});let M=oE().filter(ie=>Na(ie)).map(ie=>Wt(ie));pi({adUnits:M}),i.coppa=new Ca(window.freestar,ee,window.fsprebid),x()})}function x(){if(i.log(1," initAdserver"),!fsprebid.initAdserverSet){if(!ee.instance.pubadsReady&&fsprebid.retries<=Zi){setTimeout(x,50),fsprebid.retries++;return}fsprebid.initAdserverSet=!0,FS()}}function LS({placement:M}){for(let Y in ds){let ie;if(Y==="dynamicAds"?ie=aS(M):ie=M[ds[Y].optionsPath||`${Y}Options`],ie&&ie.active||ie&&Y==="pushdown"&&ie.isPushdownUnit||ie&&Y==="sideWall"&&ie.type>0)return!1}return!!document.getElementById(M.name)}function BS(){return T(this,null,function*(){let M={elementIds:[],bidObjects:[],slots:[]},Y=(j,fe)=>{fe&&(M.elementIds.push(fe.placement.name),M.bidObjects.push(fe.bidObject),M.slots.push(fe.slot))};US(),ae(a.init)(Y),ae(t.init)(Y),ae(S.init)(Y),ae(g.init)(),ae(E.init)(),I==null||I.init(),ae(r.create)(),tS(),ae(m.init)(),ae(h.init)(),It.init(),i.fsdata.singleLineEnabled&&(i.log({title:"SLO"},"Single line of code enabled"),i.fsdata.placements.forEach(j=>{LS({placement:j})&&i.config.enabled_slots.push({placementName:j.name,slotId:j.name})})),ae(s)(),i.newIai=j=>{ae(St==null?void 0:St.newIai,{name:"newIai",warn:!0})(j)},i.newIai(),ae(d.init)();let ie=setTimeout(()=>{ae(d.init)({failSafeStart:!0}),window.clearTimeout(ie)},2e4);!i.visibilityRefresh.enacted&&i.visibilityRefresh.runRefresh===!0&&(i.visibilityRefresh.enacted=!0,nS()),Ke()?(i.log({title:"PSO"},"Loading Page Speed Optimized Sticky Footer"),i.newStickyFooter()):ae(e.init)();let Se=i.fsdata.placements.filter(j=>j==null?void 0:j.insertionOptions);if(Se)for(let j of Se){let fe=document.querySelector(j.insertionOptions.selector);if(fe){let me=document.createElement("div");me.id=j.name,fe.parentNode.insertBefore(me,fe.nextSibling);let Ue=Mf({placement:j,slotId:j.name,gamManager:ee});Y(null,Ue)}}i.loaded=!0,yield Ja(),hu(),(!i.initCallback||i.initCallback&&typeof i.initCallback=="function"&&i.initCallback.toString().indexOf("enabled_slots")===-1)&&i.config&&i.config.enabled_slots&&i.config.enabled_slots.length&&(performance.mark("check-ad-enabled-slots-start"),i.config.enabled_slots.forEach(function(j){typeof j!="object"&&(j={placementName:j,slotId:j});let fe=re({name:ge({slotId:j.placementName})}),me=document.getElementById(j.slotId),{targeting:Ue={}}=j;if(me&&fe&&fe.validAdSizes)if(me.setAttribute("name",fe.name),fe.lazyAd&&fe.selectedSize&&fe.selectedSize.lazyLoadViewportHeight>0)Ha({element:me,placement:fe});else{let ut=Mf({placement:fe,slotId:j.slotId,targeting:Ue,gamManager:ee});ut&&(M.elementIds.push(j.slotId),ut.bidObject&&M.bidObjects.push(ut.bidObject),ut.slot&&M.slots.push(ut.slot))}}),performance.mark("check-ad-enabled-slots-end"),i.config.enabled_slots=[]),M.elementIds.length&&Te.enqueueBids({bidObjects:M.bidObjects})})}function FS(){i.log(1," fsInitAdserver"),zy(function(M,Y){i.log(1,`Page Grabber: ${Y?"completed page grabber session":"either the grabber placement is failing or there is no grabber placement"}`),i.newAdSlotsAllowed=!0,i.newAdSlotsQueue.forEach(ie=>ie.process()),BS()},ee),_==null||_.init()}function hu(){return i.callbackIntervalCount++,fsprebid.initAdserverSet&&i.initCallback!==void 0&&i.initCallbackCalled===void 0&&typeof i.initCallback=="function"?(i.initCallbackCalled=!0,clearInterval(i.callbackInterval),i.initCallback(),function(Y,ie){Y.push=function(Se){Array.prototype.push.call(Y,Se),ie(Y)}}(i.config.enabled_slots,function(Y){H.newAdSlots([Y[Y.length-1]])}),!0):(i.callbackIntervalCount>50&&clearInterval(i.callbackInterval),!1)}function yd(){if(i.func.domloaded)return;let M=document.getElementsByTagName("body")[0];Xa(),i.disableAutoTrackPageviews||(window.addEventListener("pushState",Y=>setTimeout(()=>Df(Y),1)),window.addEventListener("replaceState",Y=>Df(Y)),window.addEventListener("popstate",()=>i.trackPageview())),i.fsdata.addIsFreestar&&!M.classList.contains("is-freestar")&&VE("is-freestar"),i.func.domloaded=!0,i.callbackIntervalCount=0,i.callbackInterval=window.setInterval(hu,200),TE(),we!=null&&we.enabled&&(we.start(),i.getMemoryReport=()=>we.getReport())}function US(){if(i.fsdata.scripts2&&Array.isArray(i.fsdata.scripts2)){let M=i.fsdata.scripts2;for(let Y=0;Y<M.length;Y++)if(M[Y].active===!0){let ie=Math.floor(Math.random()*100)+1,Se=M[Y].versions,j=0;i.log(2,`Rolled ${ie} for script ${M[Y].name}`);for(let fe=0;fe<Se.length;fe++)if(Se[fe].active===!0&&(j+=Se[fe].trafficPercentage,ie<=j)){i.log(2,`Selecting version ${Se[fe].name} for script ${M[Y].name}. ${Se[fe].trafficPercentage}% chance.`);try{Ee(Se[fe].href)}catch(me){console.error(me)}break}}}else if(i.fsdata.scripts&&Array.isArray(i.fsdata.scripts))for(let M=0;M<i.fsdata.scripts.length;M++)try{Ee(i.fsdata.scripts[M])}catch(Y){console.error(Y)}}function GS(){return Math.random()<Uu/100}})}A.function(Lb,{token:"startEngine",dependencies:[l.AD_QUALITY_MANAGER,{token:"StickyFooter",optional:!0},{token:"Joke",optional:!0},{token:"SideWall",optional:!0},{token:"initDynamicAds",optional:!0},{token:"newDynamicContent",optional:!0},{token:"DynamicAds",optional:!0},{token:"SlidingUnit",optional:!0},{token:"StickyAd",optional:!0},{token:"StickyRail",optional:!0},{token:"Interstitial",optional:!0},{token:"Pushdown",optional:!0},{token:"Video",optional:!0},{token:"Superflex",optional:!0},{token:"Carousel",optional:!0},{token:"Cube",optional:!0},{token:"WakeLock",optional:!0},{token:"ViewableImpressions",optional:!0},l.FREESTAR,l.DISPENSARY_DATA,l.ANCILLARY,l.ANALYTICS,l.PERFORMANCE_LOGGER,l.IDENTITY_MANAGER,l.GAM_MANAGER,l.AD_REFRESHER,l.LOGGER,l.REBID_MANAGER,l.AD_SLOT_SERVICE,l.AD_SLOTS_MANAGER,l.DEVICE_ORIENTATION_TRACKER,l.VIRTUAL_KEYBOARD_REFRESH_CONTROL,l.MEMORY_MONITOR,l.BIDS_MANAGER,l.PAGE,l.USER_INFO_MANAGER,l.AMAZON_MANAGER,{token:"IntelligentAdInsertManager",optional:!0},"FlyingCarpetManager",l.URL_VALIDATOR]});function Bb(){return T(this,null,function*(){let i,e=new Promise(o=>{i=o}),t=()=>T(this,null,function*(){yield kb(),yield J().init(),i()}),r=()=>Mb(()=>{kS({callback:t}),window.addEventListener("pubfigLoaded",()=>freestar.log(1,"checkPageSpeedOptimizationAndUserConsent called after googlefc validation"))}),s=()=>UE(window.freestar.fsdata.cmpType,window.freestar.locData,()=>{kS({callback:t}),window.addEventListener("pubfigLoaded",()=>freestar.log(1,"checkPageSpeedOptimizationAndUserConsent called after CMP initialization"))});(window.freestar.fsdata.cmpType==="FUNDING_CHOICES"?r:s)(),yield e})}A.function(Bb,{token:"init",dependencies:[]});T(pu,null,function*(){yield G.instance.call("init"),G.instance.call("startEngine")})});Fb();})();
