import{a as o}from"./stimulus-helpers-Bg5ApOVk-1.js";import r from"./form-controller-6xgqIUJZ-1.js";import i from"./sensitive-fields-DfmVbDYc-1.js";import{deleteCompleteEventSources as n,findReferringCategory as s,trackCompleteEvent as a,sendTrackingEvent as l}from"./tracking-ChOFcS2D-1.js";import{bl as m,bn as c}from"./actions-C6z5I147-1.js";import"./stimulus-Cq41p_up-1.js";import"./preload-helper-cYIQMxwj-1.js";import"./ez-base-controller-DuL8VR07-1.js";import"./rails-ujs-DLwK8N9E-1.js";import"./form-validator-Dmr5dG9u-1.js";import"./helpers-DWGVlOV6-1.js";import"./js-Cz0CWeBA-1.js";import"./init-user-CLXATX98-1.js";import"./error-helpers-Ddtgi0dg-1.js";import"./validation-helpers-DvJ6JeNd-1.js";import"./animated-label-BkFUOxcC-1.js";import"./button-helpers-CvZG-X-W-1.js";class p extends r{connect(){super.connect(),this.trackTriggerEvent(),i(),n()}checkNewsletterOption(){const e=document.getElementById("newsletter");e&&e.checked?sessionStorage.setItem("newsletter_preference","newsletter_signup"):sessionStorage.setItem("newsletter_preference","no_newsletter_signup")}validateAndSubmit(){if(this.validator.preSubmitValidate(),this.validator.valid){this.trackFormComplete();const t=this.element.dataset.collectionsAccountCreate==="true"?"Collections":s(this.element);this.continueRegistration(),a({action:m,category:t,label:"Sign_Up-Email",dataLayerCompleteAttrs:["email_address","email_hash_md5","email_hash_sha1","sign_in_type"]})}else super.hideSpinner()}continueRegistration(){this.downloadLimitModal&&(this.element.action=`${this.element.action}?download_limit=true`),this.submit()}get downloadLimitModal(){var t;const e=this.element.closest(".ez-session-modal__wrap");return(t=e==null?void 0:e.classList)==null?void 0:t.contains("ez-session-modal__download-limit")}trackTriggerEvent(){const t=new URLSearchParams(window.location.search).get("referring_conversions_category");t&&l({data:{category:t,action:c}})}}o({name:"account-form",import:p});export{p as default};
